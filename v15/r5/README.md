4D v15 R5
---

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0094995 メソッドエディターに日本語を入力中，未確定の文字列を何度も再描画されました。
 
* ACI0095340 フォームエディターでリストボックスの列を選択し，コンテキストメニューを表示しようとすると，アプリケーションがクラッシュしました。

* ACI0095302 日本語入力中に``return``キーを押すと，デフォルトボタンが反応しました。
 
* ACI0092650 メソッドエディターに改行コード（バックスラッシュ記号）が使用されている場合，日本語変換中のガイドラインが2行目以降は左にずれて表示されました。

* ACI0094250 Mac 64bits版（日本語）のみ。新規データベースを作成した直後にエラーメッセージが表示されました。

**注記**: 64ビット版の日本語形態素分解ライブラリ``mecab``が正しくビルドされていなかったことが原因でした。

* ACI0094570 [FORM SCREENSHOT](http://doc.4d.com/4Dv15/4D/15.1/FORM-SCREENSHOT.301-2685887.ja.html)は，高解像度（Retina）ディスプレイ対応の画像を返しませんでした。

---

* ACI0094834 Mac版のみ。4D Write Proで``Myriad Pro``や``Trade Gothic LT Std``といったフォントを使用した場合，各行で上端の数ピクセルが欠けました。通常の変数やフィールドでは，最初の行だけが欠けます。

* ACI0094592 Mac OS X 10.11 ドイツ語版のみ。検索ダイアログに表示されるキャンセルボタンの幅が不足していました。"Abbrechen"と表示するためには，100px程度の幅が必要です。

* ACI0094725 フィールドにおおきなテキストが登録されている場合，フォームの表示にかなりの時間がかかりました。

* ACI0094773 Mac版のみ。Retinaディスプレイに表示された4D Writeエリアに対して何かをドロップすると，画面の表示が乱れました。
 
* ACI0094401  クロスタブ型クイックレポート内の時間フィールドは，[Sum](http://doc.4d.com/4Dv15/4D/15.1/Sum.301-2686264.ja.html)の計算値が正しくありませんでした。小計値は秒単位，合計値は時間単位で値が表示されました。

* ACI0094710 Mac版のみ。リストボックスにフォーカスが置かれている状態でポップアップウインドウを表示した場合，そのポップアップウインドウにもテキスト入力が表示されていると，フォームを閉じた後に復帰したフォームのフォーカスが置かれたエリアにはカーソルが表示されず，テキストの選択された範囲はグレーアウトされていました。

* ACI0094718 クライアント側で[SET QUERY DESTINATION](http://doc.4d.com/4Dv15/4D/15.1/SET-QUERY-DESTINATION.301-2685575.ja.html)を実行し，クエリデスティネーションをセットに設定した場合，UUIDフィールドにNULLが含まれていると，アプリケーションがクラッシュしました。

* ACI0095653 4D Viewエリアのプロパティリストに[詳細設定](http://doc.4d.com/4Dv15R4/4D/15-R4/Plug-in-areas.300-2880332.ja.html)ボタンが表示されませんでした。

* ACI0095603 読み書きモードでロードされているレコードに``On Backup Shutdown``でアクセスした場合，バックアップの完了後，デッドロック状態に陥ることがありました。

* ACI0095364 4D Write Pro文書に画像を挿入した後，削除し，元の画像ファイルを画像編集ソフトなどで加工してからもう一度挿入すると，加工前の古い画像が挿入されました。

* ACI0095383 4D Write Pro文書（72DPI）にコンテキストメニューから画像を追加し，マウス操作でその画像をリサイズすると，画像がぼやけて表示されました。
 
* ACI0065508 リストボックスの``On Display Detail``イベントが``On Load``よりも先に実行されました。

* ACI0094631 クエリエディターを表示し，自動リレーションが設定されたフィールドに対してクエリを実行すると，アプリケーションがクラッシュしました。

* ACI0094410 バーコードフォントなど，一部のフォント名がラベルエディターのフォントリストに表示されませんでした。

**注記**: 表示されないフォント名は，現行のAPIではサポートされていないものです。（旧式のAPIを使用している）ラベルエディターのリストは修正されましたが，プロパティリストおよび[FONT LIST](http://doc.4d.com/4Dv15R3/4D/15-R3/FONT-LIST.301-2695248.ja.html)は，引き続き現行のフォント名だけが列挙されます。

* ACI0094028 Mac版のみ。おおきな外部モニターをメイン画面として使用した場合，内部モニター（サブ画面）でクリックしたポップアップメニューの表示される位置が正しくありませんでした。 

* ACI0094851 何らかの理由で不正な``multipart/form-data``タイプのデータがWebサーバーに対して送信された場合，アプリケーションがクラッシュするまで無限ループに陥りました。
 
* ACI0095384 4D Write Pro文書の段落にマージンが設定されている場合，テキストの高さだけがハイライト表示されました。上下マージンもハイライト表示されるべきです。
 
* ACI0095211 コンボボックスにタイプ入力中，完全に一致するアイテムがない限り，項目が選択されませんでした。以前のバージョンでは，前方一致した最初のアイテムが選択され，途中でEnterキーを入力すれば入力中のテキストが補完されました。

* ACI0093776 [書き出しダイアログ](http://doc.4d.com/4Dv15/4D/15.1/Exporting-data-to-files.300-2679411.ja.html)の「区切り文字」設定エリアに数字とスラッシュ記号を入力すると，アプリケーションがクラッシュしました。たとえば，``13/10``と入力することができません。

* ACI0095257 15.2以降，テキストの最後に空白文字がない限り，テキストの最後をクリックしてカーソルをそこに移動することができませんでした。

* ACI0094032 一部のクライアントがスリープしている間に「すべてのユーザーが切断するまで待つ」オプションを選択してサーバーをインタープリターモードで再起動した場合，スリープしていないクライアントを切断してからスリープしていたクライアントを起こすと，起こされたクライアントは接続が切断され，サーバーは再起動しませんでした。

* ACI0095466 日本語版のみ。データベース設定に4DSLI.DLLに関する昔の注意書きが表示されていました。

* ACI0095021 64ビット版のみ。ODBCのインポート/エクスポートダイアログが利用できませんでした。

**注記**: 未実装のメニュー項目は実行できないように修正されました。

ACI0094181 
[INTEGRATE MIRROR LOG FILE](http://doc.4d.com/4dv15r/help/command/ja/page1312.html)の標準モードで存在するプライマリーキーを持つレコードを作成しようとした場合，レコードは更新されず，エラーも返されませんでした。

**注記**: 自動修復モードでは，これが正しい動作です。

* ACI0094867 シングル・サイン・オンを有効にし，同じActive Directoryに属さないローカルアカウントでクライアントをTLSモードで公開されているサーバーに接続しようとすると，クライアントがフリーズしました。

* ACI0093900 Windows版のみ。5分以上の間隔を空けてクライアントのスリープ/スリープ解除を何度も繰り返した場合，接続が切断されたというダイアログがクライアント側に表示されます。そのようなクライアントをサーバーに再接続させた場合，サーバー側の管理画面に同じクライアントが表示されました。

* ACI0095414 [DISTINCT VALUES](http://doc.4d.com/4dv15r/help/command/ja/page339.html)の第3パラメーターを渡してインデックスの設定されたスカラー型フィールドに対してクライアント側で使用した場合， エラー``-10533``が返され，配列のサイズには間違った数が返されました。

* ACI0095416 [DELAY PROCESS](http://doc.4d.com/4dv15r/help/command/ja/page323.html)に遅延時間``0``を渡しても，遅延中のプロセスを再開させることができませんでした。[RESUME PROCESS](http://doc.4d.com/4dv15r/help/command/ja/page320.html)でもダメでした。

* ACI0095325 Windows版のみ。システム言語が「フランス語（モロッコ）」に設定されている場合，アプリケーションがクラッシュしました。

* ACI0095270 [Get Pointer](http://doc.4d.com/4dv15r/help/command/ja/page304.html)を使用すれば，プリエンプティブプロセスからインタープロセス変数にアクセスすることができました。

* ACI0095338 サーバーの「〜分後に終了する」オプションが選択されている場合，メッセージ欄にテキストを入力することができませんでした。「すべてのクライアントが切断するまで待つ」オプションを選択すれば，入力できるようになります。

* ACI0095404 並び替えダイアログの並び順アイコンをクリックしても，順序が反転しませんでした。

* ACI0095494 4D Write Pro文書をファイルに印刷した場合，マージンの位置がドキュメントで定義された場所どおりではありませんでした。

* ACI0095272 Mac版のみ。4D Write Pro文書（拡張子``4wp``）のファイル拡張子を``zip``に変更し，展開してから圧縮してファイル拡張子を``4wp``に戻した場合，文書をインポートすることができなくなりました。

* ACI0094654 ラベルエディターのレイアウトページに切り替えようとすると，エラー``59``が返されました。小数点区切り文字にピリオドが採用されているシステム言語設定で問題が起こります。

* ACI0093311 [131762] Windows版のみ。別アプリケーションがフォーカスを得ると，非モーダルダイアログの``On Deactivate``イベントが実行されました。v14以前のバージョンでは，同イベントが発生しませんでした。そのため，ダイアログの``On Deactivate``イベントで``BRING TO FRONT(Current process)``が実行されるようにコーディングされていた場合，4D以外のアプリケーションが最前面にある間，ずっとイベントが発生し，ダイアログが点滅し続けました。

* ACI0093022 Mac版のみ。ラジオボタンをクリックしたときの表示が綺麗ではありませんでした。円形ではなく，八角形のようなフォーカスが描画されました。

* ACI0092932 階層リストボックスを右いっぱいまでスクロールした後，[OBJECT SET SCROLL POSITION](http://doc.4d.com/4dv15r/help/command/ja/page906.html)を実行した場合，水平方向の位置は問題ありませんでしたが，垂直スクロールに位置が正しくありませんでした。

* ACI0092351 オブジェクト型フィールドのデータが保存される場合を「レコード内」に設定しても，ストラクチャを再起動すると元の設定に戻ってしまいました。

**注記**: データベースエンジンではなく，ストラクチャーエディター側の問題でした。

* ACI0092139 スペイン語版およびポルトガル語版の4D Viewは，米国式の数値フォーマットが一覧に含まれていました。桁区切り記号が違うため，そのようなフォーマットは除かれるべきでした。

* ACI0091831 Mac版のみ。起動時にWebサーバーを起動するように設定している場合，一度でもリクエストを処理すると，Webサーバーを再起動することができませんでした。

* ACI0095016 "Web Application Expansion for 4D Client"ライセンスのアクティベーションができませんでした。ライセンス番号は認識されますが，ブラウザからアクセスすると，エラーページが返されました。

* ACI0094935 ビルド195739以降，デザイナー（Designer）のパスワードをリセットすることができませんでした。空の文字列を入力すると，エラーが返されます。ACI0093236が修正されたことの副作用でした。

* ACI0094921 4D Writeドキュメントを4D Write Proで開くと，フォーミュラーの参照が正しくインポートされないことがありました。

**注記**: 存在しないテーブルやフィールドが参照されている場合，当然，エラー48が返されます。[SET ALLOWED METHODS](http://doc.4d.com/4Dv15R3/4D/15-R3/SET-ALLOWED-METHODS.301-2696335.ja.html)で許可されていないメソッドも同様です。

* ACI0094898 [Replace string](http://doc.4d.com/4Dv15R3/4D/15-R3/Replace-string.301-2695698.ja.html)で正しく文字列が置換されない場合がありました。

```
$string:="aaaa aaaa aaaa aaaa"
$string:=Replace string($string;"aaaa";"xxxx";*)
ALERT($string)
// The result is"xxxx aaaxxxxaa aaa"
```

* ACI0094770 Windows版のみ。フォームエディター，オブジェクトライブラリーの『カテゴリー』メニューをクリックしても，何も起きませんでした。15.1には存在しなかった問題です。 

* ACI0094697 Windows 64ビット版のみ。[WA EXECUTE JAVASCRIPT FUNCTION](http://doc.4d.com/4Dv15/4D/15.1/WA-EXECUTE-JAVASCRIPT-FUNCTION.301-2685016.ja.html)は，ブール型および整数型の値を返しませんでした。統合WebKitであれば問題ありません。

**注記**: [ドキュメント](http://doc.4d.com/4Dv15R3/4D/15-R3/WA-EXECUTE-JAVASCRIPT-FUNCTION.301-2696078.ja.html)に明記されているように『複雑な型』の結果を返すことができるのは，統合WebKitだけです。複雑な型には，日付やオブジェクトが含まれます。数値・ブール・テキストは『シンプルなデータ型』です。

* ACI0094647 4D View Pro型のリストボックス列を並び替えた後，再描画が不完全で，一時的に列の同期が取られていないような表示になりました。

* ACI0094644 クイックレポートエディターにフォーミュラーを入力しようとすると，キーストロークが二重に処理されました。たとえば，``substring``とタイプ入力した場合，``ssuubbssttrriinngg``というフォーミュラーになりました。通常のフォーミュラーエディターでは問題ありません。15.1には存在しなかった不具合です。

* ACI0094620 [METHOD SET CODE](http://doc.4d.com/4Dv15/4D/15.1/METHOD-SET-CODE.301-2685964.ja.html)で作成したSOAP公開メソッドは，Webサービスでコールすることができませんでした。手作業でメソッドを編集すれば，コールできるようになります。

* ACI0094591 [Size of array](http://doc.4d.com/4Dv15/4D/15.1/Size-of-array.301-2685282.ja.html)内で配列の要素に対してポインターの逆参照を使用するとアプリケーションがクラッシュしました。

```
C_POINTER($ptr) 
ARRAY POINTER($ptrArr;1) 
ARRAY LONGINT($longintArr;2) 

$ptr:=->$ptrArr 
$ptr->{1}:=->$longintArr 

ASSERT(Size of array($ptr->{1}->)=Size of array($longintArr);"size of array should work") 
```

* ACI0094583 ダイアログを閉じた後，メニューバーが正しく更新（再描画）されないことありました。

* ACI0094557 OS X El Capitanのみ。フルスクリーンモードでウインドウが表示されているときに``Escape``キーを入力すると，アプリケーションがクラッシュしました。

* ACI0094553 ``On Web Authentication``データベースメソッド内で[WEB GET HTTP HEADER](http://doc.4d.com/4Dv15/4D/15.1/WEB-GET-HTTP-HEADER.301-2685169.ja.html)を使用すると，空の配列が返されました。``$2``には，ヘッダーが正しく代入されています。

* ACI0094456 表示されていないウインドウ上のWebエリアでは，``On End URL Loading``, ``On URL Filtering``など，Webエリア特有のフォームイベントが発生しませんでした。

* ACI0094459 Mac版のみ。``Escape``がキーボードショートカットに設定されたボタンがキー入力に反応しませんでした。

* ACI0094506 クイックレポートの幅が日付または数値に対して不足しており，かつ，高さに余裕がある場合，印刷時にデータが折り返されませんでした。数値は隣の列に重ねて出力され，日付は途中で切られました。

* ACI0094512 "4D SQL Desktop"ライセンスのアクティベーションができませんでした。ライセンス番号は認識されますが，[SQL LOGIN](http://doc.4d.com/4Dv15R3/4D/15-R3/SQL-LOGIN.301-2695340.ja.html)コマンドを実行するとライセンスまたはアクセス権エラーが返されました。

* ACI0094546 Mac版のみ。長大なテキストを含むフィールドがレコードに存在する場合，フォームの表示と終了にとても時間がかかりました。たとえば，``"large text"*1024*48``のようなテキストでは，フォームを開くのに1分かかりました。

* ACI0094548 Windows版のみ。``AP FULL SCREEN``または``AP NORMAL SCREEN``どちらかのコマンドを繰り返し使用していると，アプリケーションがクラッシュしました。不具合はプラグイン側で修正されています。確認するために4Dのバージョンを入れ替える必要はありません。

* ACI0094370 [LISTBOX GET CELL COORDINATES](http://doc.4d.com/4Dv15/4D/15/LISTBOX-GET-CELL-COORDINATES.301-2045072.ja.html)から返される座標が正確ではありませんでした。

* ACI0094269 サブフォームの``On Data Change``イベント中に新規レコードを作成すると，もう一度``On Data Change``イベントが発生しました。スペルチェックの不具合 (ACI0084849) が修正されたことの副作用でした。

* ACI0094239 Mac 64ビット版のみ。``QUIT 4D(0)``を実行した場合，タイマアウトを0秒に設定するとエラーが表示されました。引数を省略した場合，あるいは``1``を指定した場合には問題ありません。

**注記**: 以前のバージョンでは，タイムアウトの単位が『分』であると記述されていました。そのため，敢えてタイムアウト時間を``0``に設定することは珍しくありませんでした。現行バージョンの[QUIT 4D](http://doc.4d.com/4Dv15/4D/15.1/QUIT-4D.301-2686304.ja.html)は，秒単位でタイムアウト時間を設定することができます。

* ACI0094210 メッセージのUID形式が複雑な場合，[POP3_MsgLstInfo](http://doc.4d.com/4Dv15R3/4D-Internet-Commands/15-R3/POP3-MsgLstInfo.301-2813566.ja.html)でアプリケーションがクラッシュする恐れがありました。

```
1448628477.M436576P30965V0000000000000803I000000000A4C0ED7.bianca.kr eativmedia.ch,S=2223
```

* ACI0094208 クリックレポートエディターのカラムヘッダーをトリプルクリックすると，起動したフォーミュラーエディターがクリックレポートエディターの背後に移動してしまい，画面を閉じることができなくなりました。

* ACI0094196 Windows版のみ。``Pop up form window``および`` Toolbar form window``タイプのウインドウ上では，``On Mouse Move``イベントが発生しませんでした。 ACI0094688と同じ問題です。

* ACI0094187 ドキュメントの指示に従い，スペルチェック辞書をインストールしても，登録された単語が認識されませんでした。

**注記**: スペルチェック辞書のカスタマイズは，ユーザー辞書を補完するものであり，置き換えるものではありません。たとえば，10万語を超える単語数が登録されたカスタム辞書をインストールすると，アプリケーションの起動が明らかに遅くなります。

* ACI0093708 スタイル付きテキストに表示フォーマットを設定すると，テキストのソースコードが整形されて表示されました。

* ACI0093501 4D Viewの自動計算モードが常に有効でした。

* ACI0093455 Mac版の4D Viewの[PV SET CELL PROPERTY](http://doc.4d.com/4Dv15/4D-View/15/PV-SET-CELL-PROPERTY.301-2061444.ja.html)コマンドに``pv style color text odd``を指定した場合，実際には``pv style automatic word wrap``が変化しました。16進数で表現したRGB値の赤と緑が入れ替わっているような振る舞いでした。

* ACI0095211 コンボボックスにタイプ入力中，完全に一致するアイテムがない限り，項目が選択されませんでした。以前のバージョンでは，前方一致した最初のアイテムが選択され，途中で``Enter``キーを入力すれば入力中のテキストが補完されました。

* ACI0095394 HTTPの``Origin``ヘッダーが存在する場合，クロスオリジンリソース共有（CORS）リクエストに対して``403``エラーが返されました。

* ACI0095407 プリエンプティブプロセスで[Time string](http://doc.4d.com/4dv15r/help/command/ja/page180.html)を使用するとアプリケーションがクラッシュしました。

**注記**: 内部的にリソース``STR#149``が参照されていました。修正により，時間型の[String](http://doc.4d.com/4dv15r/help/command/ja/page10.html)および[Time string](http://doc.4d.com/4dv15r/help/command/ja/page180.html)はXLIFFを使用するようになりました。

* ACI0095117 64ビット版のみ。[OBJECT SET RGB COLORS](http://doc.4d.com/4dv15r/help/command/ja/page628.html)でオブジェクトの背景色を透明にすることができませんでした。

* ACI0095368 アプリケーションのビルド名（``BuildApplicationName``）を変更した場合，以前にビルドされたクライアントはサーバーに自動接続できませんでした。``EnginedServer.4Dlink``内の``server_database_name``には以前のサーバー名が設定されてしまうためです。

* ACI0095293 64ビット版のみ。ビルドされたアプリケーションを起動すると，「4D Reportコンポーネントは4D SVGコンポーネントが必要です」というエラーメッセージが表示されました。修正により，新しいクイックレポートは自立したコンポーネントになりました。

* ACI0095275 終了中にユーザー/グループにアクセスすると，アプリケーションがクラッシュすることがありました。

* ACI0095244 [Position](http://doc.4d.com/4dv15r/help/command/ja/page15.html)にアスタリスクオプションを渡さなかった場合の速度が以前のバージョンよりも遅くなりました。

* ACI0095111 ``Open form window``と``DIALOG``の間で[CALL FORM](http://doc.4d.com/4dv15r/help/command/ja/page1391.html)を使用しても，何も起きませんでした。ウインドウは作成されているので，メソッドは``On Load`イベントに続けて実行されるべきです。

* ACI0095188 Windows版のみ。[CREATE FOLDER](http://doc.4d.com/4dv15r/help/command/ja/page475.html)に無効なパスが渡された場合，トレースするとエラー``-120``ではなく``-43``が返されました。

* ACI0095234 [ OPEN PRINTING JOB](http://doc.4d.com/4dv15r/help/command/ja/page995.html)よりも前に[SET PRINT PREVIEW](http://doc.4d.com/4dv15r/help/command/ja/page364.html)を使用した場合，初回はプレビューではなくプリンターにジョブが送信されました。

* ACI0094416 4D Popが起動された状態でクリックレポートのファイル選択ダイアログを表示すると，ダイアログがレポート画面の背後に表示されてしまい，操作を続けることができませんでした。

* ACI0093887 Mac版のみ。選択されたセルのハイライトカラーが正しくありませんでした。
 
* ACI0094820 15.1以前のバージョンで作成されたクイックレポートファイル（拡張子4qr）にフォーミュラが含まれており，その中で拡張文字が使用されている場合，15.2以降のクイックレポートでそのファイルを開くと文字化けが発生しました。

* ACI0095104 Mac版のみ。4D Write Proまたはスタイル付きテキストで文法チェックを使用した場合，以前に訂正した単語に対する提案がメニューに表示されました。
