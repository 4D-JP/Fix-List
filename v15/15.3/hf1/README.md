4D v15.3 Hotfix 1
---

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0095625 テキスト入力エリア（フィールド/変数）のタイプが「数値」のときと「文字」のときでは，文字列のハイライト処理が違いました。数値の場合，値の手前（左）をクリックすると値全体がハイライトされるべきですが，プロパティリストの変数タイプが「文字」に設定されていると，たとえオブジェクトにバインドされたデータソース（フィールド/変数）の型が数値であっても，テキストのようにハイライトされました。つまり，文字列の左端にカーソルが表示されました。

---

###macOS Sierra (16B2657)

* ACI0096021 macOS 10.12.1 (16B2657) のみ。ライセンス更新ダイアログで更新ボタンをクリックすると，アプリケーションがクラッシュしました。データベース設定ダイアログでも，似たような問題が発生します。

* ACI0095973 macOS 10.12.1 (16B2657) のみ。フォームエディターのプロパティリストをクリックするとアプリケーションがクラッシュしました。

---

* ACI0095714 Mac版のみ。フィールドの値がアクセント記号（``è``, ``é``, ``ä``など）で終わる場合，ODBC経由でそのようなデータをSQLで外部データソースに``INSERT**すると，エラー``9922``が返されました。

**注記**: ``Begin SQL``/``End SQL``構文内で``<<[mytable]myfield>>``フィールド表記を使用した場合に問題が発生します。 変数や配列の参照（``:$variable``）であれば問題ありません。

* ACI0095844 クライアント側のメニューからインタープリターモードまたはコンパイルモードに切り替えてサーバーアプリケーションを再起動すると，クライアント側で4D Write Proのライセンスが認識されなくなりました。

* ACI0095853 デザインモードの検索で数万件のオブジェクトがヒットするような条件を入力すると，しばらくアプリケーションがハングしたような状態になり，デザインモードを操作することができませんでした。

**注記**: 検索の速度ではなく，結果を階層リストに表示するための仕組みに問題がありました。

* ACI0095911 ``SMTP_QuickSend``で送信できるメール本文のサイズにコンパイルモードで制限がありました。画像が含まれる4D Write Pro文書をMIMEモードで書き出した場合，画像データがBase64エンコードされるために本文のサイズが32,000バイトを超えることは少なくありません。修正により，32,000バイトを超えるメールも送信できるようになりました。

* ACI0094581 コンパイルモードで``QUERY([table];[table]field;*)``という構文のコードを実行するとアプリケーションがクラッシュしました。

* ACI0095232 [BLOB TO USERS](http://doc.4d.com/4dv15r/help/command/ja/page850.html)でストラクチャにユーザー情報をインポートすることができませんでした。

* ACI0088073 プロセスでトランザクションを開始してロードした「リレートしたNレコードを削除」削除制御オプションが有効にされたレコードを削除した後にトランザクションをキャンセルした場合，そのプロセスが動作している間は，新規プロセスから前のプロセスがロックしたセレクション内のレコードを削除することができませんでした。

**注記:** [リレートしたNレコードを削除](http://doc.4d.com/4Dv16/4D/16/Relation-properties.300-3048985.ja.html)削除制御オプションが有効にされている場合，データベースエンジンは内部的にトランザクションを開始し，セレクションの削除を試みます。しかし，これをトランザクション内で実行した場合，トランザクションをキャンセルしても，内部的に開始された第2段階のトランザクションがロックしたレコードがプロセスによってロックされたままになりました。つまり，第2段階のトランザクション内でレコードを削除してから第2段階のトランザクションを確定し，第1段階のトランザクションをキャンセルした場合，削除を取りやめたレコードがそのプロセスによってロックされたままになる，という問題がありました。

```
START TRANSACTION
START TRANSACTION
QUERY([configs];[configs]id=2)
DELETE SELECTION([configs])
VALIDATE TRANSACTION 
CANCEL TRANSACTION
```

* ACI0095804 MSCでアドレステーブルを圧縮せずにデータファイルを圧縮した直後，アドレステーブルの圧縮を含めてデータファイルを圧縮すると，アプリケーションがクラッシュしました。新規データベースでは再現しません。レコードの作成や削除を繰り返したデータファイルでは再現します。

* ACI0091658 [SET TABLE TITLES](http://doc.4d.com/4dv15r/help/command/ja/page803.html)でテーブルタイトルを設定した後，クエリエディターを表示した場合，マスターテーブルにN対1リレーションが定義されていると，余計な空のテーブル名（``[]``）が表示されました。

* ACI0091900 データベース間で入力フォームを移動した場合，ヘルプTipsが一緒に移動しませんでした。

* ACI0094807 [On SQL Authentication](http://doc.4d.com/4Dv16/4D/16/On-SQL-Authentication-database-method.301-3037171.ja.html)データベースメソッドの``$3``にはクライアントではなくホストのIPアドレスが返されました。
