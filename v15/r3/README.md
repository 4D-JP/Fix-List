4D v15 R3
---


* ACI0088594 エクスプローラーでフォームの名前を編集中，入力を確定せずにトリプルクリックすると，フォーム名が元に戻ってしまいました。

* ACI0088808 [SQL LOGIN](http://doc.4d.com/4Dv14/4D/14.4/SQL-LOGIN.301-2511762.ja.html)は接続が失敗してもシステム変数```OK```に```1```が代入されました。

* ACI0088897 ``PV Get picture``を壊れたピクチャファイルに対して使用したり，無効な行列番号を指定した場合，エラーが返されてアプリケーションがクラッシュしました。

* ACI0089641 ``On Display Detail``イベントで実行されるメソッドにブレークポイントを追加してフォームを実行した場合，デバッガが20回程度表示された後にアプリケーションがフリーズしたようになり，クラッシュしました。ACI0089641が修正されたことに関連があります。

* ACI0093938 スタックにレコードをプッシュ/ポップした場合，シーケンス番号がインクリメントされませんでした。15.0では存在しなかった問題です。ACI0089938（後述）が修正されたことに関連があります。

```
PUSH RECORD([Table_1])
CREATE RECORD([Table_1])
[Table_1]Field_1:=1
POP RECORD([Table_1])
```

* ACI0090169 オブジェクト型のローカル変数を別プロセスに引数で渡した場合，相手プロセス側でその変数を更新すると，呼び出し側のローカル変数も更新されました。オブジェクト型は参照型なので，代入されたローカル変数が同じオブジェクトを参照するのは正常ですが，プロセスを超えてローカル変数が同じオブジェクトを参照するのは間違いでした。

例:

```
C_OBJECT($1)
C_OBJECT($object)
C_LONGINT($psn)

Case of 
: (Count parameters=0)
TRACE
$object:=JSON Parse("{}")
If (OB Is defined($object))
$psn:=New process(Current method name;0;Current method name;$object)
End if 

TRACE

: (Count parameters=1)

TRACE
$object:=$1

OB set($1;"test";"coucou")
  // 呼び出し元の$objectに注目。（本プロセスの$objectが更新されるのは正常）
TRACE

End case 
```

* ACI0090464 Mac版のみ。ポルトガル語版の4D Viewおよび4D Writeが正しくローカライズ表示されませんでした。

* ACI0090925 SQLの``MONTH``および``YEAR``関数は，特定のタイムゾーンで間違った値（ひとつ前の月または年）を返しました。

* ACI0090953 64ビット版のみ。トランザクション中に数百万件のレコードを作成すると，エラー#-9999（レコードを保存するスペースがありません）が返されました。テンポラリフォルダー内の一時ファイル（xxxxx.trans）のサイズが1.8GBに達するあたりで問題が発生しました。

* ACI0091083 リストボックスの列がロックされている場合，[LISTBOX SET LOCKED COLUMNS](http://livedoc.4d.com/--15.1/-/LISTBOX-SET-LOCKED-COLUMNS.301-2686092.ja.html)にマイナスの列番号を渡すと，ロックが解除され，列を動かすと，列が消えたりアプリケーションがクラッシュしたりしました。

* ACI0091164 Mac版のみ。フォームエディターでリストボックス列を選択して，Commandキーを押しながらプロパティリストのフォームイベントをクリックしても，全選択/解除になりませんでした。

* ACI0080596  デザインモード検索では，リストボックスの列にバインドされているフィールドが列挙されませんでした。

* ACI0081512 ラベルエディター内でフィールドを水平に連結した場合，間に空白が挿入されませんでした。

* ACI0081921 Mac版のみ。ページを切り替えた場合，Webエリアの垂直スクロールバーが操作できませんでした。

* ACI0082378 リストボックスのヘッダーをオブジェクト外にドラッグしても，スクロールが始まりませんでした。

* ACI0083311 アクセント記号が含まれる4D Write文書をHTML4形式で保存し，開き直すと，アクセント記号付きの文字が化けました。

* ACI0084755 [Current method path](http://livedoc.4d.com/--15.1/-/Current-method-path.301-2685980.ja.html)をオブジェクトメソッド内で実行した場合，インタープリターモードではオブジェクト名がパスになりますが，コンパイルモードでは変数名がパスになり，一貫性がありませんでした。

* ACI0085368 SQLの``INTO LISTBOX``を連続コールすると，リストボックスのヘッダーがどんどんおかしくなりました。

* ACI0085575 Mac版のみ。シートウインドウ上でコンボボックスの項目を選択してからウインドウをクリックすると，シートウインドウが消えました。

* ACI0085614 Windows版のみ。Internet Commandsのコマンドは，絶対パスの代わりにファイル名だけを渡した場合，データベースフォルダー内のファイルを使用しませんでした。

* ACI0087196 Mac版のみ。ピクチャライブラリに壊れた画像が保存されている場合，アプリケーションがクラッシュする恐れがありました。

* ACI0087268 クイックレポートに不正なフォーミュラーが使用されている場合，レポート出力を途中で中断することができませんでした。

* ACI0088416 ログイン画面の『パスワード保存』チェックボックスを有効にしても，スタンドアロンアプリケーションでは，パスワードが保存されませんでした。

* ACI0094033 64ビット版のみ。スタンドアロン版をはじめて起動した後にアプリケーションがクラッシュしました。

**注記**: 初起動の場合，下記の場所に4Dフォルダーがありません。

```
...:Users:{ユーザー名}:Library:Application Support

C:\Users\{ユーザー名}\AppData
```

* ACI0094106 64ビット版のみ。Internet Commandsが使用できませんでした。

* ACI0075500 並び順が定義されたクリックレポートを実行すると，以降，同じプロセスで[ORDER BY](http://livedoc.4d.com/--15.1/-/ORDER-BY.301-2685582.ja.html)が効かなくなりました。もう一度，コマンドを実行すれば，今度は並び替えが実行されます。

**注記**: 連結ORDER BYを正しく閉じないと，そういうことが起きます。

* ACI0076615 削除されたフィールドを含むクイックレポートは，開くことができませんでした。

* ACI0078353 配列型リストボックスのセルを編集中に使用した場合，[FORM GET OBJECTS](http://livedoc.4d.com/--15.1/-/FORM-GET-OBJECTS.301-2685894.ja.html)は間違ったポインターを変数の配列に返しました。リストボックスに対するポインターではなく，列に対するポインターが返されました。

* ACI0093967 4D Write Proエリアが含まれるフォームを使用してセレクションを印刷した場合，文書に挿入されたフォーミュラー式がロードされませんでした。

* ACI0094513 15R3のサーバー管理画面に表示されるバージョン情報がベータ版のままでした。

* ACI0094098 Mac64ビット版のみ。削除されたテーブルが存在する場合，新クイックレポートエディターで範囲チェックエラーが発生しました。

* ACI0094246 クライアント/サーバーアプリケーションをインタープリターまたはコンパイル済み再起動すると，サーバーがクラッシュしました。

* ACI0094335 Windows版のみ。新ネットワークレイヤーを使用し，クライアントを接続または接続切断すると，高い確率でサーバーがクラッシュしました。

* ACI0094322 重複不可フィールドに重複するデータが登録されている場合，MSCに警告が表示されるようになりましたが，重複の数が200を超えると，警告ではなくエラーが表示されました。

* ACI0094058 4D Mobileでコールされたメソッドが[HTTP Get](http://livedoc.4d.com/--15.1/HTTPS/HTTP-Get.301-2685985.ja.html)を使用すると，アプリケーションがクラッシュしました。

* ACI0094310 Mac64ビット版のみ。[SET MENU BAR](http://livedoc.4d.com/--15.1/-/SET-MENU-BAR.301-2685776.ja.html)を使用すると，アプリケーションがクラッシュしました。

* ACI0094276 フランス語版のみ。ランゲージをフランス語に設定した場合，フォームウィザードが自動的に作成するフォームのオブジェクトメソッドは，コンパイルを実行するとエラーになりました。

* ACI0094172 Mac版のみ。ビルドされたクライアントアプリケーションはInternet Commandsが使用できませんでした。

* ACI0094077 Windows版のみ。64ビットのプラグインエリアには，``eAE_Update``イベントが渡されませんでした。

* ACI0094176 文字列にヌル文字（``U+0000``）が含まれる場合，[Replace string](http://livedoc.4d.com/--15.1/-/Replace-string.301-2685397.ja.html)でアプリケーションがハングしました。

* ACI0094000 Mac版のみ。ネイティブWebエリアでは，セミコロンで終わるJavaScriptが実行できませんでした。

* ACI0086716 [DOMコマンド](http://doc.4d.com/4Dv14/4D/14.4/Overview-of-XML-DOM-Commands.300-2512139.ja.html)は，無効な参照が渡された場合など，システム変数```OK```に```0```が代入され，空の参照（32ビット版であれば```0000000000000000```）が返されるはずですが，```12DDB60000000000```のような中途半端で使用できない参照が返されることもありました。もっとも，システム変数```OK```には```0```が代入されます。

* ACI0093545 Windows版のみ。[HTTP Get](http://doc.4d.com/4Dv15R2/4D/15-R2/HTTP-Get.301-2543928.ja.html)に（``http:``，``ftp:``などではない）無効なプロトコルが渡された場合，プリケーションがクラッシュしました。``image:``のようなカスタムプロトコルは，APIとして公開されていることがあります。DNSクエリでクラッシュするのは間違いです。

* ACI0093970 日本語のトークン（変数名など）が含まれるメソッドをコンパイルしてエラーが検出された場合，メッセージが文字化けしました。

![syntaxerror_v14_ok](https://cloud.githubusercontent.com/assets/10509075/11988652/942bdcaa-aa36-11e5-8aa6-cb0a518b3a1c.png)

![syntaxerror_v15_bug](https://cloud.githubusercontent.com/assets/10509075/11988653/97a5ad7a-aa36-11e5-90e5-3151d3fcb9c3.png)

* ACI0094215 Windows版のみ。4D Viewあるいは4D Writeエリアにドイツ語配列のキーボードでControl+Alt+(2,3,Q,E)キーで² / ³ / @ / ?といった記号を入力することができませんでした。ビルド190461以降の問題です。

* ACI0094182 レコードとインデックスを圧縮した後に一部のインデックスが破損することがありました（『タグヘッダーが無効です』）。

* ACI0094255 Mac/64ビット版のみ。レコードとインデックスを圧縮した後に一部のクラスターインデックスが破損することがありました（キーが重複するレコード番号を参照しています/一部のレコード参照が存在しません。）。

* ACI0094236 Mac版のみ。キーワードインデックスが設定されたテーブルでインデックス構築中にアプリケーションがクラッシュすることがありました。『[テキストのクエリや並び替えでタグを使用しない](http://doc.4d.com/4Dv15R2/4D/15-R2/Field-properties.300-2634639.ja.html)』プロパティが使用されている場合，スタイル付きテキストの``span``タグが取り除かれますが，HTMLページからペーストされたテキストのように，有効なXML構造ではない（たとえば閉じるタグがない``<br>``が含まれるHTML）データのインデックス作成で問題が発生しました。``<br />``のようにタグが整形されていれば問題ありません。

**注記**: スタイル付きテキストに閉じるタグが省略されたHTMLが保存されることがないように注意してください。修正により，クラッシュは回避されるようになりましたが，XMLとして解析できないようなデータは標準テキストとして評価されることになります。

* ACI0093284 [GET TEXT KEYWORDS](http://doc.4d.com/4Dv15R2/4D/15-R2/GET-TEXT-KEYWORDS.301-2543352.ja.html)にメモリーリークがありました。*オプションを使用しなければ問題ありません。

```
C_TEXT($txt_t)
ARRAY TEXT($motcle_at;0)

$txt_t:="a b c d e f g h i j k l m n o p q r s t u v w x y z"

Repeat 
GET TEXT KEYWORDS($txt_t;$motcle_at;*)
Until (Shift down)
```

* ACI0094035 Windows版のみ。ビルド191432以降，複数のプロセスを起動し，それぞれでウインドウを表示して一方のフォームにあるボタンをクリックした場合，最前面に移動するはずのウインドウが背面に戻り，かつ，背面に移動するはずのウインドウが部分的にアクティブであるかのように描画されました。ACI0092047でWebエリアのフォーカスに関する問題が修正されたことの副作用でした。``On Timer``イベントで[GOTO OBJECT](http://doc.4d.com/4Dv15R2/4D/15-R2/GOTO-OBJECT.301-2544236.ja.html)で使用した場合に問題がありました。

* ACI0094102 配列型のリストボックスで非表示列の配列を操作して特定の行を隠した場合，すぐに変更が反映されませんでした。リストボックスをクリックしてはじめて非表示行が消えました。

* ACI0094147 4D Serverの管理画面には，Windows 10と表示されるべきプラットフォーム名がWindow 8と表示されました。

**注記**: Windows 8.1が認識されない問題はACI0093592，[PLATFORM PROPERTIES](http://doc.4d.com/4Dv15R2/4D/15-R2/PLATFORM-PROPERTIES.301-2544208.ja.html)でWindows 10が認識されない問題はACI0094184で修正されました。

* ACI0094157 SQLを``INTO LISTBOX``でリストボックスに転送すると，オブジェクトの背景色がブラックになりました。ACI0082692が修正されたことの副作用でした。

