4D v15.2
---

[4D v15.1 Hotfix 2](https://github.com/4D-JP/release-notes/blob/master/v15/15.1/hf2/README.md)および[Hotfix 1](https://github.com/4D-JP/release-notes/blob/master/v15/15.1/hf1/README.md)の修正事項は，それぞれのページに掲載されています。

* ACI0094644 クイックレポートエディターにフォーミュラーを入力しようとすると，キーストロークが二重に処理されました。たとえば，``substring``とタイプ入力した場合，``ssuubbssttrriinngg``というフォーミュラーになりました。通常のフォーミュラーエディターでは問題ありません。15.1には存在しなかった不具合です。

* ACI0093985 サーバー選択ダイアログには，日本語のコンピューター名が``?``という文字で表示されました。新しいネットワークレイヤー特有の問題です。

* ACI0094548 Windows版のみ。``AP FULL SCREEN``または``AP NORMAL SCREEN``どちらかのコマンドを繰り返し使用していると，アプリケーションがクラッシュしました。不具合はプラグイン側で修正されています。確認するために4Dのバージョンを入れ替える必要はありません。

* ACI0094196 Windows版のみ。``Pop up form window``および`` Toolbar form window``タイプのウインドウ上では，``On Mouse Move``イベントが発生しませんでした。 ACI0094688と同じ問題です。

* ACI0094734 Mac版のクライアントで，ようこそ画面を閉じることによってデザインモードに切り替えた後，終了メニューを選択すると，クライアントがフリーズしました。

* ACI0093455 Mac版の4D Viewの[PV SET CELL PROPERTY](http://doc.4d.com/4Dv15/4D-View/15/PV-SET-CELL-PROPERTY.301-2061444.ja.html)コマンドに``pv style color text odd``を指定した場合，実際には``pv style automatic word wrap``が変化しました。16進数で表現したRGB値の赤と緑が入れ替わっているような振る舞いでした。

* ACI0093887 Mac版の4D Viewに追加したテキストの色が正しくありませんでした。

* ACI0094208 クリックレポートエディターのカラムヘッダーをトリプルクリックすると，起動したフォーミュラーエディターがクリックレポートエディターの背後に移動してしまい，画面を閉じることができなくなりました。

* ACI0094557 OS X El Capitanのみ。フルスクリーンモードでウインドウが表示されているときに``Escape``キーを入力すると，アプリケーションがクラッシュしました。

* ACI0094501 Windows版のみ。階層リストボックスに入力できる通常の列とチェックボックス型の列が表示されているときに，``Tab``キーでチェックボックス型の列にフォーカスを移動すると，アプリケーションがクラッシュしました。

* ACI0094491 [SMTP_SetPrefs](http://doc.4d.com/4Dv15/4D-Internet-Commands/15/SMTP-SetPrefs.301-2397898.ja.html)でエンコーディングを設定した後，[SMTP_Charset](http://doc.4d.com/4Dv15/4D-Internet-Commands/15/SMTP-Charset.301-2397916.ja.html)でメールの件名だけにエンコーディングが適用されるように指定 (``$Error:=SMTP_Charset (1;0)``) した場合，メールの本文にもエンコーディングが適用されました。

* ACI0094456 表示されていないウインドウ上のWebエリアでは，``On End URL Loading``, ``On URL Filtering``など，Webエリア特有のフォームイベントが発生しませんでした。

* ACI0094370 [LISTBOX GET CELL COORDINATES](http://doc.4d.com/4Dv15/4D/15/LISTBOX-GET-CELL-COORDINATES.301-2045072.ja.html)から返される座標が正確ではありませんでした。

* ACI0094269 サブフォームの``On Data Change``イベント中に新規レコードを作成すると，もう一度``On Data Change``イベントが発生しました。スペルチェックの不具合 (ACI0084849) が修正されたことの副作用でした。

* ACI0094187 ドキュメントの指示に従い，スペルチェック辞書をインストールしても，登録された単語が認識されませんでした。

**注記**: スペルチェック辞書のカスタマイズは，ユーザー辞書を補完するものであり，置き換えるものではありません。たとえば，10万語を超える単語数が登録されたカスタム辞書をインストールすると，アプリケーションの起動が明らかに遅くなります。

* ACI0092584 Mac OSX 10.7.5のみ。ビルドしたクライアントアプリケーションが特定のマシンでは起動できませんでした。

* ACI0094602 [WR PICTURE TO AREA](http://doc.4d.com/4Dv15/4D-Write/15/WR-PICTURE-TO-AREA.301-2398605.ja.html)を使用すると，アプリケーションがクラッシュすることがありました。

* ACI0094546 Mac版のみ。長大なテキストを含むフィールドがレコードに存在する場合，フォームの表示と終了にとても時間がかかりました。たとえば，``"large text"*1024*48``のようなテキストでは，フォームを開くのに1分かかりました。

* ACI0094520 Mac版のみ。テキスト入力エリアにフォーカスが置かれている状態でポップアップウインドウを表示した場合，そのポップアップウインドウにもテキスト入力が表示されていると，フォームを閉じた後に復帰したフォームのフォーカスが置かれたエリアにはカーソルが表示されず，テキストの選択された範囲はグレーアウトされていました。

**注記**: 通常のウインドウとは違い，表示されたポップアップウインドウはフォーカスを取りません。例外的に，そのフォームの先頭オブジェクトがテキスト入力である場合にのみ，ウインドウにフォーカスが移ります。

* ACI0094198 新規クライアントプロセスで[TRACE](http://doc.4d.com/4Dv15/4D/15.1/TRACE.301-2684990.ja.html)コマンドを実行し，デバッガを表示すると，サーバーの管理ウインドウには『4D Clientプロセス』および『4D Clientデータベースプロセス』が表示されますが，少し待っていると『4D Clientデータベースプロセス』が消えます。この状態でデバッガの『続ける』ボタンをクリックしてトレースモードを抜けると，サーバーの管理ウインドウには『4D Clientプロセス』がずっと表示されたまま（I/O待機中）になりました。旧ネットワークレイヤーでは問題ありません。

**注記**: v13以降，新規作成したプロセスは，プロセス名に関係なく，デフォルトでローカルプロセスです。データベースにアクセスするようなコード〜例: ``SET DATABASE PARAMETER([test];Table sequence number;0)``〜を実行した瞬間，サーバー側に対となるプロセスが作成され，グローバルプロセスに『昇格』します。

* ACI0094605 Internet Commandsで送信した電子メールの添付ファイル名に問題がありました。エンコーディング名が``x-user-defined``として出力されるために，一部のメールクライアントでファイル名が正しく表示されませんでした。また，Internet Commandsでもこれを取り出すことができませんでした。

* ACI0094131 名前のないリストをツールボックスで作成することができました。本来であれば，エラーが返されるべきです。

* ACI0094553 ``On Web Authentication``データベースメソッド内で[WEB GET HTTP HEADER](http://doc.4d.com/4Dv15/4D/15.1/WEB-GET-HTTP-HEADER.301-2685169.ja.html)を使用すると，空の配列が返されました。``$2``には，ヘッダーが正しく代入されています。

* ACI0094239 Mac 64ビット版のみ。``QUIT 4D(0)``を実行した場合，タイマアウトを0秒に設定するとエラーが表示されました。引数を省略した場合，あるいは``1``を指定した場合には問題ありません。

**注記**: 以前のバージョンでは，タイムアウトの単位が『分』であると記述されていました。そのため，敢えてタイムアウト時間を``0``に設定することは珍しくありませんでした。現行バージョンの[QUIT 4D](http://doc.4d.com/4Dv15/4D/15.1/QUIT-4D.301-2686304.ja.html)は，秒単位でタイムアウト時間を設定することができます。

* ACI0093022 Mac版のみ。ラジオボタンの表示が鮮明ではありませんでした。

* ACI0092932 階層リストボックスを右いっぱいに水平スクロールした後，[OBJECT SET SCROLL POSITION](http://doc.4d.com/4Dv15/4D/15.1/OBJECT-SET-SCROLL-POSITION.301-2685673.ja.html)で特定の行までスクロールさせると，垂直スクロールの位置が正しくありませんでした。階層リストボックスでなければ，問題ありません。

* ACI0094733 Mac OS X El Capitanのみ。4Dを起動すると，フォントだけに1GBのメモリが取られ，アプリケーションのために限られた量のメモリしか残されませんでした。

* ACI0094697 Windows 64ビット版のみ。[WA EXECUTE JAVASCRIPT FUNCTION](http://doc.4d.com/4Dv15/4D/15.1/WA-EXECUTE-JAVASCRIPT-FUNCTION.301-2685016.ja.html)は，ブール型および整数型の値を返しませんでした。統合WebKitであれば問題ありません。

**注記**: [ドキュメント](http://doc.4d.com/4Dv15R3/4D/15-R3/WA-EXECUTE-JAVASCRIPT-FUNCTION.301-2696078.ja.html)に明記されているように『複雑な型』の結果を返すことができるのは，統合WebKitだけです。複雑な型には，日付やオブジェクトが含まれます。数値・ブール・テキストは『シンプルなデータ型』です。

* ACI0094620 [METHOD SET CODE](http://doc.4d.com/4Dv15/4D/15.1/METHOD-SET-CODE.301-2685964.ja.html)で作成したSOAP公開メソッドは，Webサービスでコールすることができませんでした。手作業でメソッドを編集すれば，コールできるようになります。

* ACI0093708 スタイル付きテキストに表示フォーマットを設定すると，テキストのソースコードが整形されて表示されました。

* ACI0091831 『起動時にWebサーバーを開始』設定が有効にされたデータベースに対し，``http://127.0.0.1:3080/4DSTATS``のようなURLをリクエストした後，Webサーバーを再起動すると『データベースを公開できません』というエラーが返されました。

* ACI0094575 フォームエディター上で矢印キーを使用し，オブジェクトを移動した直後は，取り消し操作（Command+Z）ができませんでした。一度，Command+Zを入力した後，取り消しができるようになります。

* ACI0094459 Mac版のみ。``Escape``がキーボードショートカットに設定されたボタンがキー入力に反応しませんでした。

* ACI0093029 フォーム作成ウイザードのテーブル名のポップアップメニューに『{tableName}データテーブルに問題があります』というテキストが表示されました。『プロジェクトフォーム』と表示されているべきです。

* ACI0094556 [SET DATABASE PARAMETER](http://doc.4d.com/4Dv15/4D/15.1/SET-DATABASE-PARAMETER.301-2686308.ja.html)で``Log command list``を指定し，特定のコマンドだけデバッグログに記録させようとすると，第5列以降の情報がずれていました。

```
SET DATABASE PARAMETER(Log command list;"322") 
SET DATABASE PARAMETER(34;2+4) 
BEEP
SET DATABASE PARAMETER(34;0)
```
* ACI0093501 4D Viewの自動計算モードが常に有効でした。
