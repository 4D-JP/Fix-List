4D v15 R4
---
* ACI0094401  クロスタブ型クイックレポート内の時間フィールドは，[Sum](http://doc.4d.com/4Dv15/4D/15.1/Sum.301-2686264.ja.html)の計算値が正しくありませんでした。小計値は秒単位，合計値は時間単位で値が表示されました。

* ACI0094739 Windows版のみ。終了処理中にメニューバークリックするとアプリケーションがクラッシュしました。

* ACI0094935 ビルド195739以降，デザイナー（Designer）のパスワードをリセットすることができませんでした。空の文字列を入力すると，エラーが返されます。ACI0093236が修正されたことの副作用でした。

* ACI0094903 インデックスの設定されたオブジェクト型フィールドが含まれるデータファイルを圧縮すると，データファイルが無効になりました。

* ACI0094913 インデックスの設定されたオブジェクト型フィールドが含まれるデータベースのインデックスを再構築した後，[QUERY BY ATTRIBUTE](http://doc.4d.com/4Dv15/4D/15.1/QUERY-BY-ATTRIBUTE.301-2685587.ja.html)コマンドを実行すると，返されるはずのレコードが返されませんでした。

* ACI0094809 階層リストボックスに非表示行の配列が使用した場合，非表示になるべき行がそうなりませんでした。ビルド``193710``以降の問題です。

* ACI0094842 ビルド198282以降，階層リストボックスのセルに文字をタイプ入力すると，編集モードが終了しました。

* ACI0094879 ビルド198434以降，階層リストボックスのたたまれた行をクリックすると，収縮されていた行が展開されました。

* ACI0094851 何らかの理由で不正な``multipart/form-data``タイプのデータがWebサーバーに対して送信された場合，アプリケーションがクラッシュするまで無限ループに陥りました。

* ACI0094812 Mac版のみ。OS X 10.11 El Capitanで使用した場合，4D Writeおよび4D Viewプラグインが理由でアプリケーションがクラッシュしました。

* ACI0094028 Mac版のみ。おおきな外部モニターをメイン画面として使用した場合，内部モニター（サブ画面）でクリックしたポップアップメニューの表示される位置が正しくありませんでした。 

* ACI0094773 Mac版のみ。Retinaディスプレイに表示された4D Writeエリアに対して何かをドロップすると，画面の表示が乱れました。

* ACI0094825 印刷中，リストボックスに対して[OBJECT GET BEST SIZE](http://doc.4d.com/4Dv15/4D/15.1/OBJECT-GET-BEST-SIZE.301-2685666.ja.html)を使用すると，最適高さに正しい値が返されませんでした。ACI0094776修正後の問題です。

* ACI0094778 Windows版のみ。アプリケーションビルドを何度も実行していると，フォルダー名を変更できないという趣旨のエラーメッセージが表示され，処理が中断されました。アップデートツールのマニフェストがインストールできない，というエラーが返されることもあります。

* ACI0094575 フォームエディター上で矢印キーを使用し，オブジェクトを移動した直後は，取り消し操作（Command+Z）ができませんでした。一度，Command+Zを入力した後，取り消しができるようになります。

* ACI0094001 リストボックスのヘッダーに『移動』以外のスタイルシートが設定されている場合，[OBJECT SET FONT](http://doc.4d.com/4Dv15/4D/15.1/OBJECT-SET-FONT.301-2685674.ja.html)または[OBJECT SET FONT SIZE ](http://doc.4d.com/4Dv15/4D/15.1/OBJECT-SET-FONT-SIZE.301-2685680.ja.html)でフォントを変更することができませんでした。また，ヘッダーの高さも連動して変化しませんでした。

* ACI0094131 名前のないリストをツールボックスで作成することができました。本来であれば，エラーが返されるべきです。

* ACI0094602 特定の状況で[WR PICTURE TO AREA](http://doc.4d.com/4Dv14/4D-Write/14/WR-PICTURE-TO-AREA.301-1373485.ja.html)を使用すると，アプリケーションがクラッシュしました。4D Write文書にピクチャー式を返すフォーミュラが挿入されており，そのピクチャーの表示フォーマットが『サイズ固定』だった場合，数回の1度の割合が問題が発生しました。ACI0091544の修正による副作用でした。

* ACI0094620 [METHOD SET CODE](http://doc.4d.com/4Dv15/4D/15.1/METHOD-SET-CODE.301-2685964.ja.html)で作成したSOAP公開メソッドは，Webサービスでコールすることができませんでした。手作業でメソッドを編集すれば，コールできるようになります。

* ACI0068985 メソッドエディターのオートコンプリート機能は，候補が多数（たとえば3万件以上）存在する場合，動作がとても遅くなりました。

* ACI0080477 表示フォーマットが時間型に設定されている配列リストボックスの数値配列を複製した場合，表示フォーマットがコピーされず，普通の数値列になりました。関連付けられているのが時間配列であれば問題ありません。

* ACI0085311 Mac版のみ。[PLAY](http://doc.4d.com/4Dv15R2/4D/15-R2/PLAY.301-2543166.ja.html)の非同期モードで開始したサウンドファイルの再生を下記のコマンドで停止することができませんでした。

```
PLAY("";0)
```

* ACI0089945 Windows版のみ。フィールドの名前が8文字以下の場合，アラビア文字の値が表示されませんでした。v13では問題ありません。

* ACI0090056 データベースフォルダーに対する相対パスでデフォルトHTMLルートフォルダーが設定されている場合，ビルドされたアプリケーションで，フォルダーパスが正しく表示されませんでした。たとえば，

```
.\DataBaseName\Database\Database\WebFolder
```

のようなパスは，設定画面に

```
.\DataBaseName\Database\WebFolder
```

と表示されました。

* ACI0090701 一部のアプリケーションは，コンパイルやシンタックスチェックの実行でクラッシュすることがありました。原因は，間違ったコード（下記）にありました。修正により，『変数 ? は配列ではありません』というエラーが返されるようになりました。

```
$a:=0
$b:=0
$b:=Method2 {$a}
```

* ACI0094129 [LISTBOX Get information](http://doc.4d.com/4Dv15R2/4D/15-R2/LISTBOX-Get-information.301-2544059.ja.html)は，[メモリにロードされたフォーム](http://doc.4d.com/4Dv15R2/4D/15-R2/FORM-LOAD.301-2543830.ja.html)ヘッダー/フッターの表示/非表示情報を正確に返しませんでした。

* ACI0094135 Windows版のみ。``textArea``内に``tspan``が含まれるSVGを印刷した場合，フォントサイズが10倍になりました。

```xml
<textArea height="20" width="200" x="10" y="10">Hello <tspan font-size="12">world!</tspan></textArea>
```

* ACI0094147 4D Serverの管理画面には，Windows 10と表示されるべきプラットフォーム名がWindow 8と表示されました。

**注記**: Windows 8.1が認識されない問題はACI0093592，[PLATFORM PROPERTIES](http://doc.4d.com/4Dv15R2/4D/15-R2/PLATFORM-PROPERTIES.301-2544208.ja.html)でWindows 10が認識されない問題はACI0094184で修正されました。

* ACI0094185 SQLでテーブルの名前をエイリアスとして使用することができませんでした。

```sql
SELECT * FROM aaa AS aaa;

```

* ACI0094209 データベースにパスワードを設定し，クライアント/サーバーアプリケーションをビルドした場合，ログイン画面に表示されるはずの『パスワードを保存』オプションがありませんでした。

* ACI0094212 [IMPORT TEXT](http://doc.4d.com/4Dv15R2/4D/15-R2/IMPORT-TEXT.301-2543783.ja.html)で読み込んだテキストデータが改行コード（10または13）以外で終わっている場合，データの末尾にヌル文字``0x0000``が追加されることがありました。

* ACI0094215 Windows版のみ。4D Viewあるいは4D Writeエリアにドイツ語配列のキーボードでControl+Alt+(2,3,Q,E)キーで² / ³ / @ / ?といった記号を入力することができませんでした。ビルド190461以降の問題です。

* ACI0094264 [OBJECT SET SUBFORM](http://doc.4d.com/4Dv15R2/4D/15-R2/OBJECT-SET-SUBFORM.301-2543636.ja.html)でサブフォームを切り替えた場合，直後にフォームが再描画されませんでした。[SET TIMER](http://doc.4d.com/4Dv15R2/4D/15-R2/SET-TIMER.301-2543851.ja.html)で強制的にフォームイベントを発生させれば問題ありませんでした。その場合，タイマーイベントで何がを実行する必要はありません。

* ACI0094333 Windows版のみ。Microsoft Word 2016でコピーしたテキストを4Dにペーストまたはドロップすると，最後にU+0000/U+000Aが挿入されました。Microsoft Word 2013以前であれば問題ありません。

* ACI0094374 ユーザー認証ダイアログでデザイナーのパスワード変更を試み，古いパスワードだけを入力して新しいパスワードを入力しなかった場合，エラー``-10511``（コマンド""をコンポーネントから呼び出すことはできません）が表示されました。

* ACI0094399 フォームの表示と同時にリストボックスのカラムをプログラムで並び替えることができませんでした。フォームが表示された後，クリックイベント等であれば，問題ありません。

**注記**: 回避策として``On Timer``を使用することができます。

```
Case of 
: (Form event=On Load)

  $vpLb:=OBJECT Get pointer(Object named;"tbLb")
  $vpCol1:=OBJECT Get pointer(Object named;"ttCol1")
  $vpCol2:=OBJECT Get pointer(Object named;"ttCol2")
  ARRAY BOOLEAN($vpLb->;0)
  ARRAY TEXT($vpCol1->;0)
  ARRAY TEXT($vpCol2->;0)
  APPEND TO ARRAY($vpLb->;False)
  APPEND TO ARRAY($vpCol1->;"A")
  APPEND TO ARRAY($vpCol2->;"2")
  APPEND TO ARRAY($vpLb->;False)
  APPEND TO ARRAY($vpCol1->;"B")
  APPEND TO ARRAY($vpCol2->;"1")
  APPEND TO ARRAY($vpLb->;False)
  APPEND TO ARRAY($vpCol1->;"C")
  APPEND TO ARRAY($vpCol2->;"3")

  SET TIMER(-1)

: (Form event=On timer)

  SET TIMER(0)
  カスタムソートメソッド ("tbLb";0)

End case 
```

* ACI0094431 15.1以降，Internet Commandsで添付ファイル名にドイツ語アクセント記号が含まれるメールが送信できませんでした。

* ACI0091544 Windows版のみ。サーバー側で[WR PICTURE TO AREA](http://doc.4d.com/4Dv15/4D-Write/15/WR-PICTURE-TO-AREA.301-2398605.ja.html)が使用できませんでした。

* ACI0092129 Mac版のみ。[SET PRINT PREVIEW](http://doc.4d.com/4Dv15R2/4D/15-R2/SET-PRINT-PREVIEW.301-2543565.ja.html)でプレビューが有効にされた場合，印刷ダイアログで『PDFとして保存』『PDFでメールを送信』などのオプションを選択するとアプリケーションがクラッシュしました。

* ACI0093095 [SearchPickerウィジェット](http://doc.4d.com/4Dv15R2/4D/15-R2/SearchPicker.201-2714814.ja.html)に文字を入力するたびに``On Data Change``イベントが2回，発生しました。同イベントでクエリを実行するようなアプリケーションでは，データベースに余計な負荷がかかりました。

* ACI0093236 ツールボックスでパスワードを編集した場合，第1フィールドに新しいパスワードを入力し，第2フィールドに空または別の文字列を入力した場合，エラーが表示されますが，OKボタンを2回クリックしてダイアログを閉じれば，パスワードを更新することができました。確認用の第2フィールドに意味がありませんでした。

* ACI0093284 [GET TEXT KEYWORDS](http://doc.4d.com/4Dv15R2/4D/15-R2/GET-TEXT-KEYWORDS.301-2543352.ja.html)にメモリーリークがありました。*オプションを使用しなければ問題ありません。

```
C_TEXT($txt_t)
ARRAY TEXT($motcle_at;0)

$txt_t:="a b c d e f g h i j k l m n o p q r s t u v w x y z"

Repeat 
GET TEXT KEYWORDS($txt_t;$motcle_at;*)
Until (Shift down)
```

* ACI0093505 日本語入力がオンにされている場合，フォーカスされたチェックボックスの状態をスペースバーでトグルすることができませんでした。ラジオボタンであれば，問題ありません。

* ACI0093534 メニューバーが関連づけられていないフォームを閉じた後，最前面になったウインドウのダイナミックメニューバーが再描画されませんでした。たとえば，プログラスバーコンポーネントを閉じた後に問題がありました。64ビット版では問題ありません。

* ACI0093545 Windows版のみ。[HTTP Get](http://doc.4d.com/4Dv15R2/4D/15-R2/HTTP-Get.301-2543928.ja.html)に（``http:``，``ftp:``などではない）無効なプロトコルが渡された場合，プリケーションがクラッシュしました。``image:``のようなカスタムプロトコルは，APIとして公開されていることがあります。DNSクエリでクラッシュするのは間違いです。

* ACI0093919 [DatePickerウィジェット](http://doc.4d.com/4Dv15R2/4D/15-R2/DatePicker-and-DateEntry.300-2714815.ja.html)とテキストフィールドが同一のフォームに表示されていた場合，上下矢印キーの入力でテキストエリア内でカーソルが移動する代わりに日付が変わりました。

* ACI0094002 [SVG SET ATTRIBUTE](http://doc.4d.com/4Dv15R2/4D/15-R2/SVG-SET-ATTRIBUTE.301-2542980.ja.html)にアスタリスクオプションを添えてピクチャフィールドの属性を書き換えた場合，ピクチャを更新したことにはならず，フィールドを保存したり，[PICTURE TO BLOB](http://doc.4d.com/4Dv15R2/4D/15-R2/PICTURE-TO-BLOB.301-2544177.ja.html)で変換しても，古い画像のままでした。

* ACI0094039 Windevによる4D ODBC Driverを介したデータ取得ができませんでした。Windev製品特有のSQLリクエストを処理するために，DSNの新しいオプション『Windev』が追加されました。

* ACI0094061 テキスト入力オブジェクトのタイプを変数からフィールドに変更するたびに，オブジェクトの高さが1ずつ増えてゆきました。結果的に，自動スタイルシートもはずされてしまいました。
