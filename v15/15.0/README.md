4D v15.0
---

4D - 4D Server
---

* ACI0072111 ビルドされたクライアントサーバーアプリケーションのポート番号を19813以外に設定した場合，クライアントはサーバーを発見することができずに，標準の「サーバーに接続」画面が表示されました。修正により，ポート番号はビルド設定ファイルの```PortNumber```で指定できるようになりました。その場合，ポート番号はデータベース設定の値を一致しているべきです。あるいは，アプリケーションビルドを実行する直前にデータベース設定でポート番号を変更することもできます。その場合，ビルド設定ファイルの```IPaddress```は設定する必要がありません。***起動したクライアントは，指定されたポート番号でブロードキャストされているサーバーを探して自動的に接続します***。```IPaddress```は，4D Serverのアドレスを限定したい場合にのみ，使用してください。

* ACI0079626 リストボックスまたはその列に対して```OBJECT GET BEST SIZE```を使用した場合，期待されあるような値が返されませんでした。修正により，下記のように動作が見直されました。

**最適高さ**: リストボックス/列ともに行高さの最適値が返されます。

**最適幅**: 列に対しては列幅の最適値が返され，リストボックスに対しては各列の最適列幅の合計値が返されます。

* ACI0080677 Mac版のみ，コードエディターにいくらかの日本語を入力した後，それ以上は戻れなくなるところまで『取り消し』（command+Z）した後に『やり直し』（command+shift+Z）した場合，元のテキストが複製されました。 

* ACI0080790 Windows版のみ，ペイント（mspaint.exe）から画像をピクチャエリアにコピー＆ペーストした場合，イメージが縮小されました。

* ACI0082461 エクスプローラーに表示されるテーブルの並び順とメソッドエディターのタイプアヘッド候補ウィンドウに表示されるテーブルの並び順に一貫性がありませんでした。

* ACI0085624 ジャーナルの統合中にエラー#1277が発生した場合，メッセージにひとつ前のオペレーション番号が表示されました。

* ACI0086721 ```On Before Keystroke```のようなイベントでフォームイブジェクトの変数値がランゲージによって変更した場合，オブジェクトから離れるときには```On Data Change```が発生するべきですが，v14以降，そのようなケース（つまり```FILTER KEYSTROKE("")```）では```On Data Change```イベントが発生しなくなりました。

* ACI0086913 クイックレポートの計算カラムに表示フォーマットを適用することができませんでした。

* ACI0087191 ```OB Get```コマンドの第3引数に対して表示されるコード補完の定数リストが正しくありませんでした。12個中の7個だけがリストアップされ，一部の候補は重複して表示されました。

* ACI0087248 メソッドエディター上でApple Magic Mouseやタッチパッドなどの入力デバイスで水平または垂直スクロールを試みた場合，あまりにも感度が良いために目的に位置に移動することが困難でした。

* ACI0087312 ARRAY OBJECTがマルチソートで並び替えられませんでした。

* ACI0087679 リストボックスに非表示の列が含まれている場合，その列よりも右側の列をドラッグしたときに表示される列の挿入ポイントが間違っていました。

* ACI0087977 リストボックスがページ2以降に配置されていた場合，```LISTBOX INSERT ROW```で間違った位置に行が挿入されました。

* ACI0088113 ```SVG_SET_HUE```でカラーを指定したピクチャは，期待されるような色合いでエクスポートされませんでした。SVGフィルターがDirect2Dモードでサポートされていなかったためです。

* ACI0088208 空のピクチャを```SVG_New_embedded_image```でSVGに挿入した場合，image要素が追加されませんでした。 

* ACI0088210 クイックレポートの水平スクローバーは，ウィンドウを少しリサイズするまで効きませんでした。

* ACI0088262 ```SET EXTERNAL DATA PATH```により，カスタマイズされた外部データ保存パスが設定されているピクチャーフィールドは，その外部ファイルがみつからない場合，レコード保存時に『ExternalData:Table-1 Field-1』といった無効なパスが記録されました。BLOBやテキストでは問題ありません。

* ACI0088489 4D Serverで新規データベースを作成した場合，エクスプローラーのデフォルトフォルダーには "_1", "_2", "_3" といった名前のフォルダーが作成されました。

* ACI0088541 Mac版のみ，コンボボックスのフォーカス（ハイライト）が従来のバージョンよりもずっと細く表示されました。コンボボックスの高さが24ポイントを越えれば，以前と同じ表示になりました。今回，下記の点も修正されました。

* 10.9/10.10でボックスの下側が1~2ピクセル欠ける問題

* ミニ（もっとも小さい）バリエーションがオブジェクトのサイズいっぱいに描画されない問題

* 10.10で特定の条件が揃うと罫線が消える問題

* ACI0088831 日付およびBLOBフィールドが存在するテーブル（日付のほうが若いフィールド番号）に対してSQLの```SELECT```を実行すると，クラッシュすることがありました。

```
C_DATE($date_var)
$date_var:=!0000/00/00!
Begin SQL
 SELECT * FROM Table_1 WHERE Field_1 = :$date_var INTO :List_Box
End SQL
```

* ACI0088843 空白文字を保持するためのオプション（下記参照）は，[SVG_New_text](http://doc.4d.com/4Dv15/4D/15/SVG-New-text.301-2048815.ja.html)には適用されましたが，[SVG_SET_TEXTAREA_TEXT](http://doc.4d.com/4Dv15/4D/15/SVG-SET-TEXTAREA-TEXT.301-2048801.ja.html)では無視されました。

```
$Options:=SVG_Get_options 
$Options:=$Options ?+ 13 
SVG_SET_OPTIONS ($Options)
```

* ACI0088904 30日の試用ライセンスを登録し，ようこそ画面で《新規アプリケーションを作成》しようとすると，《有効なライセンスが必要です》というメッセージが表示されました。

* ACI0089018 DBFファイルをインポートした場合，Mac版ではアクセント記号が失われ，Windows版ではクラッシュしました。

* ACI0089032 2個以上のプロセス変数が存在する場合，メソッドエディターのタイプアヘッド候補ウィンドウにそれらの変数名だけが表示され，マクロ・コマンド・定数などが表示されませんでした。

* ACI0089072 ストラクチャエディターで日本語のテーブル名またはフィールド名を編集した場合，ひらがなをカタカナに，あるいは全角を半角に変更しただけであれば，値が更新されませんでした。

* ACI0089113 コンパイルアプリケーション（.4DC）をビルドした場合，初回の起動時にストラクチャファイルに隣接した同名のデータファイル（.4DD）およびジャーナルファイル（.journal）が自動的に選択されませんでした。

* ACI0089130 MS SQL ServerのリンクサーバーからODBC経由で4Dのテキストフィールドに ```DATALENGTH```でアクセスした場合，テキストの文字数が8000を超えているとエラーが返されました。

* ACI0089145 『最近使用したデータベース』メニューをクリアした後，4Dを終了し，起動後，4Dサーバーに接続した場合，接続したリモートデータベースの名前が『ローカルデータベース』のリストに表示されました。

* ACI0089183 ```Tab```キーでポップアップメニューに移動し，矢印キーで値を変更した場合，矢印キーを入力する度に```On Data Change```イベントが発生する一方，```On Clicked```は発生しませんでした。

* ACI0089187 SVG_Get_named_color_valueは，第2引数にr,g,bのいずれかが渡された場合，期待される値を返しませんでした。

* ACI0089325 大量（60個以上）のフィールドが配置されたサブフォームは，素早くスクロールできませんでした。修正により，マウスホイールおよびスクロールボタンの動作はかなり改善されました。スクロールバーの操作は若干の遅れがあるかもしれません。

* ACI0089335 PK Wizard not loading in C/S mode クライアント側のストラクチャエディターで『プライマリーキー管理』ボタンをクリックすると，SQLエラーが返されました。

* ACI0089568 Mac版のみ，v13のフォームエディターでオブジェクトのフォント名プロパティを"W6"で終わるフォントに設定してからアプリケーションをv14以降にアップグレードした場合，フォントファミリー名だけが継承され，文字幅の属性が引き継げられませんでした。

* ACI0089658 ツールボックスの《グループ》ページでグループ名の大文字を小文字に変更した場合，シンタックスエラーが表示されたり，別グループの名前が変更されたり，そのグループの名前が変更できなくなるといった問題が発生しました。

* ACI0089704 ページ2以降に配置されたWebエリアは，ページに内容によっては，うまく動作しませんでした。Windows版では，コードが正しく実行されず，Mac版ではアプリケーションがクラッシュしました。

* ACI0089728 リストボックスのセルを編集中にマウスのホイールボタンを操作すると，アプリケーションがクラッシュすることがありました。

* ACI0089782 OS X Yosemiteでは，デフォルトボタンのフォントカラーがホワイトであるべきですが，4Dはブラックで表示されました。

* ACI0089820 クイックレポートの列をクリックし，整列をデフォルト以外に設定した場合，タイトルには適用されますが，行の整列はデフォルトのままでした。

* ACI0089988 Mac版のみ，フォームエディターで自動スタイルシートを選択した場合，日本語環境では《システムフォント レギュラー》が適用されるはずですが，プロパティリストでフォント名をクリックすると《Helvetica》が選択されました。

* ACI0090102 並び替え画面の《削除》ボタンをクリックしても，リストからフィールドを取り除くことができませんでした。

* ACI0090157 命名セレクションタイプのリストボックスをダブルクリックした場合，行の位置に関係なく，詳細フォームに表示されるのはいつも先頭レコードでした。

* ACI0090165 ツールボックスでメニューの項目名を変更せずに並び順だけを変更した場合，新しい並び順が保存されませんでした。
 
* ACI0090259 Webサービスで公開されたメソッドの入力パラメーターにローカル変数が使用できませんでした。（コンパイルモードで『EXECUTEメソッドのパラメータが不正』ランタイムエラーが返されました。）プロセス変数（Compiler_WEBで宣言）であれば問題ありません。

* ACI0090319 Mac版のみ，リストフォームの```On Header```イベントでは```SET WINDOW TITLE```が効きませんでした。

* ACI0090323 クイックレポートのメニューからスタイル/表示形式を選択し，テンプレートを適用すると，配列の範囲チェックエラーになりました。クロステーブル型のレポートでは問題ありません。

* ACI0090378 HTTPヘッダーの『accept』フィールドに『compress, gzip, identify』が含まれていた場合，```On Web Connection```に制御が渡らず，406エラーが返されました。

* ACI0090491 On Startupで```SET WINDOW TITLE```を実行しても，アプリケーションプロセスのウィンドウタイトルを変更することができませんでした。

* ACI0090496 14R4以降，Windows版のみ，フォームに貼り付けられたスタティックイメージの表示される位置が，フォームエディターとフォーム実行時では少し違うようになりました。ペイントから直接ペーストしたものなど，直接フォームエディターに貼り付けたEMF形式の画像で問題が発生します。BMPやPNGでは問題ありません。

* ACI0090527 フォームエディターでフィールドのフォント名を変更した場合，Control+Zで『取り消し』ができませんでした。

* ACI0090540 Mac版のみ。マルチスタイルで《プリント時可変》のオブジェクトをプリントアウトした場合，境界線が正常に印刷されないことがありました。一部の側面が欠落していたり，完全に省略されたりしました。

* ACI0090541 クライアント/サーバー版で```METHOD SET CODE```を実行した場合，サーバーが終了することがありました。

* ACI0090556 アプリケーションビルド画面で『Expansion#』を選択しても『マスター』番号が空のままでした。

* ACI0090567 アプリケーションビルド画面で『マスター』番号を削除しても『Expansion#』が取り除かれませんでした。

* ACI0090646 [Resoucesフォルダー](http://doc.4d.com/4Dv14/4D/14/Managing-the-Resources-folder.300-1242116.ja.html)の内容は，変更がない限り，サーバーからクライアントに転送されないはずですが，14R4以降，毎回の接続でフォルダーの同期が始まるようになりました。（互換性オプション『[旧式ネットワークレイヤーを使用する](http://doc.4d.com/4Dv14R4/4D/14-R4/Network-compatibility-option-important-note.300-1756365.ja.html)』が解除されていれば，問題ありませんが，このオプションを解除することは推奨されていません。）

* ACI0090654 Windows版のみ，数値型のリストボックス列を印刷した場合，横揃えが『デフォルト』または『右』であっても，左揃えになりました。

* ACI0090668 FORM SCREENSHOTを使用した場合，Webエリアの配置された領域が黒く塗りつぶされて出力されました。

* ACI0090732 階層リストを右クリックしたタイミングで[SET TIMER](http://doc.4d.com/4Dv14R4/4D/14-R4/SET-TIMER.301-1707835.ja.html)を実行した場合，直後に```On Timer```イベントが発生するはずですが，14R4以降，その階層リストを再度クリックするまでイベントが発生しないようになりました。

* ACI0090743 《読み込み》ダイアログでエンコーデイングをShift_JISなどに変更しても，正しい文字コードが使用されませんでした。データ形式を《XML》などに変更してから《テキスト》に戻せば，正しい文字コードが使用されました。

* ACI0090744 14R4以降，日本語版のみ，作成したリストボックスの変数名が正常ではありませんでした。ヘッダーは《Footer1》列は《Header1》フッターは《Composite Button1》といったデフォルトの変数名が付けられました。

* ACI0090753 ピクチャオブジェクトのコンテキストメニューまたは```READ PICTURE FILE```でインポートしたイメージ，あるいは ```SET PICTURE FILE NAME```で名前を設定したイメージのファイル名を```Get picture file name```で参照した場合，最初は名前が返されますが，4D Remoteでレコードを再ロードした後は空の文字列が返されました。シングルユーザー版または4D Server（ストアドプロシージャー）では問題ありません。

* ACI0090811 Windows版のみ，ウィンドウタイトルバーのメニューより《サイズ》を選択し，ウィンドウを矢印キーでリサイズする代わりにクリックするとアプリケーションがフリーズしました。

* ACI0090817 [Num](http://doc.4d.com/4Dv15/4D/15/Num.301-2006646.ja.html)に```+```または```-```を含む文字列を渡した場合，それが```e```または```E```に続くものでない限り，**後続の数字は無視される**べきですが，v14以降，そうではありませんでした。たとえば，"123-45"を渡した場合，"12345"が返されました。

* ACI0090825 Mac版のみ，```String```に負の値を渡した場合，16進数モード（```&x```，または```&$```）で正しい値が返されませんでした。

* ACI0090828 Mac版のアプリケーションビルドはWindows版の2倍ほど時間がかかりました。

* ACI0090838 ```CHANGE CURRENT USER```でカレントユーザーを変更することができませんでした。

* ACI0090847 Windows版のみ，タブコントロールは必要に応じてタブがスクロールするようになっていますが，v13以降，表示されていないタブをコマンドで選択した場合，v11のようにタブコントロールが自動的にスクロールしませんでした。

* ACI0090853 Windows版のみ，ポップアップメニューにスクロールバーが表示されるときのサイズが不十分でした。

* ACI0090881 空のテキスト・BLOB・ピクチャフィールドに対して```Get External data path```を発行すると，空の文字列を返す代わりに『ExternalData:Table-1 Field-1』といった無効なパスが返されました。
 
* ACI0090951 Mac版のみ，一部のSVGオブジェクトはプリントアウトまたはPDF出力で黒く印刷されました。

* ACI0090971 Mac版のみ，HelveticaフォントはOS X 10.7, 10.8, 10.9では第1行の印刷と表示位置が上に寄りました。10.10では問題ありません。なお，**Helvetica Neue**であれば，どのバージョンのOS Xでも同じように表示されます。

* ACI0090973 14R4以降，Mac版のみ，ST Get Plain Textにパラメーター（例: $1）を渡した場合，アプリケーションがクラッシュしました。変数であれば問題ありません。

* ACI0090977 14R4以降，ランタイムエクスプローラーの《プロセス》タブのラベルが欠落しており，XLIFFリソース名がそのまま表示されていました。

* ACI0090990 クイックレポートエディターで追加したフィールドの並び替え条件を設定することができますが，昇順/降順を示す三角形のアイコンが表示されませんでした。

* ACI0091017 14R3以降，EXPORT TEXTでレコードを書き出した場合，200件の倍数だけが正常で，残りのレコードはデータが空でした。

* ACI0091039 ```SELECT LIST ITEMS BY POSITION```で階層リストの項目を選択することができませんでした。

* ACI0091042 14R5以降，Windows版のみ， SVGのtextArea要素のfont-family属性に複数のフォント名を列挙した場合，最初のフォントだけが認識されました。そのフォントが存在しないのであれば，後続のフォントで代用されるべきです。

* ACI0091050 ウィンドウを作成せずに```MESSAGE```を実行した場合，最前面にあるウィンドウの内容が上書きされました。問題は修正されましたが，***```MESSAGE```は開発者向けのコマンドであることに留意してください***。通常は```Open form window```や```DIALOG```を使用し，エンドユーザー向けの良質のユーザーインタフェースを用意するように心がけてください。

* ACI0091051 Mac版のみ，コンボボックスが使用された場合，```HIDE PROCESS```が効きませんでした。

* ACI0091086 Mac版のみ，OS X 10.10で```PRINT SELECTION```を実行すると，入力可フィールドの背景色がランダムにグレーでプリントアウトされました。

* ACI0091090 『プリント時可変』オブジェクトが設定されたテキストを印刷した場合，0による除算が発生することにより，アプリケーションがクラッシュすることがありました。

* ACI0091143 コンポーネントメソッド```SVG_SET_FONT_FAMILY```を使用した場合，```SVG_CLEAR```でメモリーが完全に解放されませんでした（メモリーリーク）がありました。

* ACI0091172 ```QUERY SELECTION```で表示したクエリエディターのクエリタイプメニューは，デフォルトで「絞り込み」にセットされていませんでした。
 
* ACI0091193 ```IMPORT DATA```にプロジェクトファイルを渡した場合，UTF-8以外のエンコーディングで保存されたテキストデータをインポートすると文字化けが発生しました。ダイアログのボタンからプロジェクトファイルを指定すれば問題ありません。

* ACI0091207 ```LEFT JOIN```の```WHERE```句に2個目の条件が```OR```または```IN```で渡され，それが存在しないレコードを指している場合，結果が正しくありませんでした。その場合，返されるはずのレコードも返されませんでした。

```sql
SELECT OrderDetails.OrderDetailID, Orders.CustomerID
FROM OrderDetails 
LEFT JOIN Orders ON (OrderDetails.OrderID = Orders.OrderID) 
WHERE ((Orders.CustomerID = 1) OR (Orders.CustomerID = 9))
INTO :OrderLinesID_al, :OrdersCustomerID_al
```

* ACI0091274 Windows版のみ，フォームに複数の4D Writeエリアが表示されている場合，フォーカスを得ているほうに入力した日本語が他方に表示されることがありました。

* ACI0091277 14R5以降，Windows 8.1のみ，画面の解像度を125%に設定した場合，リストボックスのセルを2度クリックして編集すると，文字列が間違った順序で入力されました（例: Test->estT, 4D->D4）。画面の解像度が100%であれば問題ありません。

* ACI0091293 14R4以降，コンボボックスにテキストを入力中，On After Edit, On Before Keystroke, On After Keystrokeイベントに続けて発生したOn Data Changeイベントをトレースした場合，デバッガが即座に閉じられるようになりました。（On Data Changeと前述したイベント群が両方とも設定されていなければ大丈夫です。）

* ACI0091295 Mac版のみ，テキストエリアのコンテキストメニュー・フォントリストにHelveticaがアルファベット並び順の観点から間違った位置に何度も出現しました。その項目を選択すると，いつも"A"から始まる最初のフォントが選択されました。




4D View
---
* ACI0087028 4D Viewの印刷オブションで行の繰り返しが有効に設定されている場合，セルの内容が印刷されませんでした。

* ACI0087252 Tabキーで4D Viewのセルから隣接するセルに移動することができませんでした。ただし，矢印キーは，それまでに入力されたTabキーの位置を反映しました。

* ACI0090149 Mac版のみ，4D Viewセルのテキスト自動折り返しが有効に設定されている場合，テキストのカラーが適用されませんでした。（文字色がブラックになりました）

* ACI0090520 14R4以降，4D Viewにポインター（```$areaPtr->```）の引数を渡すことができませんでした。
 
* ACI0090606 Windows版のみ，14R4以降， 4D Viewエリアの内容をコマンドで変更した後，ウィンドウが正常に再描画されませんでした。また，ウィンドウを最善面に移動した後，背後にあるウィンドウの重なった部分がグレーのままでした。いずれかのウィンドウ上でオブジェクトをクリックすれば，再描画の問題は解消されます。
　
* ACI0091707 4D Viewのセルにおおきなテキストが表示されている場合，データ編集中にクラッシュすることがありました。

4D Write
---

* ACI0089990 Mac版のみ，4D Write文書の文字数が多ければ多いほど，タイプ入力した文字列が遅れて表示されました。ズーム率が200%のときには，さらに問題が顕著に現れました。

* ACI0091411 Mac版のみ，```WR FONTS TO ARRAY```で返されるフォント名が正しくありませんでした。```FONT LIST```は問題ありません。

* ACI0091434 Mac版のみ，Acrobat Readerがインストールされたマシンで4D Writeエリアを印刷すると，アプリケーションがクラッシュしました。

* ACI0091484 4D Write文のを編集中にスペルチェックを使用した場合，ドキュメントが更新されませんでした。
 
* ACI0091745 14R4以降，4D Writeエリア内でピクチャが正しく描画されませんでした。

4D Internet Commands
---

* ACI0090575 ```MSG_Extract```は，RFCエンコード（例: U%CC%88berarbeitete%20Offerte.pdf）されたUnicodeファイル名を正しく展開しませんでした。

4D for OCI
---

* ACI0092080 v14.4以降，新しい定数，```BIND_IO```が使用できるようになりました。4DパラメーターをPL/SQLストアドプロシージャーに渡す場合，それが入力引数であれば```BIND_IN```，出力引数であれば```BIND_OUT```を使用することができました（既存の定数）。新しい定数により，入出力引数，つまり読み/書きモードで4Dパラメーターをバインドすることができます。

内部ライブラリのアップデート
---

**OpenSSL** - バージョン 1.0.1l (one.zero.one.lima) に更新しました。

既知の問題
---

v14.xからv15のサーバー自動アップデートはサポートされていません。変換の過程で確認メッセージが表示され，人手による介入が必要とされなるためです。

Windows版の4D Serverをサービスとして実行した場合，サーバー自動アップデートに失敗します。

クライアント/サーバーで新しい```QUERY BY ATTRIBUTES```コマンドを使用した場合，```#```（不等価）演算子が使用できません。

4D Viewは，システムカラーピッカーで選択した色が正しく認識されません。RGB値がBGR値として解釈されてしまうためです。
