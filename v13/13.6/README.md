4D v13.6
---

* ACI0092648 4D Volume Deskopのビルド番号を特定することができませんでした。

**注記**: 通常，ビルド番号は，[Application version](http://doc.4d.com/4Dv13/4D/13.5/Application-version.301-1458428.ja.html)で特定することができますが，ビルドされたアプリケーションでは，Info.plistに記述された情報 (```CFBundleShortVersionString, CFBundleVersion```) を参照する必要があるかもしれません。今回の修正により，Info.plistファイルにビルド番号が反映されるようになりました。

* ACI0092730 Windows版のみ，[IT_Version](http://doc.4d.com/4Dv13/4D/13.2/IT-Version.301-1086826.ja.html)から返されるバージョン番号が正確ではありませんでした。

* ACI0092713 統合WebKit版，およびMac版システムWebエリアで[WA EXECUTE JAVASCRIPT FUNCTION](http://doc.4d.com/4Dv13/4D/13.5/WA-EXECUTE-JAVASCRIPT-FUNCTION.301-1457214.ja.html)または[WA Execute JavaScript](http://doc.4d.com/4Dv13/4D/13.5/WA-Execute-JavaScript.301-1457215.ja.html)でJavaScriptを実行することができませんでした。13.5では問題ありません。13.5HF1以降の問題です。
 
* ACI0091680 [XSLT GET ERROR](http://doc.4d.com/4Dv13/4D/13.5/XSLT-GET-ERROR.301-1457286.ja.html)を実行した後，```OK```変数に```1```が代入されませんでした。

* ACI0091616 ```PROFIND```など，非標準のHTTPメソッドを[HTTP Request](http://doc.4d.com/4Dv13/4D/13.5/HTTP-Request.301-1458478.ja.html)に渡した場合，```GET```が送信されました。

* ACI0092244 Windows版で地域と言語が『ルクセンブルグ』に設定されている場合，4Dが起動直後にクラッシュしました。

**注記**: 4D Writeと4D Viewのバージョンも13.6に上げる必要があります。

* ACI0087028 4D Viewの印刷オブションで行の繰り返しが有効に設定されている場合，セルの内容が印刷されませんでした。

* ACI0069136 4D Writeエリア上でコンテキストメニューを表示し，『ハイパーリンクを挿入』ダイアログで『ドキュメントを開く』で文書タイプを『RTF』に変更しても，ファイル選択画面でRTFファイルを選択することができませんでした。
 
**注記**: 4Dとプラグイン，両方のバージョンを13.6に上げる必要があります。

* ACI0092077 Mac版で，[LOG EVENT](http://doc.4d.com/4Dv13/4D/13.5/LOG-EVENT.301-1457583.ja.html)の```Into 4D Debug Message```を使用しても，コンソールにメッセージが書き込まれませんでした。 

* ACI0090668 [FORM SCREENSHOT](http://doc.4d.com/4Dv13/4D/13.5/FORM-SCREENSHOT.301-1458325.ja.html)を使用した場合，Webエリアの配置された領域が黒く塗りつぶされて出力されました。

**注記**: 修正されたのは，Windows版だけです。Mac版は，v14以降で修正されました。いずれにしても，Webエリアのオフスクリーンレンダリングはサポートされていません。修正とは，Webエリアの配置された領域が黒く塗りつぶされない，ということであり，ビットマップ画像が出力されるように改良された，ということではありません。

* ACI0091271 Windows版のみ，13.5 Hotfix 2のODBCドライバーで4D Serverに接続すると，一部のテーブルがみつからない，というエラーが返されました。以前のバージョンでは，問題ありません。

* ACI0086794 4D Writeのズーム率を200%に変更した場合，カーソルが間違った位置に表示されました。

* ACI0085460 **13.4以降**，HTML式が埋め込まれた4D Write文書をHTML4形式で出力した場合，HTMLの開始タグと終了タグが誤ってエスケープされました。

* ACI0057942 アプリケーションビルドのダイアログ画面でUnlimited Desktopのライセンス（.licence4D）を追加した場合，MasterとExpansionに同一のライセンス番号が表示されました。

* ACI0080677 Mac版のみ，コードエディターにいくらかの日本語を入力した後，それ以上は戻れなくなるところまで『取り消し』（command+Z）した後に『やり直し』（command+shift+Z）した場合，元のテキストが複製されました。

* ACI0082110 クライアント/サーバー版でSQL [REPLICATE](http://doc.4d.com/4Dv13/4D/13.4/REPLICATE.300-1225617.ja.html)のWHERE句にプロセス変数を使用した場合，アプリケーションがクラッシュしました。リテラル値であれば，問題ありません。

* ACI0082461 エクスプローラーに表示されるテーブルの並び順とメソッドエディターのタイプアヘッド候補ウィンドウに表示されるテーブルの並び順に一貫性がありませんでした。

* ACI0087122 ```DOCUMENT LIST```をWindowsからMavericks上のSMB共有ネットワークボリュームに対して実行した場合，ファイル数が正確に返されませんでした（99個を超える場合）。問題は修正されましたが，正常な動作にはWindows 7またはWindows Server 2008 R2以降が必要です。

* ACI0087370 [13.5 Hotfix 2](http://www.4d.com/jp/blog/about-13-5-2.html)で改善された問題がさらに修正されました。
 
* ACI0087679 リストボックスに非表示の列が含まれている場合，その列よりも右側の列をドラッグしたときに表示される列の挿入ポイントが間違っていました。

* ACI0087977 リストボックスがページ2以降に配置されていた場合，[LISTBOX INSERT ROW](http://doc.4d.com/4Dv13/4D/13.5/LISTBOX-INSERT-ROWS.301-1458211.ja.html)で間違った位置に行が挿入されました。

* ACI0089181 表示フォーマット```## ####```が設定されているテキスト入力エリアには，最後の桁が表示されませんでした。

* ACI0089465 Windows版のみ，リスト型サブフォームの表示にとても時間がかかることがありました。

* ACI0090125 2003以前に作成されたアプリケーションのリストフォームで[システムハイライトカラー](http://doc.4d.com/4Dv12/4D/12.4/Output-forms.300-1015998.ja.html)プロパティが有効にされていない場合，レコードが選択された状態でリストを上下にスクロールすることができませんでした。13.4以降で問題が発生しました。

* ACI0090259 Webサービスで公開されたメソッドの入力パラメーターにローカル変数が使用できませんでした。（コンパイルモードで『EXECUTEメソッドのパラメータが不正』ランタイムエラーが返されました。）プロセス変数（Compiler_WEBで宣言）であれば問題ありません。

* ACI0090343 Windows版のみ，サブレコード追加のキーボードショートカットを『control+<』に設定した場合，一度の入力でレコードが2件，追加されました。

* ACI0090363 Mac版のみ，fill属性が『none』に設定されているSVGイメージを印刷すると，その部分は黒く塗りつぶされたように出力されました。

* ACI0090378 HTTPヘッダーの『accept』フィールドに『compress, gzip, identify』が含まれていた場合，[On Web Connection](http://doc.4d.com/4Dv13/4D/13.5/On-Web-Connection-Database-Method.300-1457408.ja.html)に制御が渡らず，406エラーが返されました。

* ACI0090444 ピクチャフィールドが『[プリント時可変](http://doc.4d.com/4Dv13/4D/13.4/Printing-areas-of-variable-size.300-1226584.ja.html)』に設定されていた場合，イメージが印刷されませんでした。

* ACI0090753 ピクチャオブジェクトのコンテキストメニューまたは[READ PICTURE FILE](http://doc.4d.com/4Dv13/4D/13.5/READ-PICTURE-FILE.301-1458029.ja.html)でインポートしたイメージ，あるいは [SET PICTURE FILE NAME](http://doc.4d.com/4Dv13/4D/13.5/SET-PICTURE-FILE-NAME.301-1458048.ja.html)で名前を設定したイメージのファイル名を[Get picture file name](http://doc.4d.com/4Dv13/4D/13.5/Get-picture-file-name.301-1458051.ja.html)で参照した場合，最初は名前が返されますが，4D Remoteでレコードを再ロードした後は空の文字列が返されました。シングルユーザー版または4D Server（ストアドプロシージャー）では問題ありません。

* ACI0090844 フォント名（font-family属性）が小文字だけで指定（例: Arialではなくarial）されたSVGを印刷した場合，あるいは[WRITE PICTURE FILE](http://doc.4d.com/4Dv13/4D/13.5/WRITE-PICTURE-FILE.301-1458028.ja.html)でイメージをPNGやBMPに変換した場合，結果が正しくありませんでした。フォーム表示は問題ありません。

* ACI0090847 Windows版のみ，[タブコントロール](http://doc.4d.com/4Dv13/4D/13.4/Tab-Controls.300-1226566.ja.html)は必要に応じてタブがスクロールするようになっていますが，v13以降，表示されていないタブをコマンドで選択した場合，v11のようにタブコントロールが自動的にスクロールしませんでした。

* ACI0090951 Mac版のみ，一部のSVGオブジェクトはプリントアウトまたはPDF出力で黒く印刷されました。

* ACI0091314 クライアント/サーバー版で特定のクエリ（インデックスが設定されたフィールドと設定されていないフィールドの組み合わせでリレートフィールドを検索）を実行すると，アプリケーションがフリーズすることがありました。関係するフィールドにインデックスが設定されていれば，問題ありません。

* ACI0091348 Windows版のみ，タブコントロールの最後の項目が選択された状態でその項目を[DELETE FROM ARRAY](http://doc.4d.com/4Dv13/4D/13.5/DELETE-FROM-ARRAY.301-1457526.ja.html)で削除すると，アプリケーションがクラッシュしました。

* ACI0091413 複数行のテキストフィールドをクリックレポートで参照し，4D Viewに出力した場合，テキストフィールドは最初の行しか表示されませんでした。

* ACI0091425 リストボックス上で左マウスボタンのダブルクリックが検出されませんでした。

* ACI0091458 リストフォームに配置された3Dボタンは，レコードを編集している時など，表示されないことがありました。標準ボタンでは問題ありません。

* ACI0091546 [PV Get picture ](http://doc.4d.com/4Dv13/4D/13/PV-Get-picture.301-916124.ja.html)にメモリーリークがありました。たとえば，4D Viewに挿入されたQuickTime画像を標準的なフォーマットに変換している途中でメモリが不足してしまい，処理が継続できなくなることがありました。

* ACI0091573 WebエリアにJavaScriptをインジェクションしてページをプリントすることができませんでした。

```
$error:=WA Evaluate javascript(*;"Area";"window.print()")
```

**注記**: OS X 10.10 Yosemiteでは，[WA SET PAGE CONTENT](http://doc.4d.com/4Dv13/4D/13.5/WA-SET-PAGE-CONTENT.301-1457208.ja.html)の後に```On End URL loading```イベントが発生しないため，[DELAY PROCESS](http://doc.4d.com/4Dv13/4D/13.5/DELAY-PROCESS.301-1457966.ja.html)でタイミングを調節する必要があるかもしれません。

```
WA SET PAGE CONTENT(*;"Area";"<html><body>Test</body></html>";"")
DELAY PROCESS(Current process;30)
$error:=WA Evaluate javascript(*;"Area";"window.print()")
```

Windows版では，ネイティブWebエリアを使用してください。**Windows版のWebKitは印刷をサポートしていません**。

* ACI0091706 Windows版のみ，Webエリアに[TinyMCE](http://www.tinymce.com/)のようなエディターを表示し，同じフォームに表示された普通のテキスト入力エリアがフォーカスを得ている状態で文字列を入力した場合，両方のエリアに文字列が表示されました。いずれかのオブジェクトをクリックしてから入力を始めれば，問題ありません。

* ACI0091787 Windows版のみ，階層リストのアイテム数が多い場合，リサイズやスクロールの処理にとても時間がかかりました。

* ACI0090575 UTF-8エンコーディングでファイル名が渡された場合，[MSG_EXTRACT](http://doc.4d.com/4Dv13/4D/13.2/MSG-Extract.301-1086702.ja.html)で一部の文字が```?```に変換されてしまいました。

```
filename*=utf-8''U%CC%88berarbeitete%20Offerte.pdf
```

Unicodeが内部的に[正規化](http://ja.wikipedia.org/wiki/Unicode%E6%AD%A3%E8%A6%8F%E5%8C%96)されていなかったことが原因でした。

* ACI0090149 Mac版のみ，4D Viewセルのテキスト自動折り返しが有効に設定されている場合，テキストのカラーが適用されませんでした。（文字色がブラックになりました）

* ACI0085460 **13.4以降**，HTML式が埋め込まれた4D Write文書をHTML4形式で出力した場合，HTMLの開始タグと終了タグが誤ってエスケープされました。

* ACI0086794 4D Writeのズーム率を200%に変更した場合，カーソルが間違った位置に表示されました。

* ACI0089727 トランザクション中に作成された『大文字』のインデックスフィールドをトランザクション中にクエリした場合，みつかりませんでした。

* ACI0089742 [DIALOG](http://doc.4d.com/4Dv13/4D/13.5/DIALOG.301-1457244.ja.html)コマンドで表示したフォームからDIALOGコマンドで同じフォームを表示した場合，最初に表示したほうのフォームには入力ができないはずですが，Mac版で日本語入力が有効にされていれば，テキストを入力することができました。

* ACI0089753 『プリント時可変』オプションが有効にされたマルチスタイルテキストのサイズがページ内に収まらない場合，Windows版ではプリントが無限に続き，アプリケーションをシャットダウンするしかありませんでした。

* ACI0089765 Windows版でSVGピクチャを印刷した場合，一部のフォント（例: Univers Condensed イタリック体）が印刷されませんでした。中には，[PAGE BREAK](http://doc.4d.com/4Dv13/4D/13.5/PAGE-BREAK.301-1458005.ja.html)でハングを引き起こすものもあります。表示は問題ありません。

* ACI0089799 Mac OS X 10.9プラットフォームでは，ダイアルオブジェクトの配色が正しくありませんでした。10.10 Yosemiteプラットフォームでは，オブジェクトをクリックすることができませんでした。

* ACI0090018 トランザクションの操作によっては，インデックスが無効になることがありました。たとえば，トランザクション中にレコードを作成して確定，新しいトランザクションを開始し，そのレコードを変更・保存した後にキャンセル，また新しいトランザクションを開始し，そのレコードを変更・保存した後に確定した場合，MSCにはインデックスの問題が報告され，実際，インデックスを使用する統計などが誤った値を返しました。

* ACI0090035 XMLスキーマ定義（XSD）の中には，```xsd:import```要素を使用し，他のXMLスキーマ定義を参照するようなものが少なくありません。4Dの[DOM Parse XML source](http://doc.4d.com/4Dv13/4D/13.5/DOM-Parse-XML-source.301-1457319.ja.html)は，そのようなスキーマ定義を使用してXMLを検証した場合，すべてのスキーマ定義の名前空間が同一であるとみなされ，エラーが返されました。```xsd:include```とは違い，```xsd:inport```は異なる名前空間のスキーマ定義が参照できるはずです。

**参考**: [http://msdn.microsoft.com/ja-jp/library/ms256237(v=vs.110).aspx](http://msdn.microsoft.com/ja-jp/library/ms256237(v=vs.110).aspx)

* ACI0090049 セレクション型のリストボックスが含まれるプロジェクトフォームをドラッグ＆ドロップ操作により他のストラクチャに移動した場合，テーブルが一緒にコピーされませんでした。テーブルが定義されていないリストボックス，あるいは間違ったテーブルに関連づけられたリストボックスが作成されました。

* ACI0090155 SVGコンポーネントのパレットから色をピクチャ変数にドラッグ＆ドロップした場合，OS X 10.10 Yosemiteではクラッシュしました。GIFファイルをデスクトップからピクチャ変数にドラッグ＆ドロップした場合も同様でした。

* ACI0090337 Webプロセスのユーザーが正しく設定されていない場合，Webプロセスでクラッシュすることがありました。

* ACI0087601 [Execute on server](http://doc.4d.com/4Dv13/4D/13.5/Execute-on-server.301-1457971.ja.html)でストアドプロシージャーを実行し，サーバー側で4D Viewのオフスクリーンエリアを作成した後，4D Remote側の小数点がピリオド，4D Server側の小数点がヴィルギュル（カンマ）の場合，クライアントから渡された数値型の変数が誤ったフォーマットで挿入されました。

* ACI0076706 4D Viewでピクチャを印刷した場合，位置が正しくないことがありました。具体的には，表示フォーマットが『バックグランド』に設定されているとき，繰り返し印刷で画像の位置が正しくありませんでした。

* ACI0088901 スケジュール設定されたバックアップをユーザーがキャンセルした場合，以後，スケジュールされたバックアップが実行されませんでした。スケジュールを設定した直後のバックアップは，『中止』ボタンをクリックしたとしても，すぐに再開されますが，スケジュールにより実行されたバップアップをユーザーが中止した場合，バックアップログには『 (1406) バックアップはユーザーによりキャンセルされました』という記録が追加され，『次回バックアップ予定』もスケジュールどおりに更新され続けますが，サーバーの再起動・BACKUPコマンドやマニュアルバックアップ実行・スケジュールの変更等をしない限り，スケジュールされたバックアップは実行されませんでした。

* ACI0088762 ビルドされたクライアントは，一般的なサーバーにも接続することができました，修正により，そのようなサーバーに対する接続を試みたビルドクライアントでは，『自動アップデート』画面ではなく，『バージョンが違います』エラーが表示されるようになりました。なお，同一マシンで複数のサーバーが起動しているような環境では，hardlinkキーを使用することが推奨されています。

* ACI0088645 Microsoft Accessから4Dの実数フィールドにODBC経由でアクセスした場合，指数表示となりますが，精度が足りませんでした。FLOATフィールドであれば問題ありません。実数フィールドはMicrosoft AccessのSINGLEに，FLOATはDOUBLEに変換されるためです。

**注記**: 修正されたODBCドライバーのDSN設定ページ『MSAccess』オプションを有効にする必要があります。

* ACI0089090 MS QueryでパラメーターのあるSQL文を実行すると，"Server rejected the connection:Failed to execute statement"というエラーが返されました。

エラーが返されるSQLの例

```
SELECT Contacts.CompanyID, Contacts.SurnameFROM Contacts ContactsWHERE (Contacts.CompanyID=[param])
```

* ACI0089105 MS SQL Serverのリンクサーバーから```OPENQUERY```ステートメントを実行すると，エラーが返されました。

エラーが返されるSQLの例

```
SELECT * FROM OPENQUERY(TAOW128909_Main, 'SELECT * from Table_1')
```

* ACI0041745 ODBC Proの```ODBC_SQLBindParameter```でOracleのストアドプロシージャーを実行した場合，戻り値が正しく返されないことがありました。

エラーが返されるSQLの例

```
$result:=ODBC_SQLBindParameter ($iCursorID;4;$iIO;SQL_INTEGER ;0;0;->myResult;- >vIndic)
```

* ACI0088718 Microsoft IIS7 FTPサーバーでMSDOSモードが有効にされている場合，```FTP_GetDirList```でディレクトリの一覧を取得することができませんでした。IIS7では，"200 MSDOS-like directory output is off/on"というメッセージが"200 MSDOS-like directory output is off/on."（ピリオドに注目）に変更されたためです。　

* ACI0078522 [IT_GetPort](http://doc.4d.com/4Dv13/4D/13.2/IT-GetPort.301-1086836.ja.html)でSSL系の新しいプロトコル設定  (12=SMTP SSL; 13=POP3 SSL; 14=IMAP SSL) が指定できませんでした。

* ACI0071389 プラグインAPIの```PA_ExecuteCommandByID```に配列を渡すことができませんでした。

* ACI0091207 ```LEFT JOIN```の```WHERE```句に2個目の条件が```OR```または```IN```で渡され，それが存在しないレコードを指している場合，結果が正しくありませんでした。その場合，返されるはずのレコードも返されませんでした。

```sql
SELECT OrderDetails.OrderDetailID, Orders.CustomerID
FROM OrderDetails 
LEFT JOIN Orders ON (OrderDetails.OrderID = Orders.OrderID) 
WHERE ((Orders.CustomerID = 1) OR (Orders.CustomerID = 9))
INTO :OrderLinesID_al, :OrdersCustomerID_al
```
 
* ACI0087128 [LOG EVENT](http://doc.4d.com/4Dv14R5/4D/14-R5/LOG-EVENT.301-1851206.ja.html)で出力したメッセージがイベントビューアに表示されませんでした。

* ACI0087176 多数の4D Remoteが同時にサーバーに接続しようとすると，サーバーがフリーズしました。

* ACI0087260 v12以前で作成されたアプリケーションを変更した場合，自動Webセッション管理のオプションが最初から有効にされていました。互換性のため，変換されたデータベースでは無効にされているべきです。

* ACI0087293 ゼロによる除算で得た値```I```を渡した場合，[GRAPH](http://doc.4d.com/4Dv14R5/4D/14-R5/GRAPH.301-1851411.ja.html)でアプリケーションがクラっシュしました。

* ACI0087325 サブフォームの描画中に[REDRAW WINDOW](http://doc.4d.com/4Dv14R5/4D/14-R5/REDRAW-WINDOW.301-1852283.ja.html)を実行すると，正しく再描画されないことがありました。

**注記**: 修正が適用されるためには，システムハイライトカラーを有効にする必要があります。

* ACI0087347 Windows版のみ。```System time short```定数で時間を文字列に変換した場合，地域と言語の設定に反して秒数も返されました。

* ACI0087374 プロパティリストを操作してオブジェクトのタイプをフィールドから変数に変更した場合，オブジェクトメソッドが失われ，MSCでエラーが検出されました。
 
* ACI0086683 自動セッション管理のタイムアウトを設定するために，On Web Connectionで[WEB SET OPTION](http://doc.4d.com/4Dv13/4D/13.5/WEB-SET-OPTION.301-1457388.ja.html)を使用した場合，クッキーの寿命はWeb Inactive session timeoutではなく，Web Inactive process timeoutの値になりました。

* ACI0086730 Windows版のSVG（およびコードエディター）では，v12まで認識されていたフォントが認識されなくなり，代わりにデフォルトのフォントが使用されるようになりました。font-familyには，PostScript名やフルネームではなく，フォントファミリー名を指定する必要があります。例外的に，DIN OTは，GDI実装のフォントファミリー名が間違ってPostScript名の"DINOT-Black"とされているために，4DのWindows版ではどちらでも対応するようになりました（Direct2D実装のフォントファミリー名はDIN OTです）。Windows版のSVGエンジンは，Direct2D/DirectWriteとGDIPlus（D2Dがオフの場合）を使い分けていますが，非ベクトル系フォントはレンダリングされませんでした。これは，透明な背景にSVGイメージをオフスクリーンで合成した場合，Courierのような非Truetypeフォントをレンダリングする方法がGDIには用意されていないからです。修正により，Courierのような非ベクトル系フォントが含まれるイメージはオフスクリーンで合成されないようになりました。レンダリングされるようになったフォントファミリー名は下記のとおりです。

1. DIN OT/DINOT-Black
1. MS Sans Serif
1. Serif
1. Roman
1. Script
1. Small Fonts
1. ASI_Mono
1. ASI_System
1. System
1. Terminal
1. Brush Script MT
1. その他のOpentypeあるいはbitmapフォント

* ACI0086830 WEB SEND BLOBコマンドがSSLモードでは10秒でタイムアウトしてしまうため，低速のネットワークでは，おおきなBLOBが完全に送信できないことがありました。HTTP，WEB SEND FILE，WEB SEND RAW DATAでは問題ありませんが，（ファイルサイズに応じて[WEB SEND BLOB](http://doc.4d.com/4Dv13/4D/13.5/WEB-SEND-BLOB.301-1457398.ja.html)と[WEB SEND FILE](http://doc.4d.com/4Dv13/4D/13.5/WEB-SEND-FILE.301-1457395.ja.html)を使い分けている）スタティックWebサーバーでは同じ問題が10MB以下のファイルで発生しました。
 
参考：低速ネットワークの再現には，[Network Link Conditioner](https://developer.apple.com/library/ios/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/WhyNetworkingIsHard/WhyNetworkingIsHard.html)が便利です。

* ACI0086904 一部のテーブルでOrphan（リンク切れ）BLOBエラーが発生した場合，MSCで修復することもできず（[SEND RECORD](http://doc.4d.com/4Dv13/4D/13.5/SEND-RECORD.301-1457277.ja.html)-[TRUNCATE TABLE](http://doc.4d.com/4Dv13/4D/13.5/TRUNCATE-TABLE.301-1457732.ja.html)-[RECEIVE RECORD](http://doc.4d.com/4Dv13/4D/13.5/RECEIVE-RECORD.301-1457276.ja.html)であれば修復することができます），それどころか他のテーブルからもエラーが返されるようになりました。

* ACI0086934 フォームのOn Loadイベントで[FORM SET HORIZONTAL RESIZING](http://doc.4d.com/4Dv13/4D/13.5/FORM-SET-HORIZONTAL-RESIZING.301-1458331.ja.html)をコールすると，『インデックスが範囲外』エラーになりました。

* ACI0086977 テキストデータのインポート中にプログレスバーが表示されませんでした。

* ACI0086996 先頭レコードが空のセレクションをEXPORT DATAでテキスト形式エクスポートし，IMPORT DATAでインポートした場合，『無効なドキュメント構造』エラーが返されました。

* ACI0087009 スクロールエリア（本質的に単一選択のみ）をv13に変換した場合，結合リストボックスになりますが，その『選択モード』はデフォルトで『複数』でした。

* ACI0087025 ハイライトボタンにOBJECT SET ENABLEDを入力不可にした場合，ボタンをクリックしたときのような反転色で表示されました。

* ACI0087056 MS SQL Server 2012に対し，ドライバーSQL Server Native Client 11.0を使用し，TEXT（NTEXTではない），VARCHAR（NVARCHARではない）空の文字列が返されました。13.3までは問題ありませんでした。

* ACI0087289 4D Viewからクイックレポートを起動した場合，4D Viewのウィンドウがレポートの背後に移動してしまい，レポートを閉じるまで限りアクセスできなくなりました。

* ACI0087429 [WEB SEND BLOB](http://doc.4d.com/4Dv13/4D/13.5/WEB-SEND-BLOB.301-1457398.ja.html)あるいは[WEB SEND RAW DATA](http://doc.4d.com/4Dv13/4D/13.5/WEB-SEND-RAW-DATA.301-1457407.ja.html)に空のBLOBを渡した場合，404が返されました。WEB SEND TEXT("")では問題ありません。

* ACI0087430 Webフォルダーに対応するファイルがないHTTPリクエスト（未知のURL）を受信した場合，WEB SET HTTP HEADERやレスポンスを返すためのコマンドを何も実行しないと，On Web ConnectionとOn Web Authenticationイベントが2度，同じコンテキストで実行されました。修正により，レスポンスが暗示的に空の場合は404が返され，イベントは1度だけ実行されるようになりました。

* ACI0087437 Windows Server 2012 R2で出力したクイックレポートは，非常に小さなフォントサイズになりました。通常のプリントでは問題ありません。

* ACI0087545 Webサービス（SOAP）リクエストを処理するとき，デフォルトユーザーやパスワードで保護されたユーザー権限が指定されていたとしても，4D ServerのOn Web AuthenticationはDesigner（ユーザー番号:1）権限で実行されました。v12までは，On Server StartupでCHANGE CURRENT USERコマンドを実行してからSTART WEB SERVERすることにより，On Web Authenticationのユーザーをコントロールすることができました。v13では，On Server Startupの続きやサーバー管理画面プロセスのには権限の変更が反映されても，On Web Authenticationには反映されませんでした。

* ACI0087581 Webサーバーを起動した後，4Dを終了しようとすると『Task Pending』画面が表示されることがありました。

* ACI0087591 オフスクリーンエリアのレポートに対してqr cmd page setupを適用した場合など，[QR EXECUTE COMMAND](http://doc.4d.com/4Dv13/4D/13.5/QR-EXECUTE-COMMAND.301-1457932.ja.html)でクラッシュすることがありました。 

* ACI0087605 QR GET INFO COLUMNは，アプリケーションモードで実行した場合，ストラクチャ定義上のフィールド名ではなく，ユーザーインタフェースのフィールドラベル名を返しました。

* ACI0087627 Windows版では，スクリプトパスに日本語（拡張文字）が含まれている場合，PHP EXECUTEコマンドにレスポンスが返されませんでした。

* ACI0087702 タイプ『すべて』で『デザインモードを検索』した場合，コードの記述されたデータベースメソッドがヒットしませんでした。

* ACI0087709 Mac版では，テキストの『自動ドラッグ』が有効にされていても，マウスボタンでテキストの選択範囲が解除されてしまい，ドラッグができませんでした。

* ACI0087723 OBJECT SET FORMATコマンドは，システムで定義された小数点区切り記号を反映しませんでした。

* ACI0087758 テキストの『複数行』が『自動』に設定されている場合，オブジェクトをリサイズしただけでもフォーカスアウトのタイミングでOn Data Changeイベントが発生することがありました。

* ACI0087763 Windows版で縦スクロールバーの無いリストボックスから行を削除した場合の再描画が正しくありませんでした。

* ACI0087825 Windows版で[IRISPen executive 7](http://www.irislink.com/c4-2853-17/Overview.aspx)（ペン型小型スキャナー）でデータを入力しようとすると，アプリケーションがクラッシュしました。

* ACI0087844 サーバーに多数のWebプロセスが存在する状況で4D Server 64 bitsを終了しようとした場合，アプリケーションがクラッシュしました。

* ACI0087898 いわゆるorphan（オーファン）BLOBの存在するデータファイルを修復した場合，むしろデータが壊れることがありました。

* ACI0087902 On Startupで[METHOD GET PATHS](http://doc.4d.com/4Dv13/4D/13.5/METHOD-GET-PATHS.301-1458465.ja.html)を実行した場合，『オブジェクトパスの重複』エラーが返されることがありました。スタートアップ後であれば，問題は発生しません。MSCでも問題は検出されませんが，On Exit（つまりローカルプロセス）であれば問題が発生しました。

* ACI0087907 特定の条件下で特定のWebサービスを何度もコールした場合，クラッシュすることがありました。ある回数を超えたところで一部のリクエストに反応しなくなり，HTTP_WORKER_THREADプロセスがメモリにいつまでも残りました。サーバーは遅くなり，最終的にはクラッシュで終わりました。

* ACI0087947 リストボックスにチェックボックス形式で表示されているブール型のフィールドをクリックした場合，リストボックスの再描画に伴い，間違ったレコードが更新されてデータファイルに問題が発生することがありました。

* ACI0087978 プラグインがインストールされている4D Serverとの接続が確立された後，4D Remoteを実行しているコンピューターをスリープ状態にし，その間に4D Serverを強行終了（『すべてのユーザーの接続を解除して終了』）してから再起動した場合，スリープを解除したクライアント側では『サーバーとの接続に問題が発生』エラーが表示されますが，ここで『再起動』ボタンをクリックするとプラグインフォルダーの同期でエラーに終わることがありました。再起動ボタンをクリックした場合，プラグインをアンロードしてから同期を開始するようになっていますが，一部のプラグイン（ObjectTools4.0r4よりも古いバージョン）は，このタイミングでファイルを解放しないことがあるため，プラグインの上書きができないことが原因です。修正により，4D Write，4D View，4D Internet Commandsは，RSRファイルを解放するように改良されました。サードパーティ社製プラグインについては開発元まで問い合わせてください。

* ACI0087983 [WRITE PICTURE FILE](http://doc.4d.com/4Dv13/4D/13.5/WRITE-PICTURE-FILE.301-1458028.ja.html)または[CONVERT PICTURE](http://doc.4d.com/4Dv13/4D/13.5/CONVERT-PICTURE.301-1458043.ja.html)コマンドでSVGをEMF形式に変換しようとすると，Windowsではラスタライズされた低解像度の画像が返されました。v11では，SVGからEMFの変換ができました。修正により，SVGからEMFの変換でベクトル画像が出力されるようになりました。EMFはWindowsのフォーマットであるため，Macでは引き続き空の画像が作成され，OKシステム変数に0（失敗）が返されます。

* ACI0087995 QR GET INFO COLUMNからフォーミュラーの代わりに『C1』のような値が返されました。

* ACI0088002 リレーションが含まれるクイックレポートを出力した場合，からのセルは水平方向の罫線が描画されませんでした。

* ACI0088015 ディスクの空き容量が残っていても，新規レコードが4D Serverに追加できなくなることがありました。SAVE RECORDコマンドで『空き容量がありません』エラーが表示されることもあります。そのまま4D Serverが停止したり，クラッシュすることもあります。デスクトップ版ではエラーが表示されませんが，問題は再現します。データファイルサイズが8GBに達したときに起きることもあれば，37~44GBの間で発生することもあります。問題発生後，MSCには多数のエラーが報告されます。キャッシュログでは，最小空きブロック（MFB）がとても小さい（64~128MB）ことが確認できます。新規レコード作成のために内部クエリを実行しなければならないとき（たとえば，プライマリーキーなどの重複不可フィールド）にメモリーリークが発生していました。修正は，キャッシュログ（[GET MEMORY STATISTICS](http://doc.4d.com/4Dv13/4D/13.5/GET-MEMORY-STATISTICS.301-1458445.ja.html)）でike3オブジェクトのサイズで確認できます。問題を再現するために，限界までテストを実行（3日以上）しなくても良いということです。メモリーリークにより，このオブジェクトが異常におおきくなっていました。

* ACI0088047 改行コードの含まれるXML BLOBを[WEB SEND RAW DATA](http://doc.4d.com/4Dv13/4D/13.5/WEB-SEND-RAW-DATA.301-1457407.ja.html)チャンクモードで送信した場合，不正なデータが送信されました。

* ACI0088207 [HTTP AUTHENTICATE](http://doc.4d.com/4Dv13/4D/13.5/HTTP-AUTHENTICATE.301-1458476.ja.html)コマンドは，Basic認証モードで使用した場合，ユーザー名とパスワードの最大文字数が44文字程度でした。

* ACI0088223 リストポックスが含まれるフォームを続けて表示した場合，数回に一度，アプリケーションがクラッシュしました。

* ACI0088274 [ドキュメント](http://doc.4d.com/4D-Language-Reference-13.5/PHP/Executing-PHP-scripts-in-4D.300-1457238.ja.html)の指示どおり，外部PHPインタープリターを使用するためphp.iniにauto_prepend_fileとdisplay_errorsを追加したとしても，スクリプトに関数が含まれているとエラーになりました。環境変数の受け渡しに原因がありました。php.iniに『variables_order = "EGPCS"』を追加し，変数『$_ENV』を有効にすることで回避できます。修正された_4D_Execute_PHP.phpは，$_ENVの代わりにgetenv()を使用しているため，variables_orderを追加する必要は特にありません。

* ACI0088299 SQLの```LEFT JOIN```に```AND```演算子が含まれていた場合，以降が新たな条件文として解釈されました。v13における```GROUP BY```最適化の副作用でした。

* ACI0088304 改行コード（```Carriage Return```または```Line Feed```）が含まれるテキストを[WA 
EXECUTE JAVASCRIPT FUNCTION](http://doc.4d.com/4Dv13/4D/13.5/WA-EXECUTE-JAVASCRIPT-FUNCTION.301-1457214.ja.html)に渡した場合，その文字以降のテキストが渡されませんでした。

* ACI0088364 POSTリクエストに対して401（unauthorized）を返した場合，レスポンスが200になりました。GETでは問題ありません。

* ACI0088378 クイックレポートのカラムを移動した後にQR GET SORTSを使用した場合，間違った番号が返されました。

* ACI0088389 Mac版で[PHP Execute](http://doc.4d.com/4Dv13/4D/13.5/PHP-Execute.301-1457237.ja.html)コマンドを実行した後，4Dを終了し，別のユーザー名でMacにログインしたから同じことを実行しようとすると，権限エラーになりました。4DでPHPを初めて実行したとき，『_4D_EXECUTE_PHP.php』の33/46行で参照されているsession_startが sess_*という名称のセッションファイルを『/var/tmp』に作成しますが，このときカレントユーザーだけに対して『読み書き』権限を設定しているため，別のユーザーがこのファイルにアクセスしようとすると，エラーになってしまうからです。

* ACI0088422 Macの印刷設定画面『プレビューでPDFを開く』を選択してプレビューを経由した後，『プリント』ボタンをクリックした場合，次はプレビューを経由しない直接的な『プリント』クリックでもPDFが開かれました。

* ACI0088455 64ビット版の4D Server（インタープリターモード）でコンポーネントメソッドに85個以上の動的引数（C_LONGINT(${1})で宣言）を渡した場合，アプリケーションがクラッシュしました。

* ACI0088528 4DSTATS，4DHTMLSTATS，4DCACHECLEARのような管理用URLに対するアクセスは，パスワードシステムを有効にしても，DesignerとAdministratorに限定されませんでした。 

* ACI0088577 ページ2以降に配置されたサブフォーム（ウィジェット）オブジェクトは，ウィンドウをリサイズした場合，誤表示されました。修正により，ページ2以降に配置されたサブフォームオブジェクトについては，スクロールバーの存在そのものではなく，その『表示』プロパティを元にリサイズを適用するようになりました。

* ACI0088583 4DVARタグでピクチャ型の変数を処理した場合，インタープリターモードでは問題がなくても，コンパイルモードでアプリケーションがクラッシュしました。 

* ACI0088709 HTTP RequestでHTTPレスポンスコードが200（成功）なのに，完全なデータが取得できないことがありました。

* ACI0088717 WebサービスウィザードでWSDLファイルを読み込もうとすると，デザインモードがクラッシュしました。v11時代からの問題です。

* ACI0088722 SQLのEXECUTE IMMEDIATEコマンドは，コンパイルモードでメモリーリークがありました。

* ACI0088763 ビルドされたクライアントが自動アップグレードをサポートしているサーバーアプリケーションに接続した場合，それが別のアプリケーションにであっても，IPアドレスとポート番号が同じであれば，アップグレード画面が表示されました。

* ACI0088792 Windowsでリストフォームに配置されたフィールドがControl+AまたはShift+クリックでハイライト表示されたとき，背景と文字がともに白く表示され，読めないことがありました。

* ACI0088830 Mac版でリストボックスの行を上方向にドラッグし，縦スクロールが発生した場合，アプリケーションがクラッシュすることがありました。

* ACI0088849 [APPLY TO SELECTION](http://doc.4d.com/4Dv13/4D/13.5/APPLY-TO-SELECTION.301-1457748.ja.html)にテーブルの代わりにポインターがそのまま渡された場合，コンパイルでクラッシュすることがありました。修正により，『型が一致しません』エラーが正しく返されるようになりました。

* ACI0088909 重複するオブジェクト名が存在するストラクチャをv12で修復した後にアップグレードした場合，MSCが『オブジェクト名の重複』を報告しますが，これを修復するとエラーが消滅する代わりにクライアント/サーバー環境の『デザインモードを検索』で『ストリームの終端を超えた読み込みエラー（200）』が返されたりしました。v12で修復せずにアップグレードした場合，起動時にクラッシュしたり，ストラクチャ内のオブジェクトがほとんど消えたりしました。修正により，MSCで修復を実行すれば，この問題は解決できるようになりました。

* ACI0088986 Microsoftのセキュリティ更新**KB2962872**以降，特定の条件下でWebエリアがクラッシュしました。
 
**注記**: 4DではなくWindows側の修正です。KB2987107をインストールしてください。
 
2014年10月14日のMicrosoft記事も参照してください。
 
[http://support.microsoft.com/kb/2987107](http://support.microsoft.com/kb/2987107 ) 

* ACI0089034 [PICTURE PROPERTIES](http://doc.4d.com/4Dv13/4D/13.5/PICTURE-PROPERTIES.301-1458039.ja.html)から高さと幅が16ビット整数で返されました。

* ACI0089049 v12以前で作成されたスクロールエリアをコピー＆ペーストした場合，オブジェクトメソッドが複製されず，両方の配列が同じメソッドを参照しているというエラーがMSCで検出されました。同じ問題は，リストボックスを他のオブジェクト（例: ボタン）とグループした場合でも発生します。

* ACI0089340 メインディスプレイではないほうの画面（左または上，つまり座標が負の値）にリストボックスを表示した場合，ヘッダークリックイベントが発生しませんでした。

* ACI0089368 Intel社製のグラフィックカードが搭載されているWindowsマシンでは，GDIPlusのメモリ不足により，SVGの表示でアプリケーションがクラッシュすることがありました。

* ACI0089417 スクロールエリアに代わる結合リストボックスを構成する配列のひとつに値を代入した場合，その列の選択行が変わるだけで，行全体を選択することができませんでした。オフスクリーンで巨大なズーム画像（たとえば512倍）を作成した場合などに問題が発生しました。

* ACI0089423 OS Xの画面共有を使用していると，ローカルでコピーした内容がリモート側にある4Dのクリップボードに転写されませんでした。

* ACI0092413 最後に追加されたメニュー項目を削除するために位置```-1```を[DELETE MENU ITEM](http://doc.4d.com/4Dv13/4D/13.5/DELETE-MENU-ITEM.301-1458153.ja.html)に渡した場合，何も起きませんでした。

* ACI0083309 [OBJECT SET VISIBLE](http://doc.4d.com/4Dv13/4D/13.5/OBJECT-SET-VISIBLE.301-1458101.ja.html)コマンドでオブジェクトを非表示にしてから戻した場合，Tabキーで制御文字のTabコードが入力されようになりました。

* ACI0083377 日本語版のdefaultスタイルシート，また追加したスタイルシートの『Windows 7 & 8』フォント名はSegoe UIでしたが，Meiryo UIに修正されました。

* ACI0083616 リストボックスの含まれるフォームを別のフォームにドロップした場合，あるいは，先にサブフォームオブジェクトを作成しておき，『出力サブフォーム』プロパティを解除して他方のフォームをウィジェットに指定した場合，組み込みフォーム内に描画されるリストボックスのプレビューが不完全でした。フォームエディター内の問題であり，実行プロセスでは問題ありません。また，他方のフォームを再保存すれば，ウィジェットも正しく再描画されました。

* ACI0083777 サブフォーム内に表示されたリストボックスにテキスト型の列が表示されており，矢印キーで縦スクロールした場合，上に移動した最下段の行が2回繰り返して表示されました。

* ACI0084061 Windowsで特殊文字を入力するためのシーケンス（Alt+ASCIIコード）が効きませんでした。Control+Alt+番号またはCaps LockLAltK番号は問題ありません。一度，ControlまたはCaps Lockを併用して入力したは，フォームを閉じるまで通常の方法でも入力できました。

* ACI0084154 1列のリストボックスを作成し，『フッター表示』を有効にしてからフォームエディターを閉じた場合，幅が1ピクセル増えて水平スクロールバーが現れました。

* ACI0084612 クロスタブ形式のクイックレポートは，合計列のタイトルを編集することができませんでした。

* ACI0085260 v12以前のように[WEB SET HTTP HEADER](http://doc.4d.com/4Dv13/4D/13.5/WEB-SET-HTTP-HEADER.301-1457401.ja.html)コマンドで『Server』ヘッダーを上書きすることができなくなりました。問題は修正されていますが，条件があります。ドキュメントを参照してください。

* ACI0085474 システムダイアログを同一プロセスで表示した後は，On Activateフォームイベントが発生しなくなりました。問題は修正されましたが，その代わりにファイル選択ダイアログを『シートウィンドウ』モードでは表示できないようになりました。

* ACI0085535 Mac版でDOM PARSE XML SOURCEがパラメーターを含む特定のURLでクラッシュすることがありました。一旦，HTTP Getした後に[DOM PARSE XML VARIABLE](http://doc.4d.com/4Dv13/4D/13.5/DOM-Parse-XML-variable.301-1457331.ja.html)を使用すれば問題ありません。
 
* ACI0085610 何かのきっかけでウィンドウのリサイズがまったくデタラメになることがありました。ウィンドウが表示されている間にそのウィンドウのコードをトレースしていると発生するようです。Preferences v13.4DPreferencesファイルを削除すれば，解消することができます。いずれにしても，問題は修正されました。

* ACI0085645 MS SQL ServerにODBCで接続し，変数の参照（:variable）値をBegin SQL/End SQLでINSERTした場合，データの末尾に空文字がパディングされました。スタティック文字列では問題がありません。ODBC ProまたはPHPでも問題ありません。

* ACI0086310 4D Serverのデータベースをサービスに登録した後，データファイルを削除すると，コンピューター再起動時に4D Remoteで接続できなくなりました。修正により，4Dが対話型サービスとして正しくセットアップされていれば，標準の『データファイルを開く』ダイアログが表示され，起動後にサーバーが公開されることになります。Windows Server 2012やWindows 8では，『デスクトップとの対話を許可』が使用できないことに留意してください。『対話型サービスダイアログの検出サービス』が必要です。これを有効にするためには，レジストリを編集しなければなりません。

**参考**: [http://kb.4d.com/assetid=77139](http://kb.4d.com/assetid=77139)

* ACI0086401 [SET PICTURE METADATA](http://doc.4d.com/4Dv13/4D/13.5/SET-PICTURE-METADATA.301-1458025.ja.html)コマンドでJPEG画像のGPS座標（緯度の分）が正しく設定されませんでした。

* ACI0086443 同一マシン上で複数の4D Serverを起動中，一部の4D Serverだけがクラッシュした場合，同時接続ライセンス数が残りのサーバーに譲られませんでした。

* ACI0086557 問題のあるデータファイルを開いた影響により，ストラクチャレベルでテーブルのインデックス設定が失われることがありました。データベースを修復しても問題は是正されません。修正により，作成できなかったフィールドのインデックスは『無効』扱いとなり，次回，データベースを開いたタイミングで再作成されるようになりました。

* ACI0088392 古いバージョンで作成された4D Write文書など，PICT形式ピクチャをAlturaで表示するような場面でクラッシュすることがありました。

* ACI0086796 Mac版の4D Viewでスタイルシートを作成した後，フォントサイズを変更したい場合，ポップアップメニューの表示が正しくありませんでした。

* ACI0074329 ピクチャ型を返すメソッドが設定されている4D Viewのセルをダブルクリックすると，アプリケーションがクラッシュしました。

* ACI0086274 Mac版の4D Viewは，スクロールバーの表示が正しくありませんでした。

* ACI0073775 夏時間/冬時間が切り替わる当日に4D Serverが起動しており，システムが自動的に内部時計を調整するように設定されている場合，4D Serverの時間が調整されましたが，Current time(*)でクライアントに送信される時間は更新されませんでした。

* ACI0074935 エクスプローラーに表示される実数型の定数は，フランス語で小数点がカンマではなくピリオドで表示されました。

* ACI0075830 4D Popが使用されている場合，リストボックスに関連づけられた選択リストが使用できませんでした。

* ACI0075978 非表示テーブルが存在する場合，エクスポート画面（書き出し/[EXPORT DATA](http://doc.4d.com/4Dv13/4D/13.5/EXPORT-DATA.301-1458281.ja.html)）のポップアップメニューに表示されるテーブルやプレビューエリアに表示されるのはもっとも番号の若い表示テーブルですが，画面上には，間違ったテーブルのレコード数が表示されていました。設定ファイルを読み込んだ場合，プレビューエリアに表示されるフィールド名も間違っていました。

* ACI0076655 インポート画面（ファイルまたはODBC）に表示されるテーブル名は，順番に並べられていませんでした。

* ACI0078660 間違ったバージョンの4D Volume Desktopを指定してアプリケーションビルドをデザインモードで実行した場合，エラーメッセージが表示されますが，[BUILD APPLICATION](http://doc.4d.com/4Dv13/4D/13.5/BUILD-APPLICATION.301-1458435.ja.html)コマンドではビルドが続行され，エラーがログに記録されることもありませんでした。 



