4D v17 R2
---

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0098607 コンポーネントメソッド``WP_Switchtoolbar``が非表示に設定されていませんでした。非表示に設定されていない共有メソッドは，実行メニューに列挙されます。

* ACI0098384 配列型リストボックスの列に行の背景色配列が含まれている場合，``LISTBOX DELETE ROWS``コマンドで（最終行ではない）行を削除しようとすると，指定した行だけでなく，最終行も削除されました。

* ACI0098246 Mac 64ビット版およびWindows版のみ。ダイアログを表示中に``ADD RECORD``を実行し，切り替わった入力フォームでボタン（フォーカス可・タブ可）がフォーカスされた場合， ``GOTO OBJECT``を使用してテキスト入力エリアにフォーカスを移動しても，日本語入力メソッドがオフになったままでした。

* ACI0098386 日本語変換入力中に表示される下線の色がブラックに固定されていました。

* ACI0098038 日本語変換中は矢印キーでカーソルの位置を移動することができませんでした。

* ACI0098025 クリックイベントでカレントウィンドウのフォームが切り替わった直後，フォーカス可かつタブ不可に設定されたボタンオブジェクトにフォーカスが移動した場合，日本語入力メソッドが利用不可になりました。新規ウィンドウでダイアログが表示されたのであれば，問題ありません。フォーカスをタブ移動すれば，再び日本語入力メソッドが利用できるようになりますが，そのためには，フォーカスを得たオブジェクトがタブ可に設定されていなければなりません。

* ACI0098157 データベース言語が「日本語」に設定されており「旧バージョン互換のテキスト比較」が有効（デフォルト）にされている場合，長音記号が単純な記号としてではなく，母音を引き延ばす発音記号として検索されました。たとえば，「あんがーるず」の「ア」を置換または検索しようとした場合，「がー」の「ー」も「ア」と同等であるとみなされました。

* ACI0098129 ``LOAD VARIABLES``でオブジェクト型変数をロードするとアプリケーションがクラッシュしました。

* ACI0098261　``MODIFY SELECTION``で表示した出力フォームからダブルクリック操作で入力フォームに移行した場合，リストボックスのチェックボックスは（入力可であっても）入力不可であるかのように表示されました。

* ACI0098230 Windows 32ビット版のみ。ウィンドウタイプ``5``番（``Movable form dialog box``）を``Open form window``で開いた場合，最大化することができませんでした。64ビット版では問題ありません。サイズ固定を有効にするか，画面サイズいっぱいのサイズをプロパティで設定すれば，そのサイズまでウィンドウを"最大化"することができます（もっともほんとうの意味での最大化ではありません）。

**注記**: ドキュメントの記載が間違っていました。Windowsプラットフォームでウィンドウタイプ``5``番が最大化できるのは，64ビットだけです。

* ACI0097836  ``WRITE PICTURE FILE``コマンドにオブジェクトのピクチャ型プロパティを渡すと，コンパイルモードで『ポインターが正しく初期化されていません』エラーが返されました。`` PICTURE TO BLOB``や``CREATE THUMBNAIL``でも同じ問題が発生します。

---

* ACI0097823 プリエンプティブモードで``RESOLVE POINTER``を実行すると，空の文字列が返されました。

* ACI0098163 セレクション型のリストボックスに『サブレコード追加』標準アクションでレコードを追加し，セルにタイプ入力したテキストが未確定の状態で再びレコード追加を実行すると，編集中だったセルの値が新規レコードのセルに引き継がれました。

* ACI0098213 Windows版のみ。``HTTP Get``コマンドで特定のURLにアクセスするとエラー#30（``HTTP Server unreachable``）が返されました。

* ACI0098277 環境設定でフォームエディターにデフォルトで表示されるバッジを変更した場合，エディターのツールバーに表示されるアイコンが選択されているバッジと合わないことがありました。たとえば『オブジェクトメソッド』のバッジが選択されているのに『標準アクション』のアイコンが表示されました。

* ACI009838832ビット版のみ。旧バージョンでは問題なかった，サードパーティ社製のプラグインコマンドを使用すると，終了時にアプリケーションがクラッシュしました。

**注記**: 別スレッドからプラグインSDKをコールしてハンドルを作成していることが原因です。返されたエラーコードを無視して無効なハンドルを使用しているためにクラッシュしています。修正により，別スレッドでもプラグインSDKをコールしてハンドルを作成することができるようになりました。

* ACI0097889 4D Writeプラグインで作成した文書（``4W7``）を4D Write Proで開いた場合，読み込みに時間がかかりました（``0.2``秒だったものが``0.4``秒に）。

* ACI0098363 デザインモードの『未使用のローカル変数を検索』メニューを実行した場合，コレクション型およびオブジェクト型の変数が検出されませんでした。

* ACI0094811 コマンドで作成したメニューバーに対して``RELEASE MENU``をコールしなかった場合，アプリケーションが終了時にクラッシュしました。

* ACI0094683 2個以上の要素を有する配列を使用し，インデックスが設定されたフィールドに対して``QUERY WITH ARRAY``を実行した場合，ワイルドカード文字（``@``）がヌルまたは空の文字列に対して効かず，該当する位置に少なくとも1個は文字がなければなりませんでした。インデックスが設定されていなければ問題ありません。

* ACI0097388 デザインモードの『未使用のローカル変数を検索』メニューを実行した場合，BLOB配列，オブジェクト配列，時間配列は検出されませんでした。

* ACI0097381 Mac 32ビット版のみ。``SET CURRENT PRINTER``が初回は効きませんでした（「すべてのプリンター」の設定が有効になりました）。2回目以降の印刷は問題ありません。

* ACI0097252 Windows 64ビット版のみ。ビルドしたクライアントアプリケーションをタスクバーにピン留めし，``0.8``秒以下の短い間隔で連続クリックすると，アプリケーションが二重に起動し，両方でエラーが返されました。ゆっくり操作すれば，二重に起動することはなく，また起動したインスタンスでサーバーに接続できます。

* ACI0096866 デフォルトユーザー設定が有効にされている場合，``CHANGE CURRENT USER``で切り替えたユーザー名ではなく，デフォルトのユーザー名が``LOCKED BY``から返されました。

* ACI0096656 ``IMAP_Search``を使用して``Message-ID``ヘッダーでメッセージを検索した場合，対象になるはずのメッセージが結果に含まれないことがありました。

* ACI0096115 ``On Server Startup``データベースメソッドで``SET MENU BAR``コマンドを実行すると，サーバーがクラッシュしました。

* ACI0095913 スタイル付きテキストの``<span>``の中では``text-align``属性が無視されました。

* ACI0097668 32ビット版のみ。空の``4LB``ファイルをラベルエディターで開いた場合，アプリケーションがクラッシュしました。

* ACI0097633 64ビット版のみ。ラベルエディターで``&``または``%``記号をはさんでフィールドを連結した場合，文字のフォント色が赤になりました。

* ACI0097983 Windows版のみ。サービス起動したサーバーアプリケーションは，クライアント側のサーバー管理画面（アプリケーションサーバー）の「サービス起動」が常に「いいえ」と表示されました。

* ACI0097975 オブジェクトから作成されたダイナミックフォームの実行コンテキストで``Current method name``を実行した場合，``untitled``という文字列が返されました。

* ACI0097966 64ビット版のみ。ラベルエディターの用紙設定で「横向き」を選択しても，縦向きのドキュメントがプリントアウトされました。

* ACI0097964 32ビット版のみ。データベースがアプリケーションモードで開始され，スプラッシュ画面が非表示で，アプリケーションプロセスに``SET MENU ITEM``でメニューバーが設定された場合，新規プロセスで開かれたフォームは，設定された連結メニューバーの編集メニューが効きませんでした。

* ACI0097938 Windows Server 2008 R2，Windows Server 2012のみ。特定のマシンでは``Graphics.dll``が原因でアプリケーションがクラッシュしました。

* ACI0097932 Mac版のみ。PDF画像を印刷した場合，``OPEN PRINTING JOB``および``CLOSE PRINTING JOB``コマンドでメモリーリークが発生しました。プリントジョブを終了しても，プロセスを終了するまでは印刷で使用したメモリが解放されないため，同一プロセス内で大量のページ数を印刷した場合，アプリケーションがクラッシュする恐れがありました。

* ACI0097912 クライアント/サーバー通信の暗号化が有効にされており，データベース設定でアプリケーション開始時にWebサーバーが自動的に起動するように設定されていた場合，中間証明書のチェーンが不完全となり，セキュリティ評価が下がりました。メニューやコマンドでWebサーバーを起動した場合には問題ありません。

* ACI0097895 クエリエディターでフィールドリストの項目を上下矢印キーで選択した場合，縦スクロールが効かず，表示されたリストの外にあるフィールドを選ぶことができませんでした。

* ACI0097866 SQLで4Dメソッドを呼び出した場合，ランダムにアプリケーションがクラッシュすることがありました。

**注記**:キャッシュがいっぱいになると，キャッシュの10%（デフォルト値）が強制的にパージされ，データフラッシュが発生します。このとき，データベース設定の「インタフェース」で「フラッシュの進捗状況」が有効にされていると，「ディスク書き込み」ダイアログが表示されます。このローカライズが``XLIFF``ではなく，``RSR``ファイルに由来していたため，プリエンプティブスレッドで実行されているSQLコードからスレッドセーフではないAltura Mac2Win（``ASINTPPC.dll``）のAPIが呼ばれていたことが原因でした。

* ACI0097864 システムの日付フォーマットが「ベルギー/ドイツ語（``DD-MM-YYYY``）」に設定されている場合，4Dの日付フォーマット``System date short``は年が2桁しか表示されませんでした。

* ACI0097853 リストボックスが表示されているウィンドウから，同じフォームを続けてダイアログ表示した場合，入力不可のブール型カラム（チェックボックス表示）が入力可であるかのように描画されました。

* ACI0097690 ``String``の引数として，直接，``Sum``, ``Min``, ``Max``などの統計関数を渡した場合，エラー``54``（引数の型が一致しません）が返されました。``*1``や``+0``などの演算子を添えて式の型を特定すれば問題ありません。

* ACI0098321 Mac版のみ。ビルドしたサーバー版アプリケーションでMSCの検査を実行すると，クラッシュする場合がありました。ビルドしたデスクトップ版やインタープリターモードでは問題ありません。

* ACI0098269 クライアント側で``CHANGE CURRENT USER``を実行しても，サーバー側の管理画面には（何時間経過しても）カレントユーザーの変更が反映されませんでした。

* ACI0098264 Windows 10 アップデート ``1803``以降，サービスとして登録された4D Serverの起動時にエラー``193 0xC1``が返されるようになりました。ビルドして署名したサーバーアプリケーションをサービスとして起動した場合にだけ問題が発生します。

* ACI0098253 ``&``の文字が含まれているSVG画像を``SVGTOOL_show_in_viewer``メソッドで開いた場合，エラー`` -20002``が返されました。

* ACI0098237 ``SEND RECORD``で書き出したv2004のレコードをv14以降の``RECEIVE RECORD``で読み込もうとした場合，アプリケーションがクラッシュしました。

* ACI0098236 Windows版のみ。Microsoftの[自己署名証明書](https://msdn.microsoft.com/en-us/library/windows/desktop/jj835832.aspx)を発行して[署名ツール](https://msdn.microsoft.com/en-us/library/aa387764.aspx)で64ビット版のOEMサーバーアプリケーションを署名することができませんでした。

* ACI0098223 定数``OCI_STMT_DECLARE ``の値が正しくありませんでした。``39``ではなく``9``であるべきです。

* ACI0098194 リストボックス列の幅をフォームエディターのプロパティリストに入力した後，そのリストボックスの位置やサイズを変更すると，列の幅に加えた変更が失われました。ビルド``221608``で問題が発生しました。

* ACI0098188 コンパイルモードで``Min``や``Max``などをレコードに対して使用して戻り値をポインターで逆参照された変数に代入した場合，ポインターによるタイプの再定義エラーが返されました。配列に対して統計関数を使用した場合には問題ありません。

* ACI0098184 4D Write文書に埋め込まれた``Num(...) * "..."``のような式は，4D Write Proに変換した後，正しく評価されませんでした。

* ACI0098179 64ビット版のみ。ファイルメニューの「データをファイルに書き出し」で表示されるダイアログは，自動リレーションに対応していませんでした。リレートテーブルを選択しても，マスターテーブルのフィールドが表示されました。

* ACI0098178 64ビット版のみ。``IMPORT DATA``の第1引数に空の文字列（``""``）が渡した場合，ファイル選択ダイアログが表示されませんでした。

* ACI0098002 Windows版のみ。フォームを何度も開いたり，閉じたりしていると，メニューバーが解放されるタイミングでアプリケーションがクラッシュする場合がありました。

* ACI0097994 4D Serverのライセンス（Team Developer Professionalではない）でクライアント側でシンタックスチェックや変数定義の生成を実行した場合，完了を伝えるメッセージがコンパイラー画面に表示されませんでした。

* ACI0097992 Windows版のみ。4D Write ProでTrue Typeフォントが使用できませんでした。

* ACI0097986 コンパイルモードで``SET ASSERT ENABLED``に``False``を渡した場合，カレントプロセスだけに設定が適用され，セッション全体に適用されませんでした。

* ACI0097984 アプリケーションプロセスが延期されている状態で，サーバー管理画面でユーザーをドロップした場合，クライアント側で「接続が切断されました。深刻なエラー」メッセージが表示されました。

* ACI0098063 64ビット版クイックレートエディターのタイトルに``n``の文字をタイプ入力すると，「レポートを開く（ファイル選択）」ダイアログが表示されました。

* ACI0098042 4D RemoteでWebサーバーを実行した場合，他のプロセスとの競合により，デッドロック状態に陥ることがありました。Webプロセスを初期化するときに4D Serverのユーザー＆グループ管理システムを同期させる方法に問題がありました。

* ACI0098107 4D Write Proでコンテキストメニューから用紙のサイズや方向を変更した場合，該当するコンテキストメニュー項目にチェックマークが表示されませんでした。

* ACI0098098 フランス語版は定数``Web Client IP address to listen``がローカライズ（``Web client adresse IP d’écoute``）されていませんでした。

* ACI0098094 日付配列に対して``Min``や``Max``などの統計関数が使用されていた場合，コンパイラーからエラーが返されました。

* ACI0098079 外部ファイルにレコードが保存されるようにフィールドのプロパティを設定した場合に問題がありました。レコードを削除してもファイルが自動的に削除されません。また，100件毎にサブフォルダーが作成されませんでした。

* ACI0098128 4D Write Proの文章の背後に表示されたピクチャーを``command``+クリック操作で選択することができませんでした。

**注記**: 問題はテキストのボディ部分に``id``が設定されている場合に発生しました。つまり，4D Write Proのボディに``img1``という``id``を設定し，その背後にピクチャを追加した場合，ピクチャを選択することができませんでした。

* ACI0098127 データベース設定の『Web』ページで，待ち受けIPアドレスを指定してからWebサーバーを開始したとしても，実際には『任意』，つまりすべてのIPアドレスでリクエストを受信しました。そのため，別のIPアドレス/同じポート番号で他のサーバーを起動することができず，また他のサーバーがすでに起動している場合は4DのWebサーバーを起動することができませんでした。``WEB SET OPTION``あるいは``SET DATABASE PARAMETER``で``Web IP address to listen``を指定しても結果は同じです。

* ACI0098149 プリエンプティブモードで実行中のプロセスをランタイムエクスプローラーで選択し，変数を表示させようとすると，アプリケーションがクラッシュしました。プリエンプティブモードで実行されているワーカーなどのプロセス変数は（外部から参照できない以上）入力されても無視されるべきです。

* ACI0098136 オブジェクト記法が有効にされているデータベースでシンタックスチェックまたは型定義メソッドの作成を実行した場合，アプリケーションがクラッシュすることがありました。

```
If (True)	
	TEST (${1};${2};${3}) 
End if
 ```
 
* ACI0098165 16.3以前に作成したWrite Pro文書のレコードを16R6以降で開いた場合，オブジェクトの中に属性が2個ずつ作成されました。

* ACI0098400 Mac版のみ。ハイパーリンクが設定された文章をテキストエディットからコピー＆ペーストした場合，ハイパーリンクのURLとスタイルが継承されませんでした。

* ACI0098393 ``OB SET ARRAY``コマンドを4D Write Proオブジェクトに対して使用すると，アプリケーションがクラッシュすることがありました。

``注記**: 問題は，レンジオブジェクトをWrite Pro文書のカスタムプロパティとして保存しようとしたときに発生します。レンジオブジェクトは，Write Pro文書に対する参照なので，そのまま挿入しようとすると，再帰的な参照になってしまいます。ですから，そのような操作は許されていません。テキストの範囲を文書に記録したい場合，レンジオブジェクトではなく，開始位置と終了位置からなる単純なオブジェクトを作成して挿入するようにしてください。Write Proオブジェクトを元のWrite Pro文書オブジェクトに保存することはできません。

* ACI0098408 64ビット版のみ。ラベルエディターにピクチャーフィールドをドラッグ＆ドロップして追加した場合，初回の印刷プレビューでエラーが返されました。エディターを閉じて，同じ操作をもう一度繰り返した後，画像が表示されるようになります。

* ACI0098356 4D Write文書をWrite Proに変換した場合，タブ処理が正しく変換されないことがありました。カスタマイズされたデフォルトのタプ位置や，リスト項目の絶対タブ位置のレンダリングが間違っていました。

* ACI0098260 Windows版のみ。XPSビューアがインストールされていない場合，漠然としたランタイムエラーが返されました。

**注記**: Windows 10 1803以降，XPSビューアはデフォルトでインストールされないようになりました。1709以前のバージョンでも，アンインストールすることができます。修正により，『ファイルがみつかりません』ではなく，『XPSビューア（ドライバー）がインストールされていません』というメッセージが返されるようになりました。

* ACI0098175 画像を返すプロジェクトメソッドが式として埋め込まれた4D Write文書をWrite Proに変換した場合，画像ではなく，``0 octets``という値が挿入されました。

* ACI0098036 32ビット版のみ。ラベルエディターでレイアウトを``4LB``形式で書き出した場合，空のファイルが作成されました。

* ACI0097865 空の文字列を返すプロジェクトメソッドを式として4D Write Proに埋め込んだ場合，``Length``が``0``ではなく``1``の文字列が挿入されました。

**注記**: 式は，スタイルテキスト内で選択範囲として指定できるよう，常に長さが``1``以上でなければなりません。式が空の文字列を返した場合，スタイル付きテキストやWrite Pro文書の中では空白文字に置換され，長さが``0``にならないようになっています。修正により，新コマンドの``WP Get text(...;wk expressions as value)``および``ST Get plain text(...;ST 4D Expressions as values)``をWrite Pro文書に対して使用した場合には，空白ではなく，空の文字列が返されるようになりました。また，画面上や印刷でも空白ではなく，空の文字列が出力されるようになりました。互換性を保持するため，スタイル付きテキストの処理は変更されていません。

* ACI0098446 4D Write文書を4D Write Proに変換した後，そのレコードを開こうとすると，アプリケーションがクラッシュすることがありました。コマンドで変換するのではなく，4D Writeから4D Write Proにコピー＆ペーストすれば，問題ありません。

* ACI0098169 コレクション型のリストボックスにオブジェクト型フィールドの属性値を表示した場合，列ヘッダーをクリックすると，並び替えが実行される代わりにエラーが返されました。

* ACI0098331 別のインスタンスで開かれたデータベースを開こうとすると，『READ ONLYモードで開きますか』警告ダイアログが表示されますが，これをキャンセルすると，アプリケーションがクラッシュしました。

* ACI0098294 ``WRITE PICTURE FILE``コマンドにオブジェクトのピクチャ型プロパティを渡すと，コンパイルモードで『ポインターが正しく初期化されていません』エラーが返されました。`` PICTURE TO BLOB``や``CREATE THUMBNAIL``でも同じ問題が発生します。

* ACI0097960 SQLサーバーをTLSモードで開始した場合，ODBCドライバーを使用して接続することができませんでした。

* ACI0097951 ``WEB Get server info``から返される情報にカレントセッションのIPv6アドレスが含まれていませんでした。IPv4およびIPv6の両方が返されるべきです。

* ACI0097724 64ビット版のみ。``SET MENU BAR``コマンドを使用すると，エラーが返されることがありました。

**注記**: 64ビット版の場合，ツールボックスのメニューエディターで作成したメニューに対して実行した``Get menu bar reference``から返されるメニュー参照は一時的なものであり，``SET MENU BAR``で別のメニューがインストールされると無効な参照になります。そのようなメニューを再利用するのであれば，``Create menu``で明示的にメニューをコピーして返された参照を使用する必要があります。

* ACI0097579 ``WP SET ATTRIBUTES``で4D Write Pro文書ヘッダーの左マージンを設定すると，他のマージン設定が失われ，右マージンを設定すると左マージンの設定が失われました。

* ACI0097501 同じサブオブジェクトに対する複数の参照が含まれるオブジェクト型フィールドをデータベースに保存したり，``VARIABLE TO BLOB``でバイナリ形式に変換したり，『サーバー上で実行』メソッドプロパティを介してクライアント/サーバー間で転送したりすると，多重に参照されたサブオブジェクトがそれぞれ別個のオブジェクトになりました。

**注記**: 修正により，再帰的な参照や多重に参照されたオブジェクトやコレクションの処理がバイナリ変換でも検出されるようになりました。

* ACI0095430 ``SVG_New_Text``に``CR LF``を含む文字列を渡すと，エラー``-9760``が返されました。``CR``あるいは``LF``だけでは問題が発生しません。

* ACI0098275 再帰的な参照が含まれるオブジェクト型フィールドをデータベースに保存することができません。エラー#``900``が返されました。

**注記:** デバッガに表示されるのは，再帰的な参照をサポートしていない``JSON Stringify``の戻り値なので，エラーとなります。

* ACI0098161 ``QUERY BY ATTRIBUTE``あるいは``QUERY SELECTION BY ATTRIBUTE``に比較演算子の``>=``または``>``を渡してインデックスが設定されたオブジェクト型フィールドをクエリした場合，オブジェクトのパスに指定した属性値がオブジェクトであるレコードが存在すると，正しい結果が返されませんでした。

* ACI0098135 デバッガウィンドウのウオッチ式に（存在しなくなった）セット名が登録されている場合，``TRACE``コマンドを実行すると，アプリケーションがクラッシュしました。

* ACI0098012 Windows版のみ。4D Write ProエリアにSVG画像を挿入するとエリアが表示されなくなりました。

**注記**: どんなSVG画像でも問題が発生するわけではありません。``path``要素の``d``属性が未定義あるいは空のときにDirect2Dの例外が投じられてレンダリングが中断されるのが原因です。

* ACI0097980 オブジェクト記法が有効にされているデータベースをv17にアップグレードすると，『メソッドをUnicodeで保存する』データベース設定が互換性ページに表示されなくなりました。新しい設定を有効にするまで，古い設計は互換性ページに表示されるべきです。

* ACI0098109 4D View Proエリアをスクロールし，最後の行または列まで移動すると，ブラックあるいはグレーの背景色が表示されました。余剰行の背景色は，4D View Proエリアのデフォルト背景色と同じであるべきです。

* ACI0098075 ドット記法が有効にされたデータベースで，オブジェクト型のプロパティを引数として受け取るメソッドをフォーミュラにしてクライアント/サーバー版で``QUERY BY FORMULA``を実行すると，アプリケーションがクラッシュしました。

```
C_OBJECT($voObjet)
$voObjet:=New object
$voObjet.vdDate:=!2018-01-01!
QUERY BY FORMULA([Table_1];([Table_1]Champ_2>sousmethode ($voObjet.vdDate)))
```

* ACI0098062 Mac版のみ。High SierraあるいはSierraでクライアント/サーバー版のアプリケーションを開くと，``Library/Cache/4D/{データベース名}/Resources``にトップレベルのリソースフォルダーがコピーされませんでした。

* ACI0098037 インデックスが設定されたオブジェクト型フィールドの属性に対して``Sum``を実行すると，以降，データベースを再起動するまで，``QUERY BY ATTRIBUTE``によるインデックスを使用したクエリの結果が間違ったものになりました。その状態で新規レコードを作成すると，再起動後もインデックスが壊れたままになります。

* ACI0098031 ``QUERY BY ATTRIBUTE``で時間型の属性をクエリした場合，オブジェクト型フィールドにインデックスが設定されていないと，正しい結果が返されませんでした。インデックスを使用したクエリでは問題ありません。

* ACI0098480 ``QR RUN``コマンドでテキスト形式のクイックレポートを出力した場合，システム変数の``FldDelimit``および``RecDelimit``ではなく，既定の区切り文字（``Tab``および``Carriage return``/Windows版は``CR LF``）が使用されました。

* ACI0098389 Word文書から4D Write Proにテキストをコピー＆ペーストした後，ウィジェットの『マージンとスタイル』タブをクリックすると，エラーが返されることがありました。

**注記**: コマンドで行の高さ数値型で取得しようとした場合にエラーが返されることがあるのは仕様です。高さは割合（例：``100%``）あるいは単位（例：``12pt``, ``0.1pt``, ``0.8cm``）で設定することができるからです。ドキュメントの単位とカレント行の単位が合わない場合にはエラーが返されます。なお，行の高さ（数値）を計算するために一時的であっても文書の単位を変更するべきではありません。単位はルーラーなどのユーザーインタフェースでも使用されており，変更すれば，ドキュメントの最終変更日も更新されます。行の高さが数値で欲しいのであれば，一時的なドキュメントを作成し，行の高さを文字列で設定した後，エラーハンドリングをインストールした上で，パーセントおよび``cm``などの単位を指定して数値型で取得を試みることができます。

* ACI0098117 ``IMAP_Search``でアプリケーションがクラッシュする場合がありました。ACI0096656修正の副作用です。リクエストが長すぎる場合，サーバーに拒否されることがあります。修正により，クラッシュする代わりに，エラーが返されるようになりました。

* ACI0098208 文字列の位置を指定する添字``[[$index]]``を文字列定数に対して使用した場合，コンパイルでエラーが返されました。文字列定数の代わりに変数を使用すれば問題ありません。

* ACI0098547 クライアントサーバー版のみ。出力フォームにレコードを表示し，フォームをスクロールしたり，リサイズしたりするたびに，メモリーリークが発生しました。

* ACI0098509 クライアントサーバー版のみ。「4D Mobileで公開する」プロパティが設定されていないテーブルの1対Nリレーション属性にアクセスすると，『``{EntityModelName}``データストアクラスの``Param1``属性がみつかりません』というエラーが返されました。

* ACI0098348 クライアント/サーバー版のみ。外部ユーザー設定ファイルが有効にされたアプリケーションで，SQLのTLSを有効にした場合，ダイアログには新しい設定が正しく表示されますが，再起動後，SQLを実行すると，接続エラーが返されました。SQLのTLSモードは，ストラクチャ設定でなければ，有効にすることができませんでした。

* ACI0098565 未定義のオブジェクト型プロパティなど，``undefined``をコンパイルモードでテキスト型に代入した場合，何も代入されませんでした。インタープリターモードのように，空の文字列が代入されるべきです。

* ACI0098406 ``LISTBOX INSERT COLUMN``の実行速度がバージョン2004から16との比較でかなり落ちました（30倍）。フッターのオブジェクト名を明示的に指定すれば，問題が発生しません。

**注記**: フッターに重複しないオブジェクト名を内部的に割り当てるため，``footer1``, ``footer2``といった具合に空いている番号がテストされていました。修正により，最後に使用された番号がキャッシュされ，その番号からテストが再開されるようになりました。結果として，列の削除によって番号が空いたとしも，その番号は再利用されないことになります。できるだけで高速に一意のオブジェクト名を割り当てることが重視されています。

* ACI0098401 リストボックス列の『自動行高』プロパティが有効にされている場合，``EDIT ITEM``や``OBJECT SET SCROLL POSITION``で目的の行まで正しくスクロールしませんでした。

* ACI0098035 Windows版のみ。リストボックスのプロパティで『行の移動』と『ドラッグ＆ドロップ』の両方が有効にされている場合，行の移動ができませんでした。

* ACI0098645 ``OBJECT Get style sheet``は，オブジェクトに設定されたスタイルシートではなく，スタイルシート0番を常に返しました。

* ACI0097596 Windows版のみ。Webエリアが表示されているフォームページから別にページに切り替えた場合，フォーム上のテキスト入力エリアに文字を入力することができませんでした。アプリケーションを最前面から外し，復帰した後であれば，再び入力ができるようになります。一部のWebページで問題が発生するようです。WebKit版のWebエリアでは問題が発生しません。

**注記**: 統合CEF版のWebエリアだけが修正されました。

* ACI0098162 実行メニューまたは``WEB START SERVER``コマンドを使用してクライアント側のHTTPサーバーを起動することができませんでした。有効なライセンスが認識されていないようです。

* ACI0098593 フランス語版のみ。新規モバイルアプリを作成し，データベースを公開すると，``SERVER_OBJECTS_HANDLER``メソッドでエラーが返されました。自動的に生成されるデータベースメソッドのコードが，フランス語モードのランゲージに対応していませんでした。

* ACI0098579 コンパイルモードでピクチャに対する逆参照されたポインターに対して``Null``を代入することができませんでした。

* ACI0098572 Mac版のみ。オペレーションシステムがインストールされていないボリュームに4Dがインストールされている場合，iOSアプリのビルドに必要なSDKがセットアップされませんでした。

**注記**:  SDKは，下記の場所にインストールされます。

```
システムボリューム/library/caches/com.4d.mobiles/sdk
```

* ACI0098662 Mac版のみ。『データベースを開く』ダイアログの『オプション』ボタンをクリックし，『開く』ポップアップメニューをクリックすると，Item 1, Item 2…といった項目が表示されました。

* ACI0098511 クライアント/サーバー版のみ。コレクション型のリストボックスをダブルクリックし，切り替わった詳細フォームでレコードを編集して元のフォームに復帰した場合，更新された値がリストボックスに反映されませんでした。セレクション型のリストボックスでは問題ありません。

* ACI0098447 Mac版のみ。macOS 10.12 Sierraでは，新しいHelper Toolがインストールできませんでした。管理者パスワード入力ダイアログは表示されず，『ツールのインストール中にエラーが発生しました』という内容のメッセージが表示されました。Helper Toolは，実行メニューまたは``WEB START SERVER``コマンドを使用すると，必要に応じてアップデートされます（起動時にサーバーを開始するように設定されている場合はアップデートされません）。

* ACI0098526 ORDAでNフィールドに相当するリレーション属性を更新しようとすると，指定した値ではなく，``Null``が代入されました。値を確認して，もう一度，同じ値を代入すれば，今度は成功します。あるいは，値を代入する代わりに，1レコードに相当するエンティティを代入すれば，問題を回避することができます。

* ACI0098513 コード補完リストにキーワードの``While``が表示されませんでした。

* ACI0098481 クライアント/サーバー版のみ。ORDAの``fromCollection()``に渡されたプライマリーキーが1フィールドに相当するデータクラスに存在しない場合，新規エンティティが作成され，そのプライマリーキーには``Null``が代入されました。この場合，新規エンティティは作成されるべきではありません。

```
C_OBJECT($dataclass1;$result)
$dataclass1:=ds.IA_employee

$t1_Collection:=New collection
$t1_obj:=New object
$t1_obj.ID:=7
$t1_obj.employer:=New object()
$t1_obj.employer.ID:=10 //doesn't exist in the dataclass "IA_company"
$t1_obj.firstName:="Zoro"
$t1_Collection.push($t1_obj)
$result:=$dataclass1.fromCollection($t1_Collection)
ASSERT(Undefined($result[0].employer);"employer should not be created")
```

* ACI0098054 共有コレクションに共有オブジェクトを追加し，``Use``/``End use``構文の中でその共有オブジェクトをロックした状態で``New process``を使用して起動したプロセスをデバッグしようとすると，デバッガウィンドウがフリーズしました。
