4D v17.1
---

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0098645 ``OBJECT Get style sheet``は，オブジェクトに設定されたスタイルシートではなく，スタイルシート0番を常に返しました。

---

* ACI0098035 Windows版のみ。リストボックスのプロパティで『行の移動』と『ドラッグ＆ドロップ』の両方が有効にされている場合，行の移動ができませんでした。

* ACI0098390 ``IMPORT TEXT``またはインポートダイアログを使用して実数またはFloat型フィールドにテキストデータを読み込んだ場合，スペース記号など，数字ではない文字がデータの前後に存在すると，``0``がインポートされました。整数・倍長整数・64ビット整数では問題ありません。

* ACI0098401 リストボックス列の『自動行高』プロパティが有効にされている場合，``EDIT ITEM``や``OBJECT SET SCROLL POSITION``で目的の行まで正しくスクロールしませんでした。

* ACI0098406 ``LISTBOX INSERT COLUMN``の実行速度がバージョン2004から16との比較でかなり落ちました（30倍）。フッターのオブジェクト名を明示的に指定すれば，問題が発生しません。

**注記**: フッターに重複しないオブジェクト名を内部的に割り当てるため，``footer1``, ``footer2``といった具合に空いている番号がテストされていました。修正により，最後に使用された番号がキャッシュされ，その番号からテストが再開されるようになりました。結果として，列の削除によって番号が空いたとしも，その番号は再利用されないことになります。できるだけで高速に一意のオブジェクト名を割り当てることが重視されています。

* ACI0098507 64ビット版のみ。サーバー側で``MSG_Charset``および``MSG_GetBody``を使用した場合，特定の組み合わせ（``1;1``, ``0;1``）でアプリケーションがクラッシュしました。``MSG_Charset``を使用しなければ問題ありません。

* ACI0098559 クライアント/サーバー版のみ。ORDAでWrite Proオブジェクトが保存されたフィールドにアクセスした場合，不完全なオブジェクトが返されました。シングルユーザー版では問題ありません。

* ACI0098599 ORDAクエリの照合文字列にシングルクオート記号が含まれている場合（例：``Levi's``），クライアント/サーバーモードでエラー``1806``「正しく整形されてないURLです」が返されました。シングルユーザーモードでは問題ありません。

* ACI0098624 Write Pro文書のテーブル（表組み）レンジに対し，``wk font bold``のようなテキスト属性を設定した場合，``range.start``と``range.end``の間にある文字列だけに適用されました。テーブルレンジが指定されたのであれば，テーブル全体に対して属性が適用されるべきです。

* ACI0098626 リレートフィールドに対するインデックスORDAクエリを``IN``条件で実行した場合，結果が正しくありませんでした。``IN``条件を指定しなかった場合，あるいはインデックスを使用しなかった場合は問題ありません。

* ACI0098522 標準アクションを使用してカレントレコードを移動すると，別ページに配置されたプラグインエリアに対してもレコードがロードされたというイベントが配信されました。カレントページのアクティブなエリアだけがイベントを受け取るべきです。

* ACI0098526 ORDAでNフィールドに相当するリレーション属性を更新しようとすると，指定した値ではなく，``Null``が代入されました。値を確認して，もう一度，同じ値を代入すれば，今度は成功します。あるいは，値を代入する代わりに，1レコードに相当するエンティティを代入すれば，問題を回避することができます。

* ACI0098538 クライアント/サーバー版のみ。``newEntity()``で作成したエンティティの属性は，すべて``Null``でした。タイプに応じたデフォルト値がセットされるべきです。

* ACI0098642 ``IMPORT TEXT``コマンドでテキスト型のフィールドに値をインポートした場合，文字列の前後にあるスペース文字が切り捨てられました。

* ACI0087085 外部アプリケーションから``tab``コードが含まれる文字列をメソッドエディターにドラッグ＆ドロップあるいはコピー＆ペーストすると，``tab``文字が無視されました。

**注記**: 修正により，文字列リテラルに挿入された``tab``コードなどの文字は``\t``のようなシーケンスにエスケープされるようになりました。

* ACI0098430 『デザインモードを検索』ダイアログの『タイプ』ポップアップメニューで『プラグインコマンド』を選択した後，『名前』を『等しい』から別の値に変更しようとすると，ダイアログが閉じられました。

* ACI0098511 クライアント/サーバー版のみ。コレクション型のリストボックスをダブルクリックし，切り替わった詳細フォームでレコードを編集して元のフォームに復帰した場合，更新された値がリストボックスに反映されませんでした。セレクション型のリストボックスでは問題ありません。

* ACI0098551 Windows 64ビット版のみ。``ntdll.dll``モジュールが原因でアプリケーションがクラッシュすることがありました。

* ACI0098619 ``PA_SetBlobParameter``をプリエンプティブモードで使用することができませんでした。

* ACI0098620 ``PA_Get4DVersion``をプリエンプティブモードで使用することができませんでした。

* ACI0098579 コンパイルモードでピクチャに対する逆参照されたポインターに対して``Null``を代入することができませんでした。

* ACI0098102 ``DIALOG``コマンドでWebエリアが配置されたフォームを別ウィンドウに表示した場合，そのフォームで``CANCEL``コマンドを使用すると，呼び出し元のダイアログが閉じられました。フォームメソッドでWebエリアのURL変数にアドレスを代入すれば問題ありません。また，別ウィンドウのダイアログを表示する直前にブレークポイントを挿入すれば，問題は再現しません。

* ACI0098405 ``Open Window``あるいは``Open form window``で開いたウィンドウに表示された文字列を``MESSAGE``コマンドで更新することができませんでした。

* ACI0098481 クライアント/サーバー版のみ。ORDAの``fromCollection()``に渡されたプライマリーキーが1フィールドに相当するデータクラスに存在しない場合，新規エンティティが作成され，そのプライマリーキーには``Null``が代入されました。この場合，新規エンティティは作成されるべきではありません。

```
C_OBJECT($dataclass1;$result)
$dataclass1:=ds.IA_employee

$t1_Collection:=New collection
$t1_obj:=New object
$t1_obj.ID:=7
$t1_obj.employer:=New object()
$t1_obj.employer.ID:=10 //doesn't exist in the dataclass "IA_company"
$t1_obj.firstName:="Zoro"
$t1_Collection.push($t1_obj)
$result:=$dataclass1.fromCollection($t1_Collection)
ASSERT(Undefined($result[0].employer);"employer should not be created")
```

* ACI0098657 4D Serverに対して200ユーザーを接続するのに20分を要しました。

**注記**: 接続に要する時間を短縮するために，管理画面を非表示することが勧められています。

* ACI0098677 フランス語版のみ。関数のパラメーターを省略した場合（例：``function (;;)``）コンパイラーに空のエラーメッセージが表示されました。

* ACI0098054 共有コレクションに共有オブジェクトを追加し，``Use``/``End use``構文の中でその共有オブジェクトをロックした状態で``New process``を使用して起動したプロセスをデバッグしようとすると，デバッガウィンドウがフリーズしました。

* ACI0098399 Mac 32ビット版のみ。大量（例：３時間で19万件）のSOAPリクエストを処理すると，サーバーがクラッシュすることがありました。ACI0097539とは別の問題です。管理画面を表示した状態で放置すれば，より短時間でアプリケーションがクラッシュします。

* ACI0098497 4D Serverのデータベース設定ダイアログに``2048 MB``以上のキャッシュサイズを入力して『適用』ボタンをクリックした場合，キャッシュサイズが正しく設定されませんでした。``SET CACHE SIZE``であれば問題ありません。

* ACI0098558 Mac 64ビット版のみ。新規プロセスで開かれたウィンドウを``INVOKE ACTION``の標準アクションで閉じた場合，すぐにはウィンドウが閉じられませんでした。

* ACI0098580 Windows版のみ。連続してシーケンシャルクエリを実行した後，サーバーの管理画面やメニューの反応が悪くなりました。
 
* ACI0098673 Mac 32ビット版のみ。コードでビルドしたメニューバーをスタートアップでインストールした場合，アプリケーションモードに切り替わるタイミングでアプリケーションがクラッシュしました。

* ACI0098490 プラグインSDKの``PA_AcceptDeselect``でプラグインエリアのフォーカスを拒否できないことがありました。一度目は成功しますが，二度目はエリアにフォーカスが移動します。

* ACI0098555 クライアント/サーバー版のみ。ORDAで空の日付フィールドにアクセスした場合，``Null``が返されました。期待されるのは``00/00/00``が返されることです。

* ACI0098369 64ビット版のみ。``OCIAttrGetVal``に定数の``OCI_ATTR_IOMODE``を渡した場合，入出力パラメーターに対して``OCI_TYPEPARAM_INOUT (2)``ではなく``8``が返されました。

* ACI0098443 リアルタイムモニターに時間がミリ秒単位で表示されませんでした。端数は切り捨てられ，値が1秒に満たない場合は何も表示されませんでした。
