4D v16 R4
---

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0096620 Mac 64ビット版のみ。文字列フィールドに日本語を入力しようとした場合，変換中の文字列に対してフィールドの文字数制限が適用されました。文字列長は実際に確定した文字列に対して適用されるべきです。

* ACI0096643 フォームエディターのメニューでオブジェクトを背面に移動した場合，すぐには変更が反映されませんでした。つまり，前面に戻すことができませんでした。オブジェクトを再選択すれば，問題ありません。

* ACI0096617 Mac 64ビット版のみ。詳細フォーム使用中にエラーダイアログが表示された場合，以後，日本語入力ができなくなりました。

* ACI0096608 入力不可・フォーカス不可のテキスト入力オブジェクト上でフォントピッカーまたはカラーピッカーを表示すると，アプリケーションがクラッシュしました。

* ACI0096588 ``HTTP Get``をループの中で繰り返し実行していると，アプリケーションがクラッシュする場合がありました。
	
* ACI0096586 特定のセキュアWebサーバーに対して``HTTP Requst``でアクセスすることができませんでした。

* ACI0096548 Mac版のみ。ファイルサイズが0のドキュメントを``Document to text``で読み込もうとすると，``utf-8``エンコーディングを指定しない限り，error in user parameter list (paramErr) というエラーが返されました。

* ACI0096740 ``WEB SEND HTTP REDIRECT``をコンポーネント内で使用することができませんでした。	

* ACI0095296 Mac 64ビット版のみ。"ヒラギノ角ゴシック ``W0``から``W9``などのフォントは，ツールボックスのスタイルシートページに表示されませんでした。

* ACI0095580 Windows版のみ。自動スタイルシート（Window 10であればYu Gothic UI）でフォントが設定されたリストボックスは，セル入力中に日本語変換用のガイドラインが表示されませんでした。ガイドラインの表示位置が低すぎるためです。

* ACI0096381 ODBC書き出しダイアログを使用してレコードをエクスポートした場合，対象フィールド群にプライマリーキーが含まれていないと，レコードが正しく書き出されませんでした。

* ACI0096403 Mac 64ビット版のみ。リストフォームに表示されたスタティックテキスト以外のオブジェクト（ボタン・ポップアップ・テキスト入力エリアなど）は，オブジェクトの表示（常に・レコード選択時・レコード非選択時）プロパティを無視しました。

* ACI0096815 Webプロセスの``DIGETST``認証（4Dパスワードを含む）を有効にした場合，ブラウザがパスワード入力ダイアログを表示するまでに何十秒も待たされました。

---

* ACI0096528 ``EXPORT DATA``で書き出しダイアログを表示した場合，カレントセレクションの並び順が反映されませんでした。

* ACI0096514 Mac版のみ。アプリケーションビルドのダイアログで4D Volume Desktop以外の4Dアプリケーションを選択することができました。以前のバージョンでは，エラーが表示されました。

* ACI0096511 Windows 7のみ。特定のマシンでダイナミックポップアップメニューを表示すると，アプリケーションがクラッシュしました。

* ACI0096501 Windows 32ビット版のみ。統合Webエリアにフォーカスが表示されている場合，他の4Dフォームオブジェクトをクリックしても，フォーカスが移動しませんでした。

* ACI0096499 Mac 64ビット版のみ。ビルドしたデスクトップ版アプリケーションの「終了」メニューは常にdisabled状態でした。
	
* ACI0096491 4D Write Pro文書が保存されたオブジェクト型フィールドを標準のダイアログで書き出した後，読み込んだ場合，ドキュメントの内容が空でした。

* ACI0096490 旧ネットワークレイヤーのみ。``EXECUTE ON CLIENT``および``Execute on server``を繰り返し実行していると，サーバーがフリーズしました。新ネットワークレイヤーでは問題ありません。コンパイルモードで問題が発生します。コマンドの代わりに「サーバー上で実行」メソッドプロパティを使用すれば問題ありません。

* ACI0096481 Windows版のみ。ビルドしたアプリケーションは，メインプロセスのスプラッシュウィンドウ以外のウィンドウにカスタマイズしたアイコンではなく4Dのアイコンが表示されました。 

* ACI0096464 Windows版のみ。``OB GET``コマンドは，16進数表記の整数を変換しませんでした。たとえば，``0x00FFFFFF``を取り出そうとした場合，``16777215``ではなく，``0``が返されました。

* ACI0096436 アプリケーション配布の新しいアーキテクチャーを有効にし，ビルドしたサーバーアプリケーションをサービス登録した場合，``lastDataPath.xml``に記述されたパス（最後にダイアログ経由で選択したデータファイルのパス）が使用されませんでした。デフォルトのデータファイルがみつからない場合，毎回，データファイルを指定するためのダイアログが表示されました（デスクトップとの対話が許可されている場合）。

* ACI0096428 バージョン6.7で作成されたユーザー/グループファイル（``.4UG``）を読み込めないことがありました。サイズが17KBのときは問題ありませんが，35または39KBの場合，Windowsではクラッシュ，Macではアプリケーションが不安定になりました。データベースのアップグレードでも同じ問題が起こり得ました。

* ACI0096407 スクロール操作の直後に``WP SELECT``を使用した場合，指定したテキストがハイライト表示されませんでした。

* ACI0096391 Windows版のみ。``Print object``コマンドでリストボックスを印刷すると，ヘッダーのテキストが出力されませんでした。

* ACI0096386 4D Server上でWebサーバーを起動した後に管理者（``Administrator``）のパスワードを変更した場合，``On Web Authentication``データベースメソッドが実行されると，以前のパスワードに戻ってしまいました。デスクトップ版では問題ありません。また，``Designer``や一般ユーザーアカウントも問題ありません。

* ACI0096314 何もエラーが発生していない状況で``XML GET ERROR``を実行すると，アプリケーションが終了しました。

* ACI0096285 階層リストボックスの階層ノードが選択された状態で空行をクリックした場合，``On selection change``イベントが発生しませんでした。

* ACI0096272 アイテムが区切り線（``-``）だけのポップアップ/ドロップダウンメニューをクリックするとアプリケーションがクラッシュしました。

* ACI0096146 Macのみ。``SET FILE TO PASTBOARD``を使用しても，ファイルをフォームからデスクトップなどのFinderフォルダーにドラッグ＆ドロップすることができませんでした。Finder以外のアプリケーションに対するドラッグ＆ドロップであれば問題ありません。64ビット版であれば，操作を完了することができますが，ファイルが以前のバージョンのように移動ではなく，コピーされました。

* ACI0096136 リストボックスの水平リサイズプロパティを「拡大」に設定した場合，テキスト入力中にリストボックスをリサイズすると，編集した内容が元に戻ってしまいました。

* ACI0095968 クエリエディターには``SET TABLE TITLES``でカスタマイズされた順序でテーブル名が列挙されませんでした。

* ACI0095934 Mac64ビット版のみ。``OCIBindByPos``が2回目の実行でクラッシュしました。

* ACI0094940 クイックレポートエディターを起動した後，プリントプレビューを実行すると，エディター上のラベル「レコード/セレクション」および「レコード/テーブル」が消え，それぞれ数だけが画面上に表示されました。

* ACI0096794 4D Write Proウィジェットの「フレーム」タブをクリックすると，エラーが表示されました。

* ACI0096787 ポップアップウィンドウに続けてアラートダイアログを表示した場合，ウィンドウ以外の場所をクリックしても，ポップアップウィンドウが閉じられませんでした。

* ACI0096771 SQLの``LEFT OUTER JOIN``の``WHERE``句に2個以上のインデックス日付フィールドが含まれると，4Dがフリーズしました。

* ACI0096764 「アプリケーション配布に新しいアーキテクチャを使用する」オプションが有効にされたデータベースをシングルユーザー用にビルドし，``Alt``キーを押しながら起動してMSCを開くと，エラーが表示された後，アプリケーションがクラッシュしました。

* ACI0096753 Windows 64ビット版のみ。``PRINT SETTINGS``で表示した印刷ダイアログのプレビューのチェックボックスがありませんでした。

* ACI0096741 4D Write文書（``.4W7``）を4D Write Pro文書（``.4wp``）に変換した場合，若干，タブの幅が違うために，文書のレイアウトが崩れることがありました。

* ACI0096735 Mac版のみ。リストフォームに詳細エリア内にはスプリッターが表示されませんでした。	

* ACI0096734 Mac版のみ。日付およびオブジェクト型のデータが``WA Evaluate Javascript``に認識されないことがありました。システムWebエリア特有の問題です。

* ACI0096848 ``SELECTION TO ARRAY``でオブジェクト型の配列をリストボックスに転送することを繰り返していると，メモリーリークが発生しました。``LISTBOX DELETE ROWS``, ``CLEAR VARIABLE``, ``ARRAY OBJECT (...;0)```のいずれかを実行すれば，リストボックスに表示されていたデータの占有メモリーは解放されるべきです。

* ACI0096838 Mac64ビット版のみ。以前のバージョンと比べて特定のフォントが細く表示されました。	

* ACI0096819 Mac 32ビット版のみ。「メール」アプリケーションからウムラウト文字が含まれるテキストを4Dのスタイル付きテキスト入力エリア（フィールドまたは変数）にペーストすることができませんでした。他のアプリケーションでは問題ありません。

* ACI0096810 同一フォーム上に配置された複数のリストボックスに対し，SQLの``INTO LISTBOX``で値を挿入すると，同名のオブジェクトが作成されました。

* ACI0096802 ビルドしたクライアント/サーバーアプリケーションでデータベース設定の「クライアント/サーバー」ページを開くと，エラーが返されました。

* ACI0096237 メソッドエディターのツールバーに表示されている番号付きクリップボードのヘルプTips正しくありませんでした。Macの場合，``command``+``shift``+``1``などと表示されますが，実際のショートカットは``command``+``option``+``1``です。Windowsの場合，``command``+``shift``+``1``などと表示されますが，実際のショートカットは``Control``+``Alt``+``1``です。

* ACI0096835 特定の条件が揃った場合，クライアントを終了した後みサーバーの管理画面にアプリケーションプロセスが残されました。アプリケーションプロセスからストアドプロシージャーを起動し，しばらく待っていると，サーバーの管理画面上でアプリケーションプロセスが「延期」状態になります。この状況でクライアント側のアプリケーションを終了すると，サーバー側の管理画面からアプリケーションプロセスが消えませんでした。

* ACI0096713 クライアント接続数``2``がインストールされた4D Serverに対し，``SQL LOGIN`` ×``2``の接続を確立し，その状態でしばらく待っていると，SQL接続がタイムアウトし，SQL接続数が``0``に戻ります。しかし，アプリケーションサーバーの接続数はこのタイミングで減らないので，続けてサーバーのネットワークを切断（たとえばケーブルが抜くなど）してから元に戻した場合，ライセンス数の上限により，``SQL LOGIN``で同じサーバーに接続することができませんでした。

* ACI0096722 4D Write Proエリアを作成した直後，デフォルトで設定されたオブジェクト名がエディター上に表示されませんでした。4D View ProエリアやWebエリアのように，オブジェクト名または変数名（あれば）が表示されるべきです。

* ACI0096895 Mac版のみ。``OBJECT SET ENABLED``でタブコントロールとして表示されているリスト項目のタブや，ピクチャポップアップメニューをdisabled状態にすることができませんでした。El Capitanでは問題ありません。

* ACI0096881 64ビット版のみ。"Arial Narrow"など，DirectWrite系のフォントファミリーは印刷またはプレビューに反映されませんでした。また，4D View Pro版の新リストボックス（クイックレポートエディターなど）では画面にも反映されませんでした。


* ACI0096728 クライアント側でスリープ・スリープ解除・プロセスの終了・スリープを何度も繰り返していると，接続が切断されたり，アプリケーションがフリーズする場合がありました。

* ACI0096727 Windows版のみ。``Timestamp``の精度に問題がありました。たとえば，1分間連続でコマンドを実行しても，ミリ秒に``000`から``999``の値がすべて返されませんでした。

* ACI0096710 Mac版のみ。キーボードショートカット経由でボタンをクリックすると，アプリケーションがクラッシュする場合がありました。特定のストラクチャだけで発生する問題です。マウスクリックであれば問題ありません。AreaList Proプラグインが表示されたフォームを確定（``ACCEPT``）したタイミングで発生しやすいようです。

* ACI0096703 Mac 64ビット版のみ。キー入力するたびに，``ON EVENT CALL``でインストールされたメソッドが2回コールされました。

* ACI0096693 32ビット版のみ。``PRINTERS LIST``から返されるテキスト配列は，各要素の末尾にヌル文字が追加されていました。プリンターの指定には支障ありませんが，プリンター名を文字列として扱いたい場合に問題が生じる可能性があります。

* ACI0096684 サーバーに接続した4D Remoteの『4Dについて...』ダイアログは『リモートモード』と表示されるべき箇所に『Server』と表示されました。

* ACI0096677 ``OBJECT SET SCROLL POSITION``で階層リストボックスの収縮された階層に所属する行に移動した場合，その階層は強制的に展開されますが，その後，縦スクロール操作でリストボックスの最後まで移動することができませんでした。行数の計算が更新されていないようです。

* ACI0096675 Mac版のみ。ODBCドライバー経由でテーブル名が正しく返されませんでした。``Table_1``の代わりに``Tbe1``が返されました。``UTF-16``エンコーディングが正しく処理されていないようです。

* ACI0096670 ``SMTP_Body``でHTMLメールを送信した場合，本文の末尾にヌル文字が追加されました。スパムフィルターやウイルススキャン等によってメールがキャッチされ，相手に届かない恐れがありました。

* ACI0096665 ``SMTP_SetPrefs``で1行の長さを設定することができますが，``Base64``エンコーディングでメッセージをエンコードした場合，1行置きに変な長さで改行が実施されました。たとえば，1行の長さを``76``とした場合，``76``, ``26``, ``76``, ``26``といった具合に改行コードが挿入されました。

* ACI0096649 『...と...の間』条件のクエリ設定ファイルを読み込んだ場合，開始値が終了値と同一になりました。たとえば，「2017/1/1から2017/2/2の間」という条件は「2017/2/2から2017/2/2の間」になりました。

* ACI0096647 Internet Commandsで送信したメールの添付画像ファイルは，Appleのメールクライアントで受信した場合，画像が2回表示されました。``Content-Disposition``が``inline``ではなく``attachment``とされているためです。

* ACI0096637 Mac 64ビット版のみ。ダイアログで表示したウィンドウとデバッガの間を行き来しているとアプリケーションがクラッシュしました。

* ACI0096635 特定のWebサーバーに対して``HTTP Requst``でアクセスした場合，「404」の代わりに「#5」という内部エラーが返されました。

* ACI0096631 リストボックスに表示された数値型配列に選択リストを関連付けたときの動作が正しくありませんでした。テキスト型配列では問題ありません。

* ACI0096621 トランザクション内でインデックスクエリを続けて実行した場合，確定していないトランザクション中に作成されたレコードもセレクションに含まれました。インデックスクエリでなければ問題ありません。

* ACI0096611 Windows 64ビット版のみ。極細線が32ビット版よりも太く出力されました。

* ACI0096600 Windows 32ビット版のみ。リストフォームを印刷（``XPS``プレビューを含む）すると，背景色の設定されたスタイル付きテキストの位置がずれました。

* ACI0096598 Windows版のみ。ビルドアプリケーションのカスタムアイコンファイルは，``48x48``の低い解像度で収録されました。``256x256``など，ビルドプロジェクトファイルで指定した``.ico``ファイルの解像度がそのまま使用されるべきです。

* ACI0096596 Windows版のみ。メソッドエディターにある程度（50行以上）のテキストを入力すると，文字入力の反応が明らかに遅くなってゆきました。

* ACI0096595 デザインモード・ツールバーの「新規」ボタンは，メソッドエディターやフォームエディターを使用しているときでも，常に新規データベースの作成ダイアログを表示しました。エディターが開かれているときは，状況に応じ，新規テーブル・メソッド・フォームの作成ダイアログが表示されるべきです。

* ACI0096589 ``LISTBOX SET HIERARCHY``でページ2以降に配置された階層リストボックスの階層を操作した後，`` FORM GOTO PAGE``でそのページに移動しようとすると，アプリケーションが終了しました。

* ACI0096582 ブール型の条件が3個以上含まれるクエリ定義ファイル（``.4DF``）が正しく読み込まれませんでした。

* ACI0096581 Windows版のみ。ビルドしたサーバーアプリケーションをサービス登録した場合，コマンドライン引数の``-d``でデータファイルの場所を指定することができませんでした。
	
* ACI0096580 32ビット版のみ。``ALERT``, ``Request``, ``CONFIRM``など，特定の標準コマンドを実行すると，非アクティブだったメニューアイテムがアクティブになることがありました。

* ACI0096577 Mac版のみ。Actual TechnologiesのODBCドライバーを使用してMySQLに``VARCHAR``または``CHAR``型のデータを``INSERT``しようとすると，エラーコード``9922``が返されました。

* ACI0096567 4D Writeプラグインで作成した文書を``WP Import document``でWrite Proにインポートした場合，複数行のテキストが含まれるテーブルがうまく変換されませんでした。

* ACI0096560 階層リストボックスのたたまれた行に対して``EDIT ITEM``を実行した場合，その階層が表示されるようになりますが，その後，出現した分の行数だけ移動できる距離が下方向に延長されておらず，最後までスクロールすることができませんでした。

* ACI0096556 セレクション型のリストボックスが表示されているページから別のページに移動し，元のページに戻った場合，リストボックスのセレクションが変化していなくても，``On Display Detail``イベントが発生しました。

* ACI0096552 水平スクロールバーが表示された階層リストの反応が良くありませんでした。WindowsはMacよりも問題が顕著です。

* ACI0096551 Mac版のみ。アプリケーションのメインウィンドウ（スプラッシュ画面）に4Dのアイコンが表示されませんでした。「データベース設定 > 一般」で起動時モードが「アプリケーション」に設定されている場合に問題が発生します。メニューを実行してモードを切り替えた場合には問題ありません。
