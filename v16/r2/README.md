4D v16 R2
---

Nightly Build ``209092``

* ACI0096318 Windows版のみ。リストボックスのセルに長文が表示されており，列のプロパティでワードワップが有効にされている場合，途中からテキストが表示されないことがありました。

* ACI0096290 Mac版のみ。テキストまたは文字列フィールドがリストフォームに表示されており，テキスト全文を表示するだけの幅がない場合，テキストの始めが省略されました。期待されるのは，テキストの終わりが省略されることです。

* ACI0096338 ``GET SERIAL INFORMATION``から返されるシリアルキー番号は，サーバー側とクライアント側で同じではありませんでした。

* ACI0096295 64ビット版のみ。メソッドエディター内でメソッド・コマンド・フォーム・変数にカーソルが置かれていれば，ショートカット``command``+``K``でその定義を開くことができるはずです。しかし，v16の64ビット版では，メソッド名全体をハイライト選択しているのでない限り，対象の定義を開くことができませんでした。

* ACI0096145 Windows版のみ。システムのアピアランステーマが「クラシック」に設定されている場合，非フォーカスリストボックスの選択されたセルが正しく表示されませんでした。

* ACI0096113 リストボックスのセルに表示された数値を``backspace``キーで削除した後，``tab``キーでセルを抜け出ると，消したはずの値がまた表示されました。日付でも同じことが起きますが，テキストでは問題ありません。

* ACI0096138 Windows版のみ。リストボックスのセル内で``Ttb``文字が表示されませんでした。

* ACI0096157 リストボックスのセルに文字列をペーストした場合，On After Editイベントが発生しませんでした。

* ACI0096259 Mac 64ビット版のみ。システム環境設定でプリンターが1台も登録されていない場合，ラベルエディターの「プレビュー」ボタンをクリックするとアプリケーションがクラッシュしました。

* ACI0095137 フォームエディターで複数のテキスト入力オブジェクトを水平方向に均等配置した場合，オブジェクトのサイズが変化することがありました。

* ACI0085050 Bootcampで起動したWindowsをMacのRetinaディスプレイに表示した場合，デバッガのツールバーが表示されませんでした。通常のWindowsでは問題ありません。

* ACI0096092 Windows版のみ。``4D_OPTION_BLOCKING_EXTERNAL_PROCESS``オプションが指定された場合，``LAUNCH EXTERNAL PROCESS``で外部アプリケーションを起動することができませんでした。

* ACI0096184 外部ファイルのユーザー設定が有効にされている場合，ビルドされたクライアント/サーバーのネットワーク通信ポートを実行中に変更すると，クライアントがクラッシュしました。

* ACI0096035 Windows版のみ。サービス起動した4D Serverを停止するとエラーメッセージが返されました。

* ACI0096078 ACI0096078 ポップアップメニューの項目に空の文字列が存在する場合，0番項目の代わりにその項目が選択されました。

* ACI0096235 フォームエディターのツールボタンでオブジェクトの入力順だけを変更した場合，変更内容が保存されませんでした。

* ACI0096227 クライアントで``Is field value null``コマンドを使用した場合，常に``False``が返されました。

* ACI0096154 Mac版のみ。複数行を表示できるテキスト入力エリアに，巨大なオブジェクト型データ（フィールドまたは変数）を表示すると，画面のリフレッシュに時間がかかったり，アプリケーションがクラッシュしたりました。表示できるオブジェクト型データの最大サイズは，テキスト入力エリアの幅に比例するようです。高さには左右されません。

* ACI0094528 Windows版のみ。マトリクスプリンター「Dascom 2600」に搭載されているプリンターフォントはプロパティリストに表示されませんでした。ツールボックス > スタイルシートには表示されます。

**注記**: 64ビット版では，印刷にデフォルトでDirect2Dテクノロジーが使用されます。画面には，Direct2Dに対応したフォントしか表示できないため，その大半がTrueTypeまたはOpenTypeであるプリンターフォントはフォームエディターのプロパティリストに含まれていませんでした。64ビット版でDirect2Dに対応していないフォントをフォームに使用することもできますが，画面と印刷の出力を一致させるためには，旧式のGDI印刷を有効にすることが勧められています。

```
SET PRINT OPTION(Legacy printing layer option;1)
```

* ACI0094537 ``FTP_GetDirList``は，6ヶ月以上前に更新されたファイルの更新時間を正しく返しませんでした。

* ACI0095712 リストボックスの自動アクションに「ページ移動」を設定した場合，クリックイベントでしかアクションが実行されませんでした。オブジェクトがフォーカス可であれば，上下矢印キーでも操作できるはずです。

**注記**: ページ移動後，リストボックスにフォーカスがとどまるようにするためには，下記のようなコードが必要です。

```
If (Form event=On Page Change)
    GOTO OBJECT(*;"List Box")
End if 
```

* ACI0095899 Mac版のみ。配列型リストボックスのヘッダータイトルは，ソートされているカラムだけ垂直揃えが上揃えになりました。

* ACI0095403 64ビット版のみ。プロパティリストで設定したヘルプTipsがストラクチャに保存されませんでした。

* ACI0096179 クライアント/サーバーモードで``QUERY BY ATTRIBUTE``の後に``Get last query path``または``Get last query plan``を実行した場合，クエリパスやクエリプランが返されませんでした。

* ACI0095532 Windows 64ビット版のみ。``Open form window``と``Movable form dialog box``の組み合わせで表示したウインドウは，最大化・最小化ボタンをクリックしても何も起きませんでした。

* ACI0096063 ラベルのテキストが常に左揃えで印字されました。

* ACI0095470 新ネットワークレイヤーのみ。30秒ほどクライアントマシンをスリープさせてからマシンのスリープを解除した場合，4Dがスリープから復帰しませんでした。

* ACI0095550 メソッドエディターで取り消し/やり直し（``command``+``Z``, ``command``+``shift``+``Z``）操作をすると，日本語変換途中の各候補が表示されました。

* ACI0095871 Mac版のみ。リストボックスのセルは，内容を編集している間だけ右揃えが左揃えになりました。

* ACI0095994 ``GOTO OBJECT``の速度がv13と比較してずっと遅くなりました。

* ACI0096161 64ビット版のみ。メソッドエディターにコードをタイプ入力を開始しても，ツールTipsが消えませんでした。

* ACI0096274 アップグレード後，4Dが内部的に使用しているフランス語の変数/定数の大部分が失われてしまいました。

* ACI0096296 ``Transaction active``は，フランス語版のコマンド名でした。英語版のコマンド名は``Active transaction``です。

* ACI0096236 非表示行が含まれるリストボックス上で``Shift``キーを押しながら一定の範囲を選択した場合，あるいは``command``+``A``で全体を選択した場合，非表示行も選択に含まれました。画面に表示されていない行は，選択から除外されるべきでした。

* ACI0096323 64ビット版のみ。``SET DATABASE PARAMETER``に続けて``SET CACHE SIZE``を使用した場合，キャッシュのサイズが変更されませんでした。``SET DATABASE PARAMETER``を使用しなければ問題ありません。

**注記**: データベース設定をダイアログまたはコマンドで変更した後，キャッシュ設定が自動的に更新されないようになりました。64ビット版に限り，『起動時にキャッシュサイズを計算』オプションが有効にされていないときは，データベース設定の『メモリ』ページに『適用』ボタンが表示されます。データベース設定のキャッシュサイズを採用するためには，このボタンをクリックしてください。

* ACI0096365 64ビット版のみ。起動直後のインデックス最構築に時間がかかりました。

**注記**: キャッシュサイズが反映される前にインデックス作成プロセスが開始していることが原因でした。修正により，キャッシュはストラクチャファイルを開いた後，データファイルを開く前に確保されるようになりました。

* ACI0096430 複合インデックスと非インデックスフィールドの両方が関係するクエリを実行すると，アプリケーションがクラッシュしました。v15.3では問題ありません。v15.4の不具合です。単独のシーケンシャルクエリ，および複合インデックスが利用できる``AND``クエリでは，問題ありません。両方（合計3個のフィールド）を組み合わせたクエリで問題が起きました。

* ACI0096325 Mac版のみ。リストボックスの中央寄せヘッダーのタイトル表示位置が正しくありませんでした。ACI0095899が修正されたことの副作用です。

* ACI0095979 スレッドセーフであるはずのXMLコマンド（DOMおよびSAX）のスレッドセーフ属性が正しく返されませんでした。

**注記**: コマンドがスレッドセーフ（プリエンプティブプロセスで実行できる）かどうかは，``Command name``で調べることができます。また，ドキュメントにアイコンが表示されるいることでも確認できます。

![preemption xx](https://cloud.githubusercontent.com/assets/10509075/23443824/b345f95c-fe74-11e6-8dc6-057a5bf3e675.png)
