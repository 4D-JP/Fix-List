4D v16 R2
---

Nightly Build ``209341``

* ACI0096485 ``TRACE``コマンドやブレークポイントが設定されていても，サーバー側ではデバッガが表示されませんでした。

* ACI0096318 Windows版のみ。リストボックスのセルに長文が表示されており，列のプロパティでワードワップが有効にされている場合，途中からテキストが表示されないことがありました。

* ACI0096290 Mac版のみ。テキストまたは文字列フィールドがリストフォームに表示されており，テキスト全文を表示するだけの幅がない場合，テキストの始めが省略されました。期待されるのは，テキストの終わりが省略されることです。

* ACI0096338 ``GET SERIAL INFORMATION``から返されるシリアルキー番号は，サーバー側とクライアント側で同じではありませんでした。

* ACI0096295 64ビット版のみ。メソッドエディター内でメソッド・コマンド・フォーム・変数にカーソルが置かれていれば，ショートカット``command``+``K``でその定義を開くことができるはずです。しかし，v16の64ビット版では，メソッド名全体をハイライト選択しているのでない限り，対象の定義を開くことができませんでした。

* ACI0096145 Windows版のみ。システムのアピアランステーマが「クラシック」に設定されている場合，非フォーカスリストボックスの選択されたセルが正しく表示されませんでした。

* ACI0096113 リストボックスのセルに表示された数値を``backspace``キーで削除した後，``tab``キーでセルを抜け出ると，消したはずの値がまた表示されました。日付でも同じことが起きますが，テキストでは問題ありません。

* ACI0096138 Windows版のみ。リストボックスのセル内で``Tab``文字が表示されませんでした。

* ACI0096157 リストボックスのセルに文字列をペーストした場合，On After Editイベントが発生しませんでした。

* ACI0096259 Mac 64ビット版のみ。システム環境設定でプリンターが1台も登録されていない場合，ラベルエディターの「プレビュー」ボタンをクリックするとアプリケーションがクラッシュしました。

* ACI0095137 フォームエディターで複数のテキスト入力オブジェクトを水平方向に均等配置した場合，オブジェクトのサイズが変化することがありました。

* ACI0085050 Bootcampで起動したWindowsをMacのRetinaディスプレイに表示した場合，デバッガのツールバーが表示されませんでした。通常のWindowsでは問題ありません。

* ACI0096092 Windows版のみ。``4D_OPTION_BLOCKING_EXTERNAL_PROCESS``オプションが指定された場合，``LAUNCH EXTERNAL PROCESS``で外部アプリケーションを起動することができませんでした。

* ACI0096184 外部ファイルのユーザー設定が有効にされている場合，ビルドされたクライアント/サーバーのネットワーク通信ポートを実行中に変更すると，クライアントがクラッシュしました。

* ACI0096035 Windows版のみ。サービス起動した4D Serverを停止するとエラーメッセージが返されました。

* ACI0096078 ポップアップメニューの項目に空の文字列が存在する場合，0番項目の代わりにその項目が選択されました。

* ACI0096235 フォームエディターのツールボタンでオブジェクトの入力順だけを変更した場合，変更内容が保存されませんでした。

* ACI0096227 クライアントで``Is field value null``コマンドを使用した場合，常に``False``が返されました。

* ACI0096154 Mac版のみ。複数行を表示できるテキスト入力エリアに，巨大なオブジェクト型データ（フィールドまたは変数）を表示すると，画面のリフレッシュに時間がかかったり，アプリケーションがクラッシュしたりました。表示できるオブジェクト型データの最大サイズは，テキスト入力エリアの幅に比例するようです。高さには左右されません。

* ACI0094528 Windows版のみ。マトリクスプリンター「Dascom 2600」に搭載されているプリンターフォントはプロパティリストに表示されませんでした。ツールボックス > スタイルシートには表示されます。

**注記**: 64ビット版では，印刷にデフォルトでDirect2Dテクノロジーが使用されます。画面には，Direct2Dに対応したフォントしか表示できないため，その大半がTrueTypeまたはOpenTypeであるプリンターフォントはフォームエディターのプロパティリストに含まれていませんでした。64ビット版でDirect2Dに対応していないフォントをフォームに使用することもできますが，画面と印刷の出力を一致させるためには，旧式のGDI印刷を有効にすることが勧められています。

```
SET PRINT OPTION(Legacy printing layer option;1)
```

* ACI0094537 ``FTP_GetDirList``は，6ヶ月以上前に更新されたファイルの更新時間を正しく返しませんでした。

* ACI0095712 リストボックスの自動アクションに「ページ移動」を設定した場合，クリックイベントでしかアクションが実行されませんでした。オブジェクトがフォーカス可であれば，上下矢印キーでも操作できるはずです。

**注記**: ページ移動後，リストボックスにフォーカスがとどまるようにするためには，下記のようなコードが必要です。

```
If (Form event=On Page Change)
    GOTO OBJECT(*;"List Box")
End if 
```

* ACI0095899 Mac版のみ。配列型リストボックスのヘッダータイトルは，ソートされているカラムだけ垂直揃えが上揃えになりました。

* ACI0095403 64ビット版のみ。プロパティリストで設定したヘルプTipsがストラクチャに保存されませんでした。

* ACI0096179 クライアント/サーバーモードで``QUERY BY ATTRIBUTE``の後に``Get last query path``または``Get last query plan``を実行した場合，クエリパスやクエリプランが返されませんでした。

* ACI0095532 Windows 64ビット版のみ。``Open form window``と``Movable form dialog box``の組み合わせで表示したウインドウは，最大化・最小化ボタンをクリックしても何も起きませんでした。

* ACI0096063 ラベルのテキストが常に左揃えで印字されました。

* ACI0095470 新ネットワークレイヤーのみ。30秒ほどクライアントマシンをスリープさせてからマシンのスリープを解除した場合，4Dがスリープから復帰しませんでした。

* ACI0095550 メソッドエディターで取り消し/やり直し（``command``+``Z``, ``command``+``shift``+``Z``）操作をすると，日本語変換途中の各候補が表示されました。

* ACI0095871 Mac版のみ。リストボックスのセルは，内容を編集している間だけ右揃えが左揃えになりました。

* ACI0095994 ``GOTO OBJECT``の速度がv13と比較してずっと遅くなりました。

* ACI0096161 64ビット版のみ。メソッドエディターにコードをタイプ入力を開始しても，ツールTipsが消えませんでした。

* ACI0096274 アップグレード後，4Dが内部的に使用しているフランス語の変数/定数の大部分が失われてしまいました。

* ACI0096296 ``Transaction active``は，フランス語版のコマンド名でした。英語版のコマンド名は``Active transaction``です。

* ACI0096236 非表示行が含まれるリストボックス上で``shift``キーを押しながら一定の範囲を選択した場合，あるいは``command``+``A``で全体を選択した場合，非表示行も選択に含まれました。画面に表示されていない行は，選択から除外されるべきでした。

* ACI0096323 64ビット版のみ。``SET DATABASE PARAMETER``に続けて``SET CACHE SIZE``を使用した場合，キャッシュのサイズが変更されませんでした。``SET DATABASE PARAMETER``を使用しなければ問題ありません。

**注記**: データベース設定をダイアログまたはコマンドで変更した後，キャッシュ設定が自動的に更新されないようになりました。64ビット版に限り，『起動時にキャッシュサイズを計算』オプションが有効にされていないときは，データベース設定の『メモリ』ページに『適用』ボタンが表示されます。データベース設定のキャッシュサイズを採用するためには，このボタンをクリックしてください。

* ACI0096365 64ビット版のみ。起動直後のインデックス最構築に時間がかかりました。

**注記**: キャッシュサイズが反映される前にインデックス作成プロセスが開始していることが原因でした。修正により，キャッシュはストラクチャファイルを開いた後，データファイルを開く前に確保されるようになりました。

* ACI0096430 複合インデックスと非インデックスフィールドの両方が関係するクエリを実行すると，アプリケーションがクラッシュしました。v15.3では問題ありません。v15.4の不具合です。単独のシーケンシャルクエリ，および複合インデックスが利用できる``AND``クエリでは，問題ありません。両方（合計3個のフィールド）を組み合わせたクエリで問題が起きました。

* ACI0096325 Mac版のみ。リストボックスの中央寄せヘッダーのタイトル表示位置が正しくありませんでした。ACI0095899が修正されたことの副作用です。

* ACI0095979 スレッドセーフであるはずのXMLコマンド（DOMおよびSAX）のスレッドセーフ属性が正しく返されませんでした。

**注記**: コマンドがスレッドセーフ（プリエンプティブプロセスで実行できる）かどうかは，``Command name``で調べることができます。また，ドキュメントにアイコンが表示されるいることでも確認できます。

![preemption xx](https://cloud.githubusercontent.com/assets/10509075/23443824/b345f95c-fe74-11e6-8dc6-057a5bf3e675.png)

* ACI0096191 Windows版のみ。最近のシステム更新（``10.1607.14393.576``, ``10.1511.10586.713``）以降，リストボックスのダブルクリック操作で入力フォームに移行した直後，『ロックされたレコード』ダイアログが表示されると，4Dが表示している領域以外は画面が真っ黒に表示されました。

* ACI0096144 オブジェクト型フィールドに対して中``QUERY BY ATTRIBUTE``でクエリを実行した場合，クライアント/サーバー版では，日付属性の値が``null``または存在しないレコードはヒットしませんでした。

* ACI0096137 macOS Sierra 10.12.1 (16B2657) のみ。一旦，デスクトップをクリックした後，Welcomeウィザードの背景部分をクリックすると，アプリケーションがクラッシュしました。リンクをクリックした場合は問題ありません。

**注記**: WebKitが修正されました。

* ACI0096150  macOS Sierraのみ。4D Writeエリアをクリックしてアクティブにすると，アプリケーションがクラッシュしました。TouchBar搭載マシンでなければ問題ありません。

* ACI0073896 ``PRINT SELECTION``で印刷を実行した場合，プリントダイアログに入力した終了ページ番号は反映されますが，開始ベージ番号は無視されました。

* ACI0095427 Windows 10のみ。リストボックスのセルや一般的なテキスト入力オブジェクト（変数またはフィールドに）日本語入力メソッドを使用してテキストを入力した場合，文末の文字がスペース（全角または半角）だとカーソルの点滅が停止し，カーソルの位置がわからなくなります。

* ACI0095432 4D Write ProからエクスポートしたMIMEテキストは，[RFC2822](https://tools.ietf.org/html/rfc2822)で勧められているように，1行の長さが998ですが，一部のメールサーバーは，78行以内でなければメッセージを処理することができません。

* ACI0095452 クイックレポートエディター上でセルを選択しても，ツールバーの状態が更新されませんでした。

* ACI0095463 保存オプションが『データファイルの中』に設定されている場合，ストラクチャエディター上でフィールドのタイプをオブジェクトからテキストに変更することができませんでした。テキストではなく，文字列になりました。 保存オプションが『レコードと一緒』に設定されていれば，フィールドのタイプをオブジェクトからテキストに変更することができます。しかし，タイプをオブジェクトの戻すと，保存オプションも『データファイルの中』に戻りました。

* ACI0095490 Mac版の32ビットクライアントからWindows版の64ビットサーバーに何度も接続を試みていると，ランタイムエラー``-50``が返されることがありました。通常の操作では，なかなか再現しません。スクリプトを使用して，接続と切断を高速に繰り返すと，再現性が上がります。ネットワークレイヤー『旧式』で問題が発生します。クライアント/サーバーの接続タイムアウトは1時間くらいに設定すると発生しやすいようです。

**参考**: ``4DLink``ファイルを用意し，下記のようなAppleScriptでサーバーに接続することができます。

```applescript
set x to 0
repeat 20 times
    tell application "Finder"
    activate
    open document file "$(DatabaseName).4DLink" of ¬
    folder "Remote" of folder "Favorites v16" of folder "4D" of ¬
    folder "Application Support" of folder "Library" of ¬
    folder $(UserName) of folder "Users" of startup disk
    delay (10)
    tell application "4D"
        quit
    end tell
    set x to x + 1
    display notification (x)
    end tell
end repeat
```

* ACI0095496 SQLの``INTO LISTBOX``でレコードをリストボックスに表示した場合，フッターの計算が正しくないことがありました。実数型フィールドの合計値などが整数に変換されてしまうためです。

* ACI0095525 検索ワードの途中にワイルドカード記号が使用された場合，キーワード検索で合致するのは，単語レベルで条件に合致するレコードではなく，テキスト全体で条件に合致するレコードでした。たとえば，name%"B@que"のようなクエリを実行した場合，"Banque Cantonale Vaudoise"や"Union de Banque Suisse"だけでなく，"Bureau Informatique"もヒットしました。

**注記**: 修正により，検索ワードの途中にワイルドカード記号が使用された場合，キーワードインデックスに基づいたシーケンシャルクエリが実行されるようになりました。

* ACI0095533 デザインモードに切り替えた直後，どのテーブルがカレントテーブルであっても，テーブルリスト上は第1テーブルが選択されていました。

* ACI0095538 Windows 64ビット版のみ。MDIの子ウィンドウが最大化されている場合，MDIウィンドウのリサイズが困難になりました。リサイズボックスがウィンドウの角に表示されるため，ドラッグできる範囲が非常に狭くなってしまいました。

* ACI0095540 mac版のみ。ランタイムエクスプローラーが表示された状態で4D Serverを終了すると，アプリケーションがクラッシュしました。

* ACI0095543 Windows版のみ。``AP Print settings to BLOB``を初めて実行すると，アプリケーションがクラッシュしました。クラッシュした後は，システムを再起動するまで問題ありません。

* ACI0095544 Windows 64ビット版のみ。MDIの子ウィンドウをリサイズしている間，ウィンドウの中に表示されている内容がちらつきました。

* ACI0095558 Mac 64ビット版のみ。リストボックスのセルに入力している日本語の変換を確定するために``return``キーを押すと，セルの編集が終わりました。

* ACI0095559 Mac 64ビット版のみ。階層リストのアイテムに入力している日本語の変換を確定するために``return``キーを押すと，アイテムの編集が終わりました。

* ACI0095574 Mac 32ビット版のみ。ピクチャオブジェクトに画像をドラッグ＆ドロップ操作で入力すると，``PICT``形式で画像が保存されました。

**注記**: 32ビット版の場合，``PICT``形式の画像を表示することはできますが，印刷することはできません。修正により，ドロップ操作された画像は，すべての画像フォーマットが取り出されます。ペーストボードに複数の画像フォーマットが含まれている場合，オリジナルの形式がどれなのかを判断することはできないためです。

* ACI0095577 Mac版のみ。``Select document``は，特定のUTIに関連付けられていない拡張子を無視しました。たとえば，``rsrc``や``fp7``のような拡張子のファイルを指定することができませんでした。

* ACI0095581 Mac版のみ。リストボックスのセルに日本語を入力，未確定のまま別のエリアにフォーカスを移動すると，入力中の未確定文字列が失われました。

* ACI0095582 Windows 64ビット版のみ。入力された日本語を``backspace``または``delete``キーで削除しようとすると，最後の1文字だけ2度キーを押す必要がありました。

* ACI0095610 ウイルス退治ソフトウェア（McAfeeなど）により，自動アップグレードが阻まれることがありました。

**注記**: [Process Monitor](https://technet.microsoft.com/ja-jp/sysinternals/processmonitor.aspx)でファイルアクセスを監視すると，自動アップデート中にMcAfeeが一瞬だけ4DCファイルにアクセスしていることが確認できます。終了直前に4DCファイルが書き換えられることに反応しているようです。ファイルがロックされているため，古いアプリケーションを移動することができず，自動アップグレードに失敗しました。

* ACI0088073 プロセスでトランザクションを開始してロードした「リレートしたNレコードを削除」オプションが有効にされたレコードを削除した後にトランザクションをキャンセルした場合，そのプロセスが動作している間は，新規プロセスから前のプロセスがロックしたセレクション内のレコードを削除することができませんでした。

**注記**: リレートしたNレコードを削除オプションが有効にされている場合，データベースエンジンは内部的にトランザクションを開始し，セレクションの削除を試みます。しかし，これをトランザクション内で実行した場合，トランザクションをキャンセルしても，内部的に開始された第2段階のトランザクションがロックしたレコードがプロセスによってロックされたままになりました。つまり，第2段階のトランザクション内でレコードを削除してから第2段階のトランザクションを確定し，第1段階のトランザクションをキャンセルした場合，削除を取りやめたレコードがそのプロセスによってロックされたままになる，という問題がありました。

```
START TRANSACTION
START TRANSACTION
QUERY([configs];[configs]id=2)
DELETE SELECTION([configs])
VALIDATE TRANSACTION 
CANCEL TRANSACTION
```

* ACI0088156 ``SMTP_Attachment``で追加した添付ファイルは，``Content-Disposition``が``attachment``で挿入されるため，一部のメールクライアント（Apple Mailなど）では，本文の後に繰り返し表示されました。``Content-Disposition``が``inline``であれば問題ありません。

* ACI0095614 64ビット版のみ。読み込み/書き出しダイアログは，選択したエンコーディングではなく，常に``utf-8``にデータを変換しました。プロジェクト内でエンコーディングを指定すれば問題ありません。

* ACI0091212 ``QUERY SELECTION``でクエリエディターを表示した場合，絞り込みではない，通常のクエリも実行できました。「クエリ」関係のオプションはクリック不可になるべきです。

* ACI0091658 ``SET TABLE TITLES``でテーブルタイトルを設定した後，クエリエディターを表示した場合，マスターテーブルにN対1リレーションが定義されていると，余計な空のテーブル名（``[]``）が表示されました。

* ACI0091900 データベース間で入力フォームを移動した場合，ヘルプTipsが一緒に移動しませんでした。

* ACI0092274 ``ON EVENT CALL``を中止する（イベントマネージャープロセスを通常にプロセスに切り替える）ためのキーコンビネーション（Windows版は``Control``+``Shift``+``Backspace`` Mac版は``command``+``shift``+``control``+``backspace``）が効きませんでした。

* ACI0092571 ユーザー設定が使用されている場合，アップグレード後に互換性オプションの「旧ネットワークレイヤーを使用する」が解除されました。

* ACI0095618 リストボックスにロックされた列が存在する場合，垂直スクロールバーが動作しないことがありました。

* ACI0095621 フォームエディター上の操作でマーカーを追加した場合，プロパティリストに新しいマーカーの項目が追加されませんでした。

* ACI0093483 フォームに4D Write Proエリアが置かれており，詳細マーカーが用紙のサイズよりも下に定義されている場合，``Print form``でそのフォームを印刷すると，最初に空のページが出力されました。

* ACI0093548 Windows版のみ。2本指の上下スワイプは，スクロール操作に相当するはずですが，リストボックスに対して使用できませんでした。対照的にピンチまたはズームのジェスチャーでリストボックスがスクロールします。

**注記**: 修正により，高精度トラックパッドを使用したスクロールおよびタッチスクリーン上の2本指スワイプに対応しました。

* ACI0094011 Windows版のみ。画面の外に表示されたウィンドウにタブコントロールが表示されている場合，そのオブジェクトに対しては``On Load``イベントが発生しませんでした。

* ACI0095625 テキスト入力エリア（フィールド/変数）のタイプが「数値」のときと「文字」のときでは，文字列のハイライト処理が違いました。数値の場合，値の手前（左）をクリックすると値全体がハイライトされるべきですが，プロパティリストの変数タイプが「文字」に設定されていると，たとえオブジェクトにバインドされたデータソース（フィールド/変数）の型が数値であっても，テキストのようにハイライトされました。つまり，文字列の左端にカーソルが表示されました。

* ACI0094466 ``MESSAGES OFF``コマンドを使用しても，``BUILD APPLICATION``コマンドのメッセージは抑制できませんでした。

* ACI0094581 コンパイルモードで``QUERY([table];[table]field;*)``という構文のコードを実行するとアプリケーションがクラッシュしました。

* ACI0094716 メソッドエディターで``shift``+クリック操作で番号付きペーストボードにコードをコピーした場合，メソッドの「未保存」ステータスは「保存」に変化しますが，実際には保存されておらず，メソッドを閉じてから開き直すと，保存前の状態になりました。

**注記**: メソッドの「保存」ステータスは，Windowsの場合，ウインドウタイトルに*（アスタリスク）が表示されることで確認できます。Macの場合，ウインドウの閉じるボタン（赤）に中央部分が暗くなっているのが「未保存」のメソッドです。

* ACI0095627 標準テキスト入力からコピーしたテキストをスタイル付きテキスト入力にペーストすると，標準テキストのスタイルで文字列が挿入されました。期待されるのは，ペースト先のスタイルが継承されることです。

* ACI0094807 ``On SQL Authentication``データベースメソッドの$3にはクライアントではなくホストのIPアドレスが返されました。

* ACI0094884 [OpenlinkのJDBC-ODBCブリッジ](https://uda.openlinksw.com/jdbc-odbc-st/)と合わせて4D ODBC Driverを使用した場合，一部のローレベルODBCコマンド（``SQLGetInfoW``, ``SQLGetTypeInfo``, ``SQLDescribeCol``）で問題が発生しました。これらのODBCコマンドは，ODBC 3.x（1996年）で追加されたものです。

* ACI0094904 ``SVG_New_textArea``は，スペースなどの文字が含まれるフォント名に対応していませんでした。``SVG_SET_FONT_FAMILY``を使用する必要がありました。

* ACI0094916 Windows版のみ。.NET ODBCプロバイダー経由で4D ODBCドライバーにアクセスした場合，クエリの結果が完全に返されませんでした。Microsoft Excel，WinSQL，PHPでは問題ありません。C#/.Netアプリケーションからのアクセスは``SQLGetData``のチャンク処理に問題がありました。

* ACI0094976 圧縮されたBLOBがWebサービスから返された場合，BLOBは正しく展開されず，データのサイズが0でした。

* ACI0095047 アプリケーションモードでリストフォームをダブルクリックし，表示された入力フォームでは，ドラッグ操作でテキストを範囲選択できないことがありました。

* ACI0095129 非常に負荷がかかった状態では，稀に``New log file``の実行中にレコード作成のオペレーションがログファイルに記録されないことがありました。

* ACI0095156 v13以前に作成されたPICT画像を``CONVERT PICTURE``で拡大した後，``TRANSFORM PICTURE``または``WRITE PICTURE FILE``で変換しようとすると，アプリケーションがクラッシュしました。

* ACI0095187 Windows版のみ。富士通の日本語入力メソッド『Japanist』をリストボックスのセル内で使用すると，アプリケーションがクラッシュしました。

* ACI0095198 4D Viewのコマンド``PV Create picture``で作成したピクチャーは，透過ピクセルの処理が正しくありませんでした。

* ACI0095232 ``BLOB TO USERS``でストラクチャにユーザー情報をインポートすることができませんでした。

* ACI0095266 フォームにスタイル付きテキストが存在し，テキストにアンパーサンド記号（``&``）が含まれている場合，``Print form``で空のオブジェクトが印刷されました。

* ACI0095294 "Microsoft Generic/Text Only"プリンタードライバーに対して印刷ジョブを送信すると，空の文書が出力されました。

**注記**: 参考までに，当該ドライバーは``Carriage Return``コードを追加することがあり，そのために文書フォーマットが崩れてしまうことがあります。"Text Only"ドライバーで印刷するときには，行の位置を揃えるため，``Courrier New``のような固定長フォントを使用したほうが良いでしょう。

* ACI0095297 Mac 64ビット版のみ。日本語変換中，カーソルが文節の冒頭に表示されました。

* ACI0095299 Mac版のみ。コンボボックスに日本語を入力し，確定した後，別のオブジェクトにフォーカスを移動すると，入力した文字列が失われました。

* ACI0095327 同一マシン上で別の4DがTLSモードでサーバーを公開している場合，通常のポート番号（例: 8080）でWebサーバーを開始することができませんでした。

* ACI0095342 64ビット版のみ。4D ServerのMSC画面では，上級モードの圧縮（レコードを強制的に更新・アドレステーブルの圧縮）ができませんでした。``Replaced Files (compacting)``フォルダーは作成されますが，中身は空です。ログファイルやイベントビューアには何も情報が書き込まれません。

* ACI0095350 64ビット版のみ。ログインダイアログにユーザーのアイコンが表示されませんでした。

* ACI0095632 Windows版のみ。Windows 7では，ストラクチャエディターのインスペクターにテキストを入力している間に日本語入力のガイドラインが表示されませんでした。入力エリアの高さが足りないためです。

* ACI0095633 データベース設定 > インタフェース > でスプラッシュスクリーンでアプリケーションモードのプロセスウインドウを非表示に設定した場合，オブジェクトがフォーカスされていないにも関わらず，編集メニューがアクティブになりました。そのため``control``+``A``のキーボードショートカットをメニューで処理することができませんでした。

* ACI0095651 Windows版のみ。クイックレポートエディターから『ファイルを開く』ダイアログを表示した場合，クイックレポートを閉じた後にも空のウィンドウが画面上に残されました。

* ACI0095681 リストボックスのセルの背景色は，透過に設定されていても，テキスト入力中はホワイトになりました。

* ACI0095686 v13で作成したクエリ定義ファイル（拡張子``.4df``）が開けないことがありました。

* ACI0095695 既存のフォームと同じ名前でフォームを作成しようとしたときに表示されるエラーメッセージの内容が間違っていました。

* ACI0095714 Mac版のみ。フィールドの値がアクセント記号（``è``, ``é``, ``ä``など）で終わる場合，ODBC経由でそのようなデータをSQLで外部データソースに``INSERT``すると，エラー``9922``が返されました。

* ACI0095726 Webサービスウィザードが生成するコードは，廃止予定コマンドである_o_C_STRINGを含んでいました。

* ACI0095738 v13から変換されたデータベースでは，``Print form``で垂直の極細線が印刷できませんでした。``PRINT SELECTION``では問題ありません。新しく描画した垂直の極細線でも問題ありません。

* ACI0095739 ポップアップメニューを表示中にデバッガを表示すると，アプリケーションがフリーズしました。

* ACI0095746 ``SET DATABASE PARAMETER``の定数``Circular log limitation``と値``1``は，ログ（サーバーリクエストログ・Webログ・デバッグログ・クライアントリクエストログ・診断ログ）作成を有効にした後でなければ，ログファイル数の最大値を制限しませんでした。

* ACI0095759 Mac版のみ。クエリエディターでリレートテーブルを参照するクエリが実行できませんでした。

* ACI0095768 Mac版のみ。カスタムマクロに設定されたショートカットが動作しませんでした。

**注記**: 以前のバージョンでは，カスタムマクロの名称に続けてスラッシュ記号を記述することにより，ショートカットを設定することができました。（例: ``/t``）これは，Carbonのメニューアイテムタイトルのメタキャラクター解析によるメカニズムであり，意図された仕様ではありませんでした（非ドキュメント）。修正はされましたが，将来のバージョンでは，XML属性でキーボードショートカットが設定できるよう仕様が明確にされる予定です。なお，Windows版（Altura）では，小文字のメタ文字（例: ``/t``）は``Shift``キーの併用を意味することになります（例: ``Control``+``Shift``+``T``）。``Shift``キーを伴わない単純なショートカットであれば，大文字のメタ文字（例: ``/T``）を記述する必要があります。

* ACI0095772 開かれたデータベース間でオブジェクトメソッドの記述されたリストボックスをドラッグ＆ドロップ操作でコピーした場合，コピー先メソッドの関連付けが正しくありませんでした。アプリケーションの検査を実行すると，同じメソッドが複数のオブジェクトに関連付けられているというエラーが検出されます。

* ACI0095780 Mac版のみ。一部のPDF（スキャナーで取り込んだ後に「プレビュー」で回転させたものものなど）は，用紙の縦と横が誤って表示されました。

* ACI0095788 64ビット版のみ。``PRINTERS LIST``の第2引数は常に空でした。

* ACI0095790 MacOS 10.11のみ。アプリケーションプロセスから起動したクイックレポートの出力先をHTMLまたはテキストファイルに設定した場合，クイックレポートのウインドウを閉じた後もグレーアウトされたウインドウが画面上に残されました。

* ACI0095794 Rバージョンにアップグレードしていないライセンスでアプリケーションを開始し，『デザインモードに戻る』メニューを選択するのではなく，スプラッシュ画面を閉じることによってデザインモードに移行した場合，ライセンス更新のダイアログが表示されませんでした。

* ACI0095804 MSCでアドレステーブルを圧縮せずにデータファイルを圧縮した直後，アドレステーブルの圧縮を含めてデータファイルを圧縮すると，アプリケーションがクラッシュしました。新規データベースでは再現しません。レコードの作成や削除を繰り返したデータファイルでは再現します。

* ACI0095812 特定のケースで``WEB SERVICE CALL``がクラッシュを誘発することがありました。

* ACI0095817 Windows版のみ。``CONFIRM``で表示されたウィンドウは，デフォルトボタンが『キャンセル』でした。本来であrば，『OK』がデフォルトボタンのはずです。

* ACI0095819 コンパイルモードでブール型の評価が間違っていることがありました。たとえば，下記のコードは``True``になるはずですが``False``が返されました。

```
C_BOOLEAN(vv)
vv:=True | False
```

* ACI0095826 Mac版のみ。フォームエディターのコンテキストメニューからリストボックスの列を複製または削除した場合，次の操作をするまでリストボックスが完全には再描画されませんでした。

* ACI0095832 Windows版のみ。日本語変換中，``return``キーを押さずにタイプを続けると，未確定の変換文字列が消えました。

* ACI0095844 クライアント側のメニューからインタープリターモードまたはコンパイルモードに切り替えてサーバーアプリケーションを再起動すると，クライアント側で4D Write Proのライセンスが認識されなくなりました。

* ACI0095847 Windows版のみ。Windows 10 (1607) では，プリントプレビューが表示されないことがありました。

* ACI0095853 デザインモードの検索で数万件のオブジェクトがヒットするような条件を入力すると，しばらくアプリケーションがハングしたような状態になり，デザインモードを操作することができませんでした。

**注記**: 検索の速度ではなく，結果を階層リストに表示するための仕組みに問題がありました。

* ACI0095854 ``HTTP Get``は，特定の場合にテキストファイルを受信することができませんでした。

**注記**: 文字コードが不明な場合，テキスト型ではなBLOB型でファイルを受信したほうが無難です。

* ACI0095877 Mac版のみ。``option``キーを押しながら``delete``キーを入力した場合，カーソル位置の前にある単語が削除されるはずですが，単語の最後の1文字が削除されずに残りました。

* ACI0095885 テキスト入力のプロパティが「入力不可」に設定されており，垂直スクロールバーが設定されていない場合，水平スクロールを操作することができませんでした。「フォーカス化」または「垂直スクロールバー」が設定されていれば問題ありません。

* ACI0095890 macOS 10.12 Sierraのみ。クイックレポートのように，モーダルかつ移動できるウインドウからオペレーションシステム標準のファイル選択ダイアログを表示している間に，デスクトップなどをクリックすると，モーダルウインドウがファイル選択ウインドウよりも前面に移動してしまい，ファイル選択ダイアログが操作できなくなりました。64ビット版の4Dでは問題ありません。

* ACI0095935 macOS 10.12 Sierraのみ。ビルドしたアプリケーションのZIP圧縮ファイルをインターネット経由でダウンロードした場合，展開したアプリケーションを起動すると「エラーダイアログがロードできません。ファイル属性の変更ができません」という趣旨のエラーが表示されました。

* ACI0095967 Windows版のみ。非常に古いバージョンで作成されたPICT画像を4D Writeにコピー/ペーストした場合，枠だけが表示されました。データは残っているようで，``.png``形式に変換すると画像が復元されます。

* ACI0095973 macOS 10.12.1 (16B2657) のみ。フォームエディターのプロパティリストをクリックするとアプリケーションがクラッシュしました。

* ACI0095981 Mac版のみ。旧ラベルエディターで「ファイルを開く・ダイアログを閉じた後，エディター自体もを終了した場合，空のウインドウが画面上に残されました。``SHOW PROCESS``を実行すると，そのウインドウを呼び出すことができます。

* ACI0095992 v6.8で作成されたクイックレポートを読み込んだ場合，レポートは開くことができますが，9エディターを閉じたタイミングでアプリケーションがクラッシュしました。v14であれば，問題なく同じレポートを開くことができます。また，v14で保存し直した後は，v15でも開くことができるようになります。

* ACI0096018 Mac版のみ。SVGで``Arial Black``フォントが使用されていた場合，フォントがインストールされていても``Times``が代わりに表示されました。

* ACI0096050 macOS 10.12 Sierraのみ。PICT形式の画像を.jpgまたは.pngに変換しようとすると，アプリケーションがクラッシュしました。

* ACI0096051 macOS 10.12 Sierraのみ。PICT形式の画像をファイルに保存しようとすると，アプリケーションがクラッシュしました。
 
* ACI0096053 Windows版のみ。4D Viewのツールバーにあるフォーミュラーエディターが黒く表示されました。

* ACI0096082 数値フィールドにフォーマットが適用されており，値の桁数がフォーマットの桁数に満たない場合，水平揃えが常に「右揃え」になりました。

* ACI0095986 プラグインSDKの``eAE_MouseDown``イベントに渡されるタイミング情報が正しくありませんでした。

* ACI0095892 Mac版のみ。macOS Sierraでアプリケーションビルドを実行すると，コード署名に失敗しました。

* ACI0095911 コンパイルモードでInternet Commandsを使用し，画像ファイルを添付してメールを送信した場合，添付ファイルがメールに含まれませんでした。

**注記**: ``SMTP_QuickSend``で送信できるMIMEが32,000バイトに制限されていたことが原因です。

* ACI0095870 Windows版のみ。コンパイルされたアプリケーション（``.4DC``ファイル）をクライアント/サーバーモードで実行した場合，クライアントの``On Startup``が実行されず，エクスプローラーが表示され，ツールボックスやコンパイラーにアクセスすることができました。

* ACI0095872 Mac 64ビット版のみ。ボタンに``command``+``.``のキーボードショートカットを登録することができませんでした。

* ACI0095959 32ビット版のみ。ビルドしたシングルユーザー版のアプリケーションは，4D Writeおよび4D Viewのライセンスを認識しませんでした。

* ACI0096047 オフラインアクティベーションでインストールしたライセンスは，ライセンス管理ダイアログを開き直すまで画面上には表示されませんでした。
