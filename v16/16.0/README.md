4D v16.0
---

* ACI0066193 ``LOG EVENT``に``Into 4D Commands Log``オプションを渡してコメントをシステムログに書き込んだ場合，日本語が化けました。

* ACI0095487 v13で作成したラベルをv15で出力すると，フィールドやスタティックテキストの位置が左上にずれました。

* ACI0095503 Mac/32ビット版のみ。フォームエディターのプロパティリストでフォント名のコンボボックスを上下矢印キーで操作した後，``enter``キーで確定すると，アプリケーションがクラッシュしました。新規オブジェクトでは問題ありません。既存のオブジェクトだけで問題が再現します。

* ACI0095505 Windows版のみ。リストフォームに表示されたフィールドの整列を「右揃え」に設定した場合，幅に収まりきらないテキストが切り捨てられる代わりに，エリアの外に表示されました。

* ACI0095562 Mac版のみ。4DがへルプTipsを表示している間に別のウインドウを最前面に移動した場合，Tipsがすぐに消えませんでした。

* ACI0095574 Mac版のみ。ドラッグ＆ドロップ操作でピクチャを入力した場合，PICT形式で画像が保存されました。画像ファイルではなく，たとえばWebブラウザなどから画像を直接のドラッグ＆ドロップした場合に問題が再現します。

**注記**: PICT形式のサポートは廃止予定です。Cocoa（64ビット）版の4Dや「プレビュー」アプリケーションは，PICT形式の画像を表示することができません。

* ACI0087565 Mac版のみ。無効なコマンド名が``LAUNCH EXTERNAL PROCESS``に渡された場合，``OK``システム変数が``0``にセットされませんでした。

* ACI0088141 ストラクチャエディターのインデックスエクスプローラー画面で，矢印キーを使用してフィールドの順番を変更すると，エラー``-20001``（配列の範囲チェック）が返されました。

* ACI0091205 ``MAXINT``を超える行番号で[SAX Get XML node](http://doc.4d.com/4dv15r/help/command/ja/page860.html)のエラーが発生した場合，[GET LAST ERROR STACK](http://doc.4d.com/4dv15r/help/command/ja/page1015.html)に負の行番号が返されました。

* ACI0091264 ``String``で``ISO Date GMT``フォーマットに日付と時間を変換した場合，夏時間（フランスでは3月29日の早朝3時から実施）を反映しませんでした。以前のプラグイン``AP Timestamp to GMT``では問題ありませんでした。

* ACI0091810 フォームエディターでリストボックスの列を複製し，``command+Z``で取り消した直後の再描画が崩れていました。

* ACI0092274 [ON EVENT CALL](http://doc.4d.com/4dv15r/help/command/ja/page190.html)を中止する（イベントマネージャープロセスを通常にプロセスに切り替える）ためのキーコンビネーション（Windows版は``Control``+``Shift``+``Backspace`` Mac版は``command``+``shift``+``control``+``backspace``）が効きませんでした。

* ACI0092571 [ユーザー設定](http://doc.4d.com/4Dv15R5/4D/15-R5/Using-user-settings.300-2964123.ja.html)が使用されている場合，アップグレード後に互換性オプションの「旧ネットワークレイヤーを使用する」が解除されました。

* ACI0093999 Mac版のみ。4D Writeにテキストを入力すると，カーソルが消えました。マウスを動かすと再びカーソルが表示されました。

* ACI0095653 4D Viewエリアのプロパティリストに[詳細設定](http://doc.4d.com/4Dv15R4/4D/15-R4/Plug-in-areas.300-2880332.ja.html)ボタンが表示されませんでした。

* ACI0095790 MacOS 10.11のみ。アプリケーションプロセスから起動したクイックレポートの出力先をHTMLまたはテキストファイルに設定した場合，クイックレポートのウインドウを閉じた後もグレーアウトされたウインドウが画面上に残されました。

* ACI0095726 Webサービスウィザードが生成するコードは，廃止予定コマンドである``_o_C_STRING``を含んでいました。

* ACI0095695 既存のフォームと同じ名前でフォームを作成しようとしたときに表示されるエラーメッセージの内容が間違っていました。

* ACI0095359 ラジオボタンをクリックすると，イベントが発生しませんでした。チェックボックスでは問題ありません。

* ACI0095354 フォームウィザートを使用して印刷用リストフォームを作成すると，ストラクチャに問題が発生しました。MSCの検査ではオブジェクト名の重複が報告され，``METHOD GET PATH``は``-9802``エラーを返します。

* ACI0095321 [MODIFY SELECTION](http://doc.4d.com/4Dv15/4D/15.1/MODIFY-SELECTION.301-2684948.ja.html)で実行されたフォームが表示されている間は，ヘルプメニューが動きませんでした。

* ACI0095286 クイックレポートの列フィールドに``###,###,###,##0.00``のようなフォーマットを設定した場合，HTML出力でフィールドの値ではなく，タイトルにフォーマットが適用されました。

* ACI0095271 Mac版のみ。リストボックスの行が選択された状態でフォーカスを移動すると，テキストの色が白のまま，背景色だけがグレーに変化しました。

* ACI0095265 ``DESCRIBE QUERY EXECUTION``を宣言してから，複数のクエリを実行した場合，``Get last query plan``と``Get last query path``は最初に実行したクエリに関する情報を返しました。コマンドは最後に実行したクエリに関する情報を返すはずです。

* ACI0095250 トランザクション中，保存場所が「データファイルの外」に設定されているピクチャーフィールドに画像を代入して新規レコードを保存し，トランザクション中にアンロード/ロードした場合，画像がロードされませんでした。トランザクションを確定した後でなければ，画像をロードすることができませんでした。

* ACI0095211 コンボボックスにタイプ入力中，完全に一致するアイテムがない限り，項目が選択されませんでした。以前のバージョンでは，前方一致した最初のアイテムが選択され，途中でEnterキーを入力すれば入力中のテキストが補完されました。

* ACI0095129 非常に負荷がかかった状態では，稀に[New log file](http://doc.4d.com/4dv15r/help/command/ja/page926.html)の実行中にレコード作成のオペレーションがログファイルに記録されないことがありました。

* ACI0095085 4D Serverのシャットダウン画面で「キャンセル」ボタンをクリックすると，サーバーは動き続きますが，接続中のクライアントは接続が切断され，新規接続はできなくなりました。

* ACI0095042 ``Dec``から正しい値が返されないケースありました。

```
Dec( (1/105000)*105000) // 0ではなく1が返される
```

**注記**: 修正により，``Dec``は限りなく``+/-1``に近い値の整数部を返すようになりました。


* ACI0094978 サポートされないSQL（CASE...WHEN...）でビューを作成しようとすると，アプリケーションがクラッシュしました。


* ACI0094901 16桁の数値に対して``Mod``でモジューロを求めると，負の値が返されました。PHPであれば問題ありません。

```
nb:="0429429886111400"
ALERT(String(Mod(Num(nb);97)))
// BUG => -41

$result:=PHP Execute("";"bcmod";$T_Resultat;nb;"97")
ALERT($T_Resultat)
// OK => 56
```

**注記**: [ドキュメント](http://doc.4d.com/4Dv15/4D/15.1/Mod.301-2685791.ja.html)に述べられているように，(2^31を超える) おおきな実数に対してModを使用する場合には注意が必要です。

* ACI0095627  標準テキスト入力からコピーしたテキストをスタイル付きテキスト入力にペーストすると，標準テキストのスタイルで文字列が挿入されました。期待されるのは，ペースト先のスタイルが継承されることです。

* ACI0095305 Windows版のみ。別々のフォームページに4D Writeと4D Webエリアをそれぞれ配置し，ページを切り替えると，4D Writeにテキストを入力することができなくなりました。

* ACI0094700 エクスプローラーの「ホーム」タブでメソッドをわずかでもドラッグすると，階層のトップレベルに移動しました。軽くクリックしただけのつもりでも，マウスポインターが少しでも移動しれば，メソッドが移動してしまいました。

* ACI0094484 テキスト入力エリアのボーダースタイルが標準（``Plain (1)``）に設定されていた場合，ボーダーの色はフォントカラーを踏襲せず，常にブラックでした。フォームエディター上は問題ありません。ランタイムの問題です。

* ACI0094154 [Select folder](http://doc.4d.com/4dv15r/help/command/ja/page670.html)は，指定されたフォルダーを選択するコマンドですが，階層に多数のフォルダーが存在する場合，目的のフォルダーまでリストをスクロールしませんでした。v2004以来の不具合です。

**注記**: これは[Windows](https://connect.microsoft.com/VisualStudio/feedback/details/518103/bffm-setselection-does-not-work-with-shbrowseforfolder-on-windows-7)の不具合です。回避策として，必要であれば，目的のフォルダーまでスクロールするようコマンドが改修されました。

* ACI0093858 リストフォームに複数のブレークが設定されている場合，「ブレーク1，ブレーク2，ブレーク3，ブレーク」のような順序でプロパティリストに表示されました。ヘッダーの順序は問題ありません。
