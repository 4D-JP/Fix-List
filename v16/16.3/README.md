## 4D v16.3
[4D v16.2 Hotfix 1](https://github.com/4D-JP/release-notes/tree/master/v16/16.2/hf1/)の修正事項もご覧ください。

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0097330 Windows版のみ。Tahomaフォント（``11``ポイント）のテキストをリストボックスに表示した場合，デセント（``p``や``g``などのぶら下がり部分）がカットされてしまいました。Times New Romanフォント（``15``ポイント）でも同じ問題が発生します。

**注記**: ACI0095580およびACI0097330の修正により，リストボックスの標準テキストレンダリングはGDIからDirectWriteにAPIが変更されました。16.1と16.2以降でテキストのアピアランスが違っているのはそのためです。

**更新**: DirectWriteレンダリングは，リストボックス列のリサイズに影響することが判明したため，将来のバージョンに延期されました。互換性に配慮し，この問題は16.0のレンダリングに戻すことで再修正されました。

* ACI0097572 メソッドの途中にカーソル位置が存在する場合，キーストローク毎にカーソルの位置がずれてゆきました。

* ACI0097457 Mac版のみ。アプリケーション名にアポストロフィ記号が含まれている場合，クライアント自動アップグレードが成功しませんでした。

---

* ACI0097521 macOS 10.13 High Sierraのみ。リストボックスのセルにマウスポインターを重ねると，ポップアップメニューが関連づけられていることを示す矢印アイコンが消えました。

* ACI0097383 変数に対する参照をSQLの``INSERT``文で使用した場合，その変数のいずれかに空の文字列が含まれていると，Microsoft SQL Serverに値を送信することができませんでした。エラーメッセージが表示されることも，エラーハンドリングメソッドが実行されることもありません。

* ACI0097545 新ネットワークレイヤーのみ。サーバーに接続されたクライアントのプロセス状態が「遅延」のときにクライアントを強制終了した場合，サーバー側のプロセスがいつまでの消えませんでした。期待されるのは，旧ネットワークレイヤーであれば「クライアント/サーバー接続タイムアウト」で設定した時間が経過した後，新ネットワークレイヤーであれば30秒後に異常終了したクライアントのプロセスが自動消滅することです。

* ACI0097564 バックアップ実行中に内部ランタイムエラー``22``（無効な引数）が返されることがありました。内部エラーが検出されたとしても，ダイアログを表示するべきではありません。

* ACI0097380 64ビット版クライアントのみ。サーバーに接続しているユーザーの数が多いと，ラベル印刷に時間がかかりました。たとえば，1ユーザーであれば約1秒，10ユーザーであれば同じラベルの印刷に4=5秒ほど要しました。

* ACI0097519 Mac版のみ。``SVG Find element ID by coordinates``コマンドで塗りつぶし（``fill``）色が黒（``black``）のオブジェクトを検出することができませんでした。

* ACI0097413 ``Request``ダイアログをキャンセルした場合，空の文字列ではなく，デフォルト入力値が返されました。

* ACI0097197 4D Write Proエリアをフォームに配置した場合，フォームの右および下側に数ピクセルのマージンが加算されました。

* ACI0097537 ホストよりも新しいバージョンの4Dでコンパイルされたコンポーネントメソッドを実行すると，アプリケーションが終了することがありました。

* ACI0097486 macOS 10.13 High Sierraのみ。64ビット版の4Dで印刷設定ダイアログから印刷プレビューを実行した場合，プレビューを閉じた後，印刷設定ダイアログを操作することができませんでした。ダイアログを閉じるためには，アプリケーションを強制的に終了するしかありません。

* ACI0097448 ``On After Edit``および``On Data Change``イベントが有効にされたフォームにコンボボックスが存在する場合，``On After Edit``イベントでコンボボックスの自由入力アイテム（0番要素）に新しい値を代入しても，確定時に``On Data Change``イベントが発生しませんでした。``On After Edit``イベントが併用されていなければ，つまり，通常のタイプ入力で更新したのであれば，コンボボックスの入力確定時に``On Data Change``イベントが発生します。

* ACI0097005 ツールボックス「リソース」ページのリストビューで2個以上のアイテムが選択されている場合，削除ボタンをクリックしてもアイテムが削除されませんでした。また，右クリック操作をしても，コンテキストメニューが表示されませんでした。

* ACI0097460 複数のビルドされたクライアントアプリケーションが同じフォルダーに存在する場合，一方の自動アップグレードが進行している間に他方のアプリケーションが自動アップグレードを開始すると，両方のアプリケーションがクラッシュしました。自動アップグレードの一時ファイルに共通の名前「``$Tempo4DClient``」が使用されているためです。

* ACI0097359 クエリエディターに16個以上のフィールドが表示されている場合，擬似ポップアップメニューに表示されるフィールドリストを矢印キーで操作することができませんでした。キー入力すると，ポップアップメニューが閉じられ，最後に選ばれていたフィールドが選択されました。

* ACI0097635 macOS 10.13 High Sierraのみ。``Get file from pasteboard``コマンドの実行に長い時間（1分ほど）を要しました。``Pasteboard data size``でも同じ問題が発生します。

* ACI0097621 64ビット版のみ。ビルドしたサーバーアプリケーションの「データベース設定」メニューでは，ユーザー設定とストラクチャ設定を切り替えるための階層メニュー項目が表示されませんでした。ストラクチャファイルとデータファイルが同じフォルダー内になければ問題ありません。
