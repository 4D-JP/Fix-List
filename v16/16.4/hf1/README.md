## 4D v16.4 Hotfix 1

* ACI0098405 ``Open Window``あるいは``Open form window``で開いたウィンドウに表示された文字列を``MESSAGE``コマンドで更新することができませんでした。

* ACI0098651 4D Mobileプロセスが再利用されることにより，散発的にアプリケーションがクラッシュしました。サーバーが4D Mobileリクエストを受信すると，データベース実行コンテキストが作成され，そのためのWebプロセスも作成されます。リクエストを処理した後，Webプロセスは再利用できる状態になります。そこで4D MobileではないWebリクエストをサーバーが受信すると，Webプロセスが再利用されます。そのプロセスを処理している間，最初に処理した4D Mobileリクエストの続きを受信すると，当初のプロセスが別のWebプロセスに再利用されているため，新規Webプロセスがそのデータベース実行コンテキストのために作成されます。その後，4D MobileではないWebリクエストの処理が完了し，しばらく使用されていないと，関連付けられたデータベース実行コンテキストが破棄されます。その後，最初に処理した4D Mobileリクエストの続きを受信すると，4D MobileではないWebリクエストを処理したプロセスが使用され，そのデータベース実行コンテキストがすでに破棄されてしまっているため，アプリケーションがクラッシュします。端的に言えば，4D Mobileを処理したWebプロセスは再利用されるべきではありません。

* ACI0098522 標準アクションを使用してカレントレコードを移動すると，別ページに配置されたプラグインエリアに対してもレコードがロードされたというイベントが配信されました。カレントページのアクティブなエリアだけがイベントを受け取るべきです。

* ACI0098645 ``OBJECT Get style sheet``は，オブジェクトに設定されたスタイルシートではなく，スタイルシート0番を常に返しました。

* ACI0098497 4D Serverのデータベース設定ダイアログに``2048 MB``以上のキャッシュサイズを入力して『適用』ボタンをクリックした場合，キャッシュサイズが正しく設定されませんでした。``SET CACHE SIZE``であれば問題ありません。

* ACI0098490 プラグインSDKの``PA_AcceptDeselect``でプラグインエリアのフォーカスを拒否できないことがありました。一度目は成功しますが，二度目はエリアにフォーカスが移動します。

* ACI0098753 印刷設定ダイアログを表示している間，1個のCPUが完全に占有されました。バーチャルマシン，あるいはターミナルサーバーやCitrixサーバーなどで4Dを運用している場合，同時に印刷設定ダイアログを表示させているユーザーの数だけCPUが占有されました。

* ACI0098674 カレントセレクションが空のテーブルに対して``LONGINT ARRAY FROM SELECTION``を使用した場合，空の配列が返されませんでした。

* ACI0098590 [アプリケーション配布のための新アーキテクチャー](http://doc.4d.com/4Dv17/4D/17/Compatibility-page.300-3743489.ja.html)が無効に設定されており，旧式ネットワークレイヤーを使用している状態で``enginedserver.4dlink``で指定されたサーバーに接続できないと『サーバーに接続』ダイアログが表示されますが，『利用可能なサーバー』ページには新ネットワークレイヤーで公開されているサーバーの名前だけが表示されました。``Alt/option``キーを押しながらアプリケーションを起動してダイアログを呼び出せば，旧式ネットワークレイヤーで公開されているサーバーも表示されます。また，カスタムタブにアドレスを入力すれば，旧式ネットワークレイヤーで公開されているサーバーに接続することができます。

* ACI0098384 配列型リストボックスの列に行の背景色配列が含まれている場合，``LISTBOX DELETE ROWS``コマンドで（最終行ではない）行を削除しようとすると，指定した行だけでなく，最終行も削除されました。

* ACI0098507 64ビット版のみ。サーバー側で``MSG_Charset``および``MSG_GetBody``を使用した場合，特定の組み合わせ（``1;1``, ``0;1``）でアプリケーションがクラッシュしました。``MSG_Charset``を使用しなければ問題ありません。

* ACI0098390 ``IMPORT TEXT``またはインポートダイアログを使用して実数またはFloat型フィールドにテキストデータを読み込んだ場合，スペース記号など，数字ではない文字がデータの前後に存在すると，``0``がインポートされました。整数・倍長整数・64ビット整数では問題ありません。

* ACI0087085 外部アプリケーションから``tab``コードが含まれる文字列をメソッドエディターにドラッグ＆ドロップあるいはコピー＆ペーストすると，``tab``文字が無視されました。

* ACI0098578 ``SMTP_SetPrefs (0;2;0)``のように改行コード挿入設定に``0``とした場合，MIMEに``CRLF``コードが重ねて出力され，一部のメールクライアントではHTMLが表示される代わりにBASE64のエンコードデータがそのまま表示されました。

* ACI0098609 64ビット版のみ。クイックレポートエディターのページ設定画面で用紙の向きを変更した場合，設定が保存されませんでした。アプリケーションを再起動すると，用紙の向きが縦（デフォルト）に戻りました。

* ACI0098531 17日以上前に起動したマシンで，プラグインSDKのイベント処理をすると，マウスダウンよおびマウスアップイベントの発生時間が正しく返されませんでした。キーダウンイベントは問題ありません。

* ACI0098879 macOS 10.14 Mojaveのみ。4D Serverの管理画面の表示が崩れていました。CPU使用率のポップアップメニューに不要な白い垂直線が表示されました。

* ACI0098799 macOS 10.14 Mojaveのみ。4D Serverの管理画面の表示が崩れていました。ページ切り替え用のタブに不要な白い垂直線が表示されました。
