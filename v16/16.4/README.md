## 4D v16.4
[4D v16.3 Hotfix 5](https://github.com/4D-JP/release-notes/tree/master/v16/16.3/hf5/)および[4D v16.3 Hotfix 4](https://github.com/4D-JP/release-notes/tree/master/v16/16.3/hf4/)および[4D v16.3 Hotfix 3](https://github.com/4D-JP/release-notes/tree/master/v16/16.3/hf3/)および[4D v16.3 Hotfix 2](https://github.com/4D-JP/release-notes/tree/master/v16/16.3/hf2/)および[4D v16.3 Hotfix 1](https://github.com/4D-JP/release-notes/tree/master/v16/16.3/hf1/)の修正事項もご覧ください。

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0098246 Mac 64ビット版およびWindows版のみ。ダイアログを表示中に``ADD RECORD``を実行し，切り替わった入力フォームでボタン（フォーカス可・タブ可）がフォーカスされた場合， ``GOTO OBJECT``を使用してテキスト入力エリアにフォーカスを移動しても，日本語入力メソッドがオフになったままでした。

* ACI0098386 日本語変換入力中に表示される下線の色がブラックに固定されていました。

* ACI0098277 環境設定でフォームエディターにデフォルトで表示されるバッジを変更した場合，エディターのツールバーに表示されるアイコンが選択されているバッジと合わないことがありました。たとえば『オブジェクトメソッド』のバッジが選択されているのに『標準アクション』のアイコンが表示されました。

* ACI0098213 Windows版のみ。``HTTP Get``コマンドで特定のURLにアクセスするとエラー#30（``HTTP Server unreachable``）が返されました。

* ACI0098307 Windows 32ビット版のみ。実行中の印刷ジョブをキャンセルボタンで中止することができませんでした。

---

* ACI0098237 ``SEND RECORD``で書き出したv2004のレコードをv14以降の``RECEIVE RECORD``で読み込もうとした場合，アプリケーションがクラッシュしました。

* ACI0098264 Windows 10 アップデート ``1803``以降，サービスとして登録された4D Serverの起動時にエラー``193 0xC1``が返されるようになりました。ビルドして署名したサーバーアプリケーションをサービスとして起動した場合にだけ問題が発生します。

* ACI0098363 デザインモードの『未使用のローカル変数を検索』メニューを実行した場合，コレクション型およびオブジェクト型の変数が検出されませんでした。

* ACI0097823 プリエンプティブモードで``RESOLVE POINTER``を実行すると，空の文字列が返されました。

* ACI0097388 デザインモードの『未使用のローカル変数を検索』メニューを実行した場合，BLOB配列，オブジェクト配列，時間配列は検出されませんでした。

* ACI0097690 ``String``の引数として，直接，``Sum``, ``Min``, ``Max``などの統計関数を渡した場合，エラー``54``（引数の型が一致しません）が返されました。``*1``や``+0``などの演算子を添えて式の型を特定すれば問題ありません。

* ACI0098261　``MODIFY SELECTION``で表示した出力フォームからダブルクリック操作で入力フォームに移行した場合，リストボックスのチェックボックスは（入力可であっても）入力不可であるかのように表示されました。

* ACI0098179 64ビット版のみ。ファイルメニューの「データをファイルに書き出し」で表示されるダイアログは，自動リレーションに対応していませんでした。リレートテーブルを選択しても，マスターテーブルのフィールドが表示されました。

* ACI0098184 4D Write文書に埋め込まれた``Num(...) * "..."``のような式は，4D Write Proに変換した後，正しく評価されませんでした。

* ACI0097912 クライアント/サーバー通信の暗号化が有効にされており，データベース設定でアプリケーション開始時にWebサーバーが自動的に起動するように設定されていた場合，中間証明書のチェーンが不完全となり，セキュリティ評価が下がりました。メニューやコマンドでWebサーバーを起動した場合には問題ありません。

* ACI0098271 特定の条件が揃った場合，4D Write Proの取り消し（``undo``）操作で直前に入力した文字だけでなく，キャレットの右隣にある1文字が余計に削除されました。

* ACI0098163 セレクション型のリストボックスに『サブレコード追加』標準アクションでレコードを追加し，セルにタイプ入力したテキストが未確定の状態で再びレコード追加を実行すると，編集中だったセルの値が新規レコードのセルに引き継がれました。

* ACI0098321 Mac版のみ。ビルドしたサーバー版アプリケーションでMSCの検査を実行すると，クラッシュする場合がありました。ビルドしたデスクトップ版やインタープリターモードでは問題ありません。

* ACI0097889 4D Writeプラグインで作成した文書（``4W7``）を4D Write Proで開いた場合，読み込みに時間がかかりました（``0.2``秒だったものが``0.4``秒に）。

* ACI0098368 ``DELAY PROCESS``で遅延したプロセスを``PAUSE PROCESS``で停止した場合，1回の``RESUME PROCESS``では再開することができず，``RESUME PROCESS``または``DELAY PROCESS(...;0)``をもう一度コールする必要がありました。

* ACI0098376 4D Write Proエリアよりも低い位置に配置されたオブジェクトは，4D Write Proよりも背面にない限り，つまり，4D Write Proのほうが前面にない限り，``PRINT SELECTION``または``PRINT RECORD``で印刷されませんでした。

* ACI0098429 Windows 64ビット版のみ。``SET CURRENT PRINTER``を実行すると，サーバーがクラッシュすることがありました。

* ACI0098117 ``IMAP_Search``でアプリケーションがクラッシュする場合がありました。ACI0096656修正の副作用です。リクエストが長すぎる場合，サーバーに拒否されることがあります。修正により，クラッシュする代わりに，エラーが返されるようになりました。

* ACI0098269 ``CHANGE CURRENT USER``でクライアントのカレントユーザーを変更しても，サーバー管理画面に新しいユーザー名が反映されませんでした。

* ACI0098260 Windows版のみ。XPSビューアがインストールされていない場合，漠然としたランタイムエラーが返されました。

**注記**: Windows 10 1803以降，XPSビューアはデフォルトでインストールされないようになりました。1709以前のバージョンでも，アンインストールすることができます。修正により，『ファイルがみつかりません』ではなく，『XPSビューア（ドライバー）がインストールされていません』というメッセージが返されるようになりました。

* ACI0098245 Windows 1803以降のみ。``Tahoma``フォントを番号で参照している古いフォームを表示すると，Wingdings``で表示されました。フォームを再保存すれば，問題は解消されます。

* ACI0098480 ``QR RUN``コマンドでテキスト形式のクイックレポートを出力した場合，システム変数の``FldDelimit``および``RecDelimit``ではなく，既定の区切り文字（``Tab``および``Carriage return``/Windows版は``CR LF``）が使用されました。

* ACI0098476 4D Viewのセルに``=``記号を入力すると，マウス操作でセルを指定してフォーミュラを入力することができますが，Retinaディスプレイでは，正しい座標の範囲が選択されませんでした。

* ACI0097377 4D Viewに貼り付けられた画像をコンテキストメニューの『クリア』で消去し，入力を確定した後，同じレコードを開いてピクチャーの参照をダブルクリックし，ピクチャー属性の『縦横比を保持』を有効にすると，アプリケーションがクラッシュしました。
