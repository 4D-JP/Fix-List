## 4D v16.1 Hotfix 2

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0096073 Mac版のみ。ピクチャオブジェクト間の自動ドラッグ/ドロップ操作が完了するまでに数秒かかりました。

* ACI0096635 特定のWebサーバーに対して``HTTP Requst``でアクセスした場合，「404」の代わりに「#5」という内部エラーが返されました。

* ACI0096586 特定のセキュアWebサーバーに対して``HTTP Requst``でアクセスすることができませんでした。

**注記**: TLS拡張のServer Name Identification (SNI) の非サポートが原因でした（ACI0096635と同じ）。

* ACI0096320 64ビット版のみ。フォームエディターは，プロパティリストで印刷設定ボタンをクリックすると，プロパティリストが消え，印刷設定ダイアログを閉じた後もプロパティリストが再表示されませんでした。デスクトップをクリックするなどして，明示的にアプリケーションを最前面に移動すれば，プロパティリストが再表示されます。

* ACI0096307 64ビット版のみ。ストラクチャエディターは，フォント名を変更しても，設定が反映されませんでした。どのフォントを選択しても``Agency FB``が設定されました。

* ACI0096117 v14で作成されたメソッドに長文のスタティック文字列が含まれている場合，バージョンアップ時に途中の文字列が失われました。

例：

```
$t:="０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３\
４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９\
０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５\
６７８９０１２３４５６７８９０１２３４５６７８９０１２"
```

上記のようなテキスト（200文字）をv14でトークナイズすると203文字になりますが，これをv15またはv16に変換すると163文字になり，40文字が失われます。

```
$t:="０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３\
４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４"+"５６７８９０１２３４５６７８９０１２３４５６７\
８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２３４５６７８９０１２"
```

---

* ACI0096938 Mac 64ビット版のみ。フォームを実行したときのフォントは，フォームエディターのように表示が滑らかではありませんでした。ACI0096838が修正されたことによる副作用のようです。

**注記**: フォームを実行したときのスタティックテキストは，透明なCocoaレイヤーの上にペイント描画されているため，ピクセルアンチエイリアスではなく，グレースケールアンチエイリアスが使用されています。そのため，フォームエディターとまったく同じ描写にはなりません。背景色が指定されているオブジェクトであれば，エディターとランタイムでテキストのアンチエイリアス処理が一致します。

* ACI0096881 64ビット版のみ。"Arial Narrow"など，DirectWrite系のフォントファミリーは印刷またはプレビューに反映されませんでした。また，4D View Pro版の新リストボックス（クイックレポートエディターなど）では画面にも反映されませんでした。

* ACI0096764 「アプリケーション配布に新しいアーキテクチャを使用する」オプションが有効にされたデータベースをシングルユーザー用にビルドし，``Alt``キーを押しながら起動してMSCを開くと，エラーが表示された後，アプリケーションがクラッシュしました。
* ACI0096848 ``SELECTION TO ARRAY``でオブジェクト型の配列をリストボックスに転送することを繰り返していると，メモリーリークが発生しました。``LISTBOX DELETE ROWS``, ``CLEAR VARIABLE``, ``ARRAY OBJECT (...;0)```のいずれかを実行すれば，リストボックスに表示されていたデータの占有メモリーは解放されるべきです。

* ACI0096758 ``HTTP FIXER OPTION``コマンドで``HTTP compression``を``1``に変更しても，設定が反映されませんでした。

* ACI0096819 Mac 32ビット版のみ。「メール」アプリケーションからウムラウト文字が含まれるテキストを4Dのスタイル付きテキスト入力エリア（フィールドまたは変数）にペーストすることができませんでした。他のアプリケーションでは問題ありません。

* ACI0096621 トランザクション内でインデックスクエリを続けて実行した場合，確定していないトランザクション中に作成されたレコードもセレクションに含まれました。インデックスクエリでなければ問題ありません。

* ACI0096771 SQLの``LEFT OUTER JOIN``の``WHERE``句に2個以上のインデックス日付フィールドが含まれると，4Dがフリーズしました。

* ACI0096582 ブール型の条件が3個以上含まれるクエリ定義ファイル（``.4DF``）が正しく読み込まれませんでした。

* ACI0096838 Mac64ビット版のみ。以前のバージョンと比べて特定のフォントが細く表示されました。

**注記**: ピクセル以下のアンチエイリアスが修正されました。64ビット版のスクリーンショットに影響があります。

* ACI0096567 4D Writeプラグインで作成した文書を``WP Import document``でWrite Proにインポートした場合，複数行のテキストが含まれるテーブルがうまく変換されませんでした。

* ACI0096835 特定の条件が揃った場合，クライアントを終了した後みサーバーの管理画面にアプリケーションプロセスが残されました。アプリケーションプロセスからストアドプロシージャーを起動し，しばらく待っていると，サーバーの管理画面上でアプリケーションプロセスが「延期」状態になります。この状況でクライアント側のアプリケーションを終了すると，サーバー側の管理画面からアプリケーションプロセスが消えませんでした。

* ACI0096804 フォルダー内に多数の項目が含まれる場合，``FTP_GetDirList ``が処理を完了するまで非常に時間がかかりました。以前のバージョンでは``0.250``秒ほどかかった処理が，Macでは数秒，Windowsでは数分を要しました。

* ACI0096812 クライアント側で接続の切断エラーが検出された場合，「リクエストの送信中に深刻なエラーが発生した」という大袈裟なエラーメッセージが表示されました。再接続が必要なだけであり，深刻なことは何もないはずです。

* ACI0096625 キリル文字が含まれるパスからアプリケーションを起動すると，エラーが返されることがありました。

* ACI0096949 Windows版のみ。旧ネットワークレイヤーでクライアント/サーバーアプリケーションを運用していると，時々，サーバーの反応が非常に悪くなることがあります。デッドロック現象が発生している間は，新規クライアントの接続もできません。環境にも依存するようです。

* ACI0097008 ``CHECK LOG FILE``で表示されるアクティビティ解析ダイアログのリストボックスは，セルが入力不可ではありませんでした。MSCでは問題ありません。

* ACI0096790 Windows版のみ。リストボックスのブール型フィールド（表示フォーマットがチェックボックスまたはポップアップ）が印刷に反映されませんでした。

* ACI0096871 ``HTTP Get``の前に``HTTP AUTHENTICATE'``コマンドで__``Digest Authentication``を使用してApacheサーバーに接続した場合，URIにクエリ文字列が含まれていると，URIの不一致エラーが返されました。

* ACI0096146 Macのみ。``SET FILE TO PASTBOARD``を使用しても，ファイルをフォームからデスクトップなどのFinderフォルダーにドラッグ＆ドロップすることができませんでした。Finder以外のアプリケーションに対するドラッグ＆ドロップであれば問題ありません。64ビット版であれば，操作を完了することができますが，ファイルが以前のバージョンのように移動ではなく，コピーされました。

* ACI0096937 Windows版のみ。リストフォーム内で``On Display Detail``イベントが処理されている場合，マウスのロールボタンによるスクロールが少し遅くなります。その状態でスクロール中に右クリックイベントを処理し，``Pop up menu``でポップアップメニューを表示すると，アプリケーションが終了しました。

* ACI0096856 Internet Commandsで送信したメールをiOSデバイス（iPhoneまたはiPad）で受信した場合，添付のPDFファイルが表示されませんでした。Outlookなどのメールクライアントでは問題ありません。
