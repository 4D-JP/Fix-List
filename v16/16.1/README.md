4D v16.1
---

Nightly Build ``207983``

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0096078 ポップアップメニューの項目に空の文字列が存在する場合，0番項目の代わりにその項目が選択されました。

* ACI0095550 メソッドエディターで取り消し/やり直し（``command``+``Z``, ``command``+``shift``+``Z``）操作をすると，日本語変換途中の各候補が表示されました。

* ACI0095980 Mac 64-bit版のみ。メソッドエディター内で``shift``+左キーを入力したときの範囲選択が間違っていました。入力と同時に範囲の終末も移動したため，1度に2文字以上を選択することができませんでした。

---

* ACI0094989 テーブルにタイトル名を設定した場合，インポート画面にはテーブル名ではなくタイトル名でソートされたテーブルリストが表示されますが，そのような状態でインポートを実行すると，間違ったテーブルにデータが追加されました。

* ACI0096029 ``tab``キーでフィールドに移動した直後，カーソルの点滅が表示されない状態から開始しました。素早く``tab``キーで移動した場合，1秒間待たなければ，どこにカーソルが置かれているのか，わかりませんでした。

* ACI0095787 Mac 64-bit版のみ。メニューアイテムにキーボードショートカットを設定した場合，指定したのとは違うメソッドが実行されることがありました。

**注記**: 原因はファイルメニューの最後に終了メニューがなかったことでした。

* ACI0096131 Mac 64-bit版のみ。ボタンからテキスト入力へ``tab``キーで移動した場合，日本語入力メソッドが使用不可になることがありました。

* ACI0096177 プレビュー部分が非表示にされた状態でエクスプローラーを閉じ，ショートカット（``Control``+``Shift``+``Alt``+``E``）で再表示させた場合，プレビュー部分を表示させるためのボタンアイコンが間違っていました。その状態でテーブルのフィールドを選択すると，アプリケーションがクラッシュしました。

**注記**: 下記のファイルを削除することにより，エクスプローラーのフォーム設定を初期化することができます。

- Windows: ``C:\Users\<ユーザー名>\AppData\Roaming\4D\``
- Mac: ``/Users/<ユーザー名>/Library/Application Support/4D/``

* ACI0096242 Windows版のみ。Access 2013からODBC経由でUUIDフィールドにアクセスするとエラーが返されました。Windows 10のExcel 2013からMS Queryの64ビット版でアクセスした場合は問題ありません。

* ACI0085050 Bootcampで起動したWindowsをMacのRetinaディスプレイに表示した場合，デバッガのツールバーが表示されませんでした。通常のWindowsでは問題ありません。

* ACI0094528 Windows版のみ。マトリクスプリンター「Dascom 2600」に搭載されているプリンターフォントはプロパティリストに表示されませんでした。ツールボックス > スタイルシートには表示されます。

**注記**: 64ビット版では，印刷にデフォルトでDirect2Dテクノロジーが使用されます。画面には，Direct2Dに対応したフォントしか表示できないため，その大半がTrueTypeまたはOpenTypeであるプリンターフォントはフォームエディターのプロパティリストに含まれていませんでした。64ビット版でDirect2Dに対応していないフォントをフォームに使用することもできますが，画面と印刷の出力を一致させるためには，旧式のGDI印刷を有効にすることが勧められています。

```
SET PRINT OPTION(Legacy printing layer option;1)
```

* ACI0095712 リストボックスの自動アクションに「ページ移動」を設定した場合，クリックイベントでしかアクションが実行されませんでした。オブジェクトがフォーカス可であれば，上下矢印キーでも操作できるはずです。

**注記**: ページ移動後，リストボックスにフォーカスがとどまるようにするためには，下記のようなコードが必要です。

```
If (Form event=On Page Change)
	GOTO OBJECT(*;"List Box")
End if 
```

* ACI0095899 Mac版のみ。配列型リストボックスのヘッダータイトルは，ソートされているカラムだけ垂直揃えが上揃えになりました。

* ACI0096113 リストボックスのセルに表示された数値を``backspace``キーで削除した後，``tab``キーでセルを抜け出ると，消したはずの値がまた表示されました。日付でも同じことが起きますが，テキストでは問題ありません。

* ACI0096138 Windows版のみ。リストボックスのセル内で``tab``文字が表示されませんでした。

* ACI0096157 リストボックスのセルに文字列をペーストした場合，``On After Edit``イベントが発生しませんでした。

* ACI0096259 Mac 64ビット版のみ。システム環境設定でプリンターが1台も登録されていない場合，ラベルエディターの「プレビュー」ボタンをクリックするとアプリケーションがクラッシュしました。

* ACI0096265 Windows版のみ。サーバー管理画面に表示される送信バイト/秒と受信バイト/秒は値が逆でした。グラフにも受信バイトの代わりに送信バイトが表示されました。

* ACI0095709 32ビット版のみ。4D Serverで作成したデータベースに接続し，旧式ネットワークレイヤーに切り替えてからインタープリターモードでクライアントを再起動すると，サーバー接続時にエラーが表示されました。

* ACI0095994 ``GOTO OBJECT``の速度がv13と比較してずっと遅くなりました。

* ACI0095871 Mac版のみ。リストボックスのセルは，内容を編集している間だけ右揃えが左揃えになりました。

* ACI0096035 Windows版のみ。サービス起動した4D Serverを停止するとエラーメッセージが返されました。

* ACI0096092 Windows版のみ。``4D_OPTION_BLOCKING_EXTERNAL_PROCESS``オプションが指定された場合，``LAUNCH EXTERNAL PROCESS``で外部アプリケーションを起動することができませんでした。

* ACI0096184 外部ファイルのユーザー設定が有効にされている場合，ビルドされたクライアント/サーバーのネットワーク通信ポートを実行中に変更すると，クライアントがクラッシュしました。

* ACI0096154 Mac版のみ。複数行を表示できるテキスト入力エリアに，巨大なオブジェクト型データ（フィールドまたは変数）を表示すると，画面のリフレッシュに時間がかかったり，アプリケーションがクラッシュしたりました。表示できるオブジェクト型データの最大サイズは，テキスト入力エリアの幅に比例するようです。高さには左右されません。

* ACI0094537 ``FTP_GetDirList``は，6ヶ月以上前に更新されたファイルの更新時間を正しく返しませんでした。

* ACI0095216 ``command``+``option``+右クリック（Mac）または``Shift``+``Alt``+右クリック（Windows）でプロセスメニューを表示し，プロセスに割り込んだ場合，間違ったプロセスのデバッガが表示されたり，デバッガがまったく表示されないことがありました。

* ACI0096145 Windows版のみ。システムのアピアランステーマが「クラシック」に設定されている場合，非フォーカスリストボックスの選択されたセルが正しく表示されませんでした。

* ACI0095403 64ビット版のみ。プロパティリストで設定したヘルプTipsがストラクチャに保存されませんでした。

* ACI0095470 新ネットワークレイヤーのみ。30秒ほどクライアントマシンをスリープさせてからマシンのスリープを解除した場合，4Dがスリープから復帰しませんでした。

* ACI0095532 Windows 64ビット版のみ。``Open form window``と``Movable form dialog box``の組み合わせで表示したウインドウは，最大化・最小化ボタンをクリックしても何も起きませんでした。

* ACI0095137 フォームエディターで複数のテキスト入力オブジェクトを水平方向に均等配置した場合，オブジェクトのサイズが変化することがありました。

* ACI0096063 ラベルのテキストが常に左揃えで印字されました。

* ACI0096174 Windows版のみ。4D Viewエリアのツールバーボタンをクリックした場合，エリアをクリックするまではアクションの結果が画面に反映されませんでした。

* ACI0096179 クライアント/サーバーモードで``QUERY BY ATTRIBUTE``の後に``Get last query path``または``Get last query plan``を実行した場合，クエリパスやクエリプランが返されませんでした。

* ACI0096183 ユーザーフォームエディターにスタティックテキストオブジェクトを追加し，テキストが編集中の状態でエディターの左上にある「以前のバージョンに戻す」ボタンをクリックすると，アプリケーションがクラッシュしました。

* ACI0096227 クライアントで``Is field value null``コマンドを使用した場合，常に``False``が返されました。

* ACI0096235 フォームエディターのツールボタンでオブジェクトの入力順だけを変更した場合，変更内容が保存されませんでした。

* ACI0096100 64ビット版のみ。RESTプロセスが一定の数を超えると，サーバーがクラッシュしました。

* ACI0096284 Windows版のみ。サービス起動した4D Serverで自動アップデートを実行した場合，タイミングの関係（フォルダーがロックされている）でアプリケーションの入れ替えに失敗することがありました。

* ACI0094057 Windows版のみ。Word文書を4D Writeで開くと，``PICT``形式以外の画像が失われました。``BMP``，``JPEG``，``PNG``，``TIFF``画像が文書に含まれていると「サポートされないイメージ形式です・というエラーが表示されます。
