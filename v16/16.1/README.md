## 4D v16.1 

``210503``

![jp](https://cloud.githubusercontent.com/assets/10509075/16182979/016305e0-36e7-11e6-816b-2335cc6f0abb.png)

* ACI0096548 Mac版のみ。ファイルサイズが0のドキュメントを``Document to text``で読み込もうとすると，``utf-8``エンコーディングを指定しない限り，error in user parameter list (paramErr) というエラーが返されました。

* ACI0096403 Mac 64ビット版のみ。リストフォームに表示されたスタティックテキスト以外のオブジェクト（ボタン・ポップアップ・テキスト入力エリアなど）は，オブジェクトの表示（常に・レコード選択時・レコード非選択時）プロパティを無視しました。

---

* ACI0096314 何もエラーが発生していない状況で``XML GET ERROR``を実行すると，アプリケーションが終了しました。

```
C_TEXT($Ref;$Error)
$Ref:=DOM Create XML Ref("my_root")
TRACE
XML GET ERROR($Ref;$Error)
DOM CLOSE XML($Ref)
```

* ACI0096589 ``LISTBOX SET HIERARCHY``でページ2以降に配置された階層リストボックスの階層を操作した後，`` FORM GOTO PAGE``でそのページに移動しようとすると，アプリケーションが終了しました。

* ACI0094940 クイックレポートエディターを起動した後，プリントプレビューを実行すると，エディター上のラベル「レコード/セレクション」および「レコード/テーブル」が消え，それぞれ数だけが画面上に表示されました。

* ACI0096560 階層リストボックスのたたまれた行に対して``EDIT ITEM``を実行した場合，その階層が表示されるようになりますが，その後，出現した分の行数だけ移動できる距離が下方向に延長されておらず，最後までスクロールすることができませんでした。

* ACI0096595 デザインモード・ツールバーの「新規」ボタンは，メソッドエディターやフォームエディターを使用しているときでも，常に新規データベースの作成ダイアログを表示しました。エディターが開かれているときは，状況に応じ，新規テーブル・メソッド・フォームの作成ダイアログが表示されるべきです。

* ACI0096600 Windows 32ビット版のみ。リストフォームを印刷（``XPS``プレビューを含む）すると，背景色の設定されたスタイル付きテキストの位置がずれました。

* ACI0096464 Windows版のみ。``OB GET``コマンドは，16進数表記の整数を変換しませんでした。たとえば，``0x00FFFFFF``を取り出そうとした場合，``16777215``ではなく，``0``が返されました。

```
C_OBJECT($obj)
C_LONGINT($decimal)
C_TEXT($hex)

OB SET($obj;"hex";"0x00FFFFFF")
$decimal:=OB Get($obj;"hex";Is longint) 
```

* ACI0096386 4D Server上でWebサーバーを起動した後に管理者（``Administrator``）のパスワードを変更した場合，``On Web Authentication``データベースメソッドが実行されると，以前のパスワードに戻ってしまいました。デスクトップ版では問題ありません。また，``Designer``や一般ユーザーアカウントも問題ありません。

* ACI0096637 Mac 64ビット版のみ。ダイアログで表示したウィンドウとデバッガの間を行き来しているとアプリケーションがクラッシュしました。

* ACI0096455 Windows 64ビット版のみ。ポーランド語・セルビア語・チェコ語などで使用する文字を``Alt``+``0`` ``1`` ``8`` ``5``, ``Alt``+``0`` ``2`` ``3`` ``4``といったテンキーシーケンスで入力することができませんでした。

* ACI0095985 Windows版のみ。マウスボタンを押し続けている間，``eAE_Idle``イベントがプラグインに渡されませんでした。

* ACI0096581 Windows版のみ。ビルドしたサーバーアプリケーションをサービス登録した場合，コマンドライン引数の``-d``でデータファイルの場所を指定することができませんでした。

***注記**: アプリケーション配布の新しいアーキテクチャーが有効にされている場合に影響があります。以前のアーキテクチャーでは，データファイルのパスがストラクチャに書き込まれていたので，引数で指定することはありませんでした。

* ACI0096436 アプリケーション配布の新しいアーキテクチャーを有効にし，ビルドしたサーバーアプリケーションをサービス登録した場合，``lastDataPath.xml``に記述されたパス（最後にダイアログ経由で選択したデータファイルのパス）が使用されませんでした。デフォルトのデータファイルがみつからない場合，毎回，データファイルを指定するためのダイアログが表示されました（デスクトップとの対話が許可されている場合）。

* ACI0096528 ``EXPORT DATA``で書き出しダイアログを表示した場合，カレントセレクションの並び順が反映されませんでした。

**注記**: 内部的にセットが使用されていたことが原因です。修正により，内部的に命名セレクションが使用されるようになりました。

* ACI0096491 4D Write Pro文書が保存されたオブジェクト型フィールドを標準のダイアログで書き出した後，読み込んだ場合，ドキュメントの内容が空でした。

**注記**: オブジェクト型フィールドの特殊データ（Write Pro文書など）がバイナリ形式で表現されるようになりました。``SEND VARIABLE/VARIABLE TO BLOB``などの変換コマンド，``Execute on server``/``EXECUTE ON CLIENT``などの転送コマンド全般に影響があります。``SEND RECORD``は影響ありません。

* ACI0096596 Windows版のみ。メソッドエディターにある程度（50行以上）のテキストを入力すると，文字入力の反応が明らかに遅くなってゆきました。

* ACI0096391 Windows版のみ。``Print object``コマンドでリストボックスを印刷すると，ヘッダーのテキストが出力されませんでした。

* ACI0096514 Mac版のみ。アプリケーションビルドのダイアログで4D Volume Desktop以外の4Dアプリケーションを選択することができました。以前のバージョンでは，エラーが表示されました。

* ACI0096261 Windows版のみ。4D ODBC Driverの著作権表示が2017ではなく，2016年のままでした。
