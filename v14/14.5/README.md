4D v14.5
---

* ACI0094851 何らかの理由で不正な``multipart/form-data``タイプのデータがWebサーバーに対して送信された場合，アプリケーションがクラッシュするまで無限ループに陥りました。

* ACI0088167 [LISTBOX GET HIERARCHY](http://doc.4d.com/4Dv15/4D/15.1/LISTBOX-GET-HIERARCHY.301-2686097.ja.html)に列番号``0``を渡すと，アプリケーションがクラッシュしました。

* ACI0094028 Mac版のみ。おおきな外部モニターをメイン画面として使用した場合，内部モニター（サブ画面）でクリックしたポップアップメニューの表示される位置が正しくありませんでした。

* ACI0094631 クエリエディターを表示し，自動リレーションが設定されたフィールドに対してクエリを実行すると，アプリケーションがクラッシュしました。

* ACI0094638 Mac版のみ。特定の状況では，保存またはキャンセルボタンが1回目のクリックに対して反応しませんでした。たとえば，リストボックスの値を選択リストで入力した直後に問題が発生しました。

* ACI0094773 Mac版のみ。Retinaディスプレイに表示された4D Writeエリアに対して何かをドロップすると，画面の表示が乱れました。

* ACI0094718 クライアント側で[SET QUERY DESTINATION](http://doc.4d.com/4Dv15/4D/15.1/SET-QUERY-DESTINATION.301-2685575.ja.html)を実行し，クエリデスティネーションをセットに設定した場合，UUIDフィールドにNULLが含まれていると，アプリケーションがクラッシュしました。

* ACI0094778 Windows版のみ。連続してアプリケーションをビルドすると，フォルダーの名前を変更できない，というエラーが返されることがありました。アップデートツールのマニフェストがインストールできない，というエラーが返されることもあります。

* ACI0094546 Mac版のみ。長大なテキストを含むフィールドがレコードに存在する場合，フォームの表示と終了にとても時間がかかりました。たとえば，``1,000,000``文字のテキストがフィールドに代入されている場合，フォームの開閉に30秒ほどかかることがありました

* ACI0094825 印刷中，リストボックスに対して[OBJECT GET BEST SIZE](http://doc.4d.com/4Dv15/4D/15.1/OBJECT-GET-BEST-SIZE.301-2685666.ja.html)を使用すると，最適高さに正しい値が返されませんでした。ACI0094776修正後の問題です。

* ACI0094809 階層リストボックスに非表示行の配列が使用した場合，非表示になるべき行がそうなりませんでした。ビルド``193710``以降の問題です。

* ACI0094804 プラグインエリアが置かれたフォームをエクスプローラーまたはフィームエディターで繰り返し表示していると，メモリーリークが発生しました。

* ACI0094812 Mac OS 10.11のみ。4D Viewおよび4D Writeの動作が不安定なためにアプリケーションがクラッシュする場合がありました。

* ACI0094710 Mac版のみ。リストボックスにフォーカスが置かれている状態でポップアップウインドウを表示した場合，そのポップアップウインドウにもテキスト入力が表示されていると，フォームを閉じた後に復帰したフォームのフォーカスが置かれたエリアにはカーソルが表示されず，テキストの選択された範囲はグレーアウトされていました。ACI0094520と似た問題です。

* ACI0094756 リストボックスに非表示行配列が設定されており，フォームまたはリストボックスで``On Getting Focus``, ``On Before Keystroke``, ``On After Keystroke``, ``On After Edit``いずれかのイベントが有効にされている場合，リストボックスのセルにデータを入力しようとするとセルのフォーカスが失われました。``On Mouse Enter``, ``On Mouse Move``, ``On Mouse Leave``でも似たような問題が発生します。

* ACI0094639 ビルド``196791``以降，リストボックスの列に選択リストが設定されている場合，表示されるはずのアイコンが表示されませんでした。そのために，値が選択できませんでした。

* ACI0094643 特定のNightly Build以降，階層リストボックスの階層アイコンが表示されませんでした。明示的に[LISTBOX SET HIERARCHY](http://doc.4d.com/4Dv15/4D/15.1/LISTBOX-SET-HIERARCHY.301-2686098.ja.html)を使用すれば，表示されるようになります。

* ACI0094680 ビルド``195430``以降，リストボックスにスリーステートチェックボックスが表示されませんでした。

* ACI0094491 [SMTP_SetPrefs](http://doc.4d.com/4Dv15/4D-Internet-Commands/15/SMTP-SetPrefs.301-2397898.ja.html)でエンコーディングを設定した後，[SMTP_Charset](http://doc.4d.com/4Dv15/4D-Internet-Commands/15/SMTP-Charset.301-2397916.ja.html)でメールの件名だけにエンコーディングが適用されるように指定 (``$Error:=SMTP_Charset (1;0)``) した場合，メールの本文にもエンコーディングが適用されました。

* ACI0092880 Mac版のみ。ユーザー設定モードが有効にされたアプリケーションで，自動アップグレードを実行すると，``EnginedServer.4DLink``に書き込まれていたサーバーのアドレスが更新されてしまいました。

* ACI0094557 OS X El Capitanのみ。フルスクリーンモードでウインドウが表示されているときに``Escape``キーを入力すると，アプリケーションがクラッシュしました。

* ACI0068985 メソッドエディターのオートコンプリート機能は，候補が多数（たとえば3万件以上）存在する場合，動作がとても遅くなりました。

* ACI0094268 Windows版のみ。4D Viewにデータを入力しているとき，リターンキーを押すたびにカーソルが入力中のセルの下に移動せず，アクティブなセルに表示されました。

* ACI0094131 名前のないリストをツールボックスで作成することができました。本来であれば，エラーが返されるべきです。

* ACI0094734 Mac版のクライアントで，ようこそ画面を閉じることによってデザインモードに切り替えた後，終了メニューを選択すると，クライアントがフリーズしました。

* ACI0091831 『起動時にWebサーバーを開始』設定が有効にされたデータベースに対し，``http://127.0.0.1:3080/4DSTATS``のようなURLをリクエストした後，Webサーバーを再起動すると『データベースを公開できません』というエラーが返されました。

* ACI0092932 階層リストボックスを右いっぱいに水平スクロールした後，[OBJECT SET SCROLL POSITION](http://doc.4d.com/4Dv15/4D/15.1/OBJECT-SET-SCROLL-POSITION.301-2685673.ja.html)で特定の行までスクロールさせると，垂直スクロールの位置が正しくありませんでした。階層リストボックスでなければ，問題ありません。

* ACI0094520 Mac版のみ。テキスト入力エリアにフォーカスが置かれている状態でポップアップウインドウを表示した場合，そのポップアップウインドウにもテキスト入力が表示されていると，フォームを閉じた後に復帰したフォームのフォーカスが置かれたエリアにはカーソルが表示されず，テキストの選択された範囲はグレーアウトされていました。

* ACI0094546 Mac版のみ。長大なテキストを含むフィールドがレコードに存在する場合，フォームの表示と終了にとても時間がかかりました。たとえば，``"large text"*1024*48``のようなテキストでは，フォームを開くのに1分かかりました。

* ACI0092584 Mac OSX 10.7.5のみ。ビルドしたクライアントアプリケーションが特定のマシンでは起動できませんでした。

* ACI0094187 ドキュメントの指示に従い，スペルチェック辞書をインストールしても，登録された単語が認識されませんでした。

**注記**: スペルチェック辞書のカスタマイズは，ユーザー辞書を補完するものであり，置き換えるものではありません。たとえば，10万語を超える単語数が登録されたカスタム辞書をインストールすると，アプリケーションの起動が明らかに遅くなります。

* ACI0094456 表示されていないウインドウ上のWebエリアでは，``On End URL Loading``, ``On URL Filtering``など，Webエリア特有のフォームイベントが発生しませんでした。

* ACI0094583 ダイアログを閉じた後，メニューバーが正しく更新（再描画）されないことありました。

* ACI0094433 セレクション型のリストボックスに対して[LISTBOX DUPLICATE COLUMN](http://doc.4d.com/4Dv15/4D/15.1/LISTBOX-DUPLICATE-COLUMN.301-2686079.ja.html)を実行してデータソースが未定義のカラムを複製すると，アプリケーションがクラッシュしました。ビルド195696以降の問題です。

* ACI0094486 Internet Commandsでメールを送信すると，SMTPのヘッダーに``charset="utf - 8"``といった文字列がセットされました。ハイフンの前後に余計なスペースが存在するため，一部のメールクライアントでメッセージが正しく表示されませんでした。

* ACI0094245 Windows版のみ。オブジェクトライブラリの『カテゴリー』ポップアップメニューが機能していませんでした。

* ACI0094093 Windows版のみ。リストボックスのセルに入力フィルターが設定されている場合，タイプ入力中にテキストが上下に揺れました。

* ACI0094303 Mac版のみ。OS X 10.11に[ODBC driver v14](http://doc.4d.com/4Dv14/4D/14/Installing-an-ODBC-driver-on-OS-X.300-1395108.ja.html)がインストールできないことがありました。

**注記**: ドライバーは，下記の場所にあるOpenSSL.frameworkを必要としています。

```
/System/Library/Frameworks
```

または

```
/Library/Frameworks
```

修正により，フレームワークがなくても，ドライバーが使用できるようになりました。その場合，SSL接続はできません。

* ACI0093919 [DatePickerウィジェット](http://doc.4d.com/4Dv15R2/4D/15-R2/DatePicker-and-DateEntry.300-2714815.ja.html)とテキストフィールドが同一のフォームに表示されていた場合，上下矢印キーの入力でテキストエリア内でカーソルが移動する代わりに日付が変わりました。

* ACI0080477 表示フォーマットが時間型に設定されている配列リストボックスの数値配列を複製した場合，表示フォーマットがコピーされず，普通の数値列になりました。関連付けられているのが時間配列であれば問題ありません。

* ACI0094374 ユーザー認証ダイアログでデザイナーのパスワード変更を試み，古いパスワードだけを入力して新しいパスワードを入力しなかった場合，エラー``-10511``（コマンド""をコンポーネントから呼び出すことはできません）が表示されました。

* ACI0093236 ツールボックスでパスワードを編集した場合，第1フィールドに新しいパスワードを入力し，第2フィールドに空または別の文字列を入力した場合，エラーが表示されますが，OKボタンを2回クリックしてダイアログを閉じれば，パスワードを更新することができました。確認用の第2フィールドに意味がありませんでした。

* ACI0089945 Windows版のみ。フィールドの名前が8文字以下の場合，アラビア文字の値が表示されませんでした。v13では問題ありません。

* ACI0094430 ツールメニューから4D Viewエリアを表示し，文書を開いてスクロールすると，アプリケーションがクラッシュすることがありました。プラグインが負の列番号に対応していなかったことが原因でした。

* ACI0091544 Windows版のみ。サーバー側で[WR PICTURE TO AREA](http://doc.4d.com/4Dv15/4D-Write/15/WR-PICTURE-TO-AREA.301-2398605.ja.html)が使用できませんでした。

* ACI0094399 フォームの表示と同時にリストボックスのカラムをプログラムで並び替えることができませんでした。フォームが表示された後，クリックイベント等であれば，問題ありません。

**注記**: 回避策として``On Timer``を使用することができます。

```
Case of 
: (Form event=On Load)

  $vpLb:=OBJECT Get pointer(Object named;"tbLb")
  $vpCol1:=OBJECT Get pointer(Object named;"ttCol1")
  $vpCol2:=OBJECT Get pointer(Object named;"ttCol2")
  ARRAY BOOLEAN($vpLb->;0)
  ARRAY TEXT($vpCol1->;0)
  ARRAY TEXT($vpCol2->;0)
  APPEND TO ARRAY($vpLb->;False)
  APPEND TO ARRAY($vpCol1->;"A")
  APPEND TO ARRAY($vpCol2->;"2")
  APPEND TO ARRAY($vpLb->;False)
  APPEND TO ARRAY($vpCol1->;"B")
  APPEND TO ARRAY($vpCol2->;"1")
  APPEND TO ARRAY($vpLb->;False)
  APPEND TO ARRAY($vpCol1->;"C")
  APPEND TO ARRAY($vpCol2->;"3")

  SET TIMER(-1)

: (Form event=On timer)

  SET TIMER(0)
  カスタムソートメソッド ("tbLb";0)

End case 
```

* ACI0094431 15.1以降，Internet Commandsで添付ファイル名にドイツ語アクセント記号が含まれるメールが送信できませんでした。

* ACI0094478 Windows版のみ。リストフォームに表示されたハイライトボタンは，Disabled状態でグレーの半透明になりませんでした。詳細フォームであれば，問題ありません。* ACI0088553 Inconsistent behavior/error during the build process.

* ACI0092139 4D Viewは，地域と言語の設定で決められた数値フォーマットを継承しませんでした。たとえば，スペイン設定で``###,##0.00``のようなフォーマットを使用した場合，値が``<<<<<<``と表示されました。期待される結果は``1.200,00``のような形式です。本来（4D本体がそうであるように）フォーマットを``###.##0,00``のように調整する必要はないはずです。修正により，スペイン語・ポルトガル語のリソースファイルが改定されました。

* ACI0090701 一部のアプリケーションは，コンパイルやシンタックスチェックの実行でクラッシュすることがありました。原因は，間違ったコード（下記）にありました。修正により，『変数 ? は配列ではありません』というエラーが返されるようになりました。

```
$a:=0
$b:=0
$b:=Method2 {$a}
```

* ACI0093505 日本語入力がオンにされている場合，フォーカスされたチェックボックスの状態をスペースバーでトグルすることができませんでした。ラジオボタンであれば，問題ありません。

* ACI0094274 Mac版のみ。変数のプロパティで『ドラッグ可』が有効にされている場合，``On Clicked``イベントが発生しませんでした。ダブルクリックが必要でした。

* ACI0094095 Windows版のみ。[Open form window](http://doc.4d.com/4Dv15/4D/15.1/Open-form-window.301-2686139.ja.html)にオプションのアスタリスクを渡した使用した場合，2度目のコールで全画面表示が解除されました。

* ACI0094333 Windows版のみ。Microsoft Word 2016でコピーしたテキストを4Dにペーストまたはドロップすると，最後にU+0000/U+000Aが挿入されました。Microsoft Word 2013以前であれば問題ありません。

* ACI0094135 Windows版のみ。``textArea``内に``tspan``が含まれるSVGを印刷した場合，フォントサイズが10倍になりました。

```xml
<textArea height="20" width="200" x="10" y="10">Hello <tspan font-size="12">world!</tspan></textArea>
```

* ACI0094212 [IMPORT TEXT](http://doc.4d.com/4Dv15R2/4D/15-R2/IMPORT-TEXT.301-2543783.ja.html)で読み込んだテキストデータが改行コード（10または13）以外で終わっている場合，データの末尾にヌル文字``0x0000``が追加されることがありました。

* ACI0091585 Windows版のみ。空のポップアップメニューをクリックすると，空の行が表示されました。本来であれば，何も表示されるべきではありません。

* ACI0093095 [SearchPickerウィジェット](http://doc.4d.com/4Dv15R2/4D/15-R2/SearchPicker.201-2714814.ja.html)に文字を入力するたびに``On Data Change``イベントが2回，発生しました。同イベントでクエリを実行するようなアプリケーションでは，データベースに余計な負荷がかかりました。

**注記**: 一般的に，キーストロークイベントでクエリを実行する場合，直ちにクエリを実行するのではなく，[SET TIMER](http://doc.4d.com/4Dv15R2/4D/15-R2/SET-TIMER.301-2543851.ja.html)を実行し，タイマーイベントでクエリを実行するように工夫することが推奨されています。そうすれば，キーボード入力を休止したときのまとまった文字列でクエリを実行することができるからです。

* ACI0093545 Windows版のみ。[HTTP Get](http://doc.4d.com/4Dv15R2/4D/15-R2/HTTP-Get.301-2543928.ja.html)に（``http:``，``ftp:``などではない）無効なプロトコルが渡された場合，プリケーションがクラッシュしました。``image:``のようなカスタムプロトコルは，APIとして公開されていることがあります。DNSクエリでクラッシュするのは間違いです。

* ACI0094002 [SVG SET ATTRIBUTE](http://doc.4d.com/4Dv15R2/4D/15-R2/SVG-SET-ATTRIBUTE.301-2542980.ja.html)にアスタリスクオプションを添えてピクチャフィールドの属性を書き換えた場合，ピクチャを更新したことにはならず，フィールドを保存したり，[PICTURE TO BLOB](http://doc.4d.com/4Dv15R2/4D/15-R2/PICTURE-TO-BLOB.301-2544177.ja.html)で変換しても，古い画像のままでした。

* ACI0094054 テキスト入力内で文字列が選択された状態で別のウインドウをアクティブにしてから当初のウインドウを再度アクティブにした場合，テキストの選択された状態が失われました。

* ACI0094386 [LISTBOX Get rows height](http://doc.4d.com/4Dv15R2/4D/15-R2/LISTBOX-Get-rows-height.301-2544043.ja.html)は，行の高さがピクセル単位で設定されており，その高さが1行の高さに満たない場合，``0``を返しました。

* ACI0085311 Mac版のみ。[PLAY](http://doc.4d.com/4Dv15R2/4D/15-R2/PLAY.301-2543166.ja.html)の非同期モードで開始したサウンドファイルの再生を下記のコマンドで停止することができませんでした。

```
PLAY("";0)
```

* ACI0094129 [LISTBOX Get information](http://doc.4d.com/4Dv15R2/4D/15-R2/LISTBOX-Get-information.301-2544059.ja.html)は，[メモリにロードされたフォーム](http://doc.4d.com/4Dv15R2/4D/15-R2/FORM-LOAD.301-2543830.ja.html)ヘッダー/フッターの表示/非表示情報を正確に返しませんでした。

* ACI0092129 Mac版のみ。[SET PRINT PREVIEW](http://doc.4d.com/4Dv15R2/4D/15-R2/SET-PRINT-PREVIEW.301-2543565.ja.html)でプレビューが有効にされた場合，印刷ダイアログで『PDFとして保存』『PDFでメールを送信』などのオプションを選択するとアプリケーションがクラッシュしました。

* ACI0094061 テキスト入力オブジェクトのタイプを変数からフィールドに変更するたびに，オブジェクトの高さが1ずつ増えてゆきました。結果的に，自動スタイルシートもはずされてしまいました。

* ACI0094209 データベースにパスワードを設定し，クライアント/サーバーアプリケーションをビルドした場合，ログイン画面に表示されるはずの『パスワードを保存』オプションがありませんでした。

* ACI0094264 [OBJECT SET SUBFORM](http://doc.4d.com/4Dv15R2/4D/15-R2/OBJECT-SET-SUBFORM.301-2543636.ja.html)でサブフォームを切り替えた場合，直後にフォームが再描画されませんでした。[SET TIMER](http://doc.4d.com/4Dv15R2/4D/15-R2/SET-TIMER.301-2543851.ja.html)で強制的にフォームイベントを発生させれば問題ありませんでした。その場合，タイマーイベントで何がを実行する必要はありません。

* ACI0090056 データベースフォルダーに対する相対パスでデフォルトHTMLルートフォルダーが設定されている場合，ビルドされたアプリケーションで，フォルダーパスが正しく表示されませんでした。たとえば，

```
.\DataBaseName\Database\Database\WebFolder
```

のようなパスは，設定画面に

```
.\DataBaseName\Database\WebFolder
```

と表示されました。

* ACI0083469 [OBJECT DUPLICATE](http://doc.4d.com/4Dv15R2/4D/15-R2/OBJECT-DUPLICATE.301-2543598.ja.html)でリストボックスを複製すると，ヘッダーやフッターなどのオブジェクトに重複する名前が与えられました。デザインモードでリストボックスを複製した場合には問題ありません。

* ACI0094182 レコードとインデックスを圧縮した後に一部のインデックスが破損することがありました（『タグヘッダーが無効です』）。

* ACI0093534 メニューバーが関連づけられていないフォームを閉じた後，最前面になったウインドウのダイナミックメニューバーが再描画されませんでした。たとえば，プログラスバーコンポーネントを閉じた後に問題がありました。64ビット版では問題ありません。

* ACI0094166 Windows版のみ。4D Viewエリアにドイツ配列のキーボードでアロバース記号（@）を入力することができませんでした。

* ACI0094236 Mac版のみ。キーワードインデックスが設定されたテーブルでインデックス構築中にアプリケーションがクラッシュすることがありました。『[テキストのクエリや並び替えでタグを使用しない](http://doc.4d.com/4Dv15R2/4D/15-R2/Field-properties.300-2634639.ja.html)』プロパティが使用されている場合，スタイル付きテキストの``span``タグが取り除かれますが，HTMLページからペーストされたテキストのように，有効なXML構造ではない（たとえば閉じるタグがない``<br>``が含まれるHTML）データのインデックス作成で問題が発生しました。``<br />``のようにタグが整形されていれば問題ありません。

**注記**: スタイル付きテキストに閉じるタグが省略されたHTMLが保存されることがないように注意してください。修正により，クラッシュは回避されるようになりましたが，XMLとして解析できないようなデータは標準テキストとして評価されることになります。

* ACI0092860 ダイアログ表示中のフォームから別のフォームを開いた場合，[CANCEL](http://doc.4d.com/4Dv15R2/4D/15-R2/CANCEL.301-2542996.ja.html)で前のフォームに戻りませんでした。

* ACI0094185 SQLでテーブルの名前をエイリアスとして使用することができませんでした。

```sql
SELECT * FROM aaa AS aaa;

```

* ACI0094215 Windows版のみ。4D Viewあるいは4D Writeエリアにドイツ語配列のキーボードでControl+Alt+(2,3,Q,E)キーで² / ³ / @ / ?といった記号を入力することができませんでした。ビルド190461以降の問題です。

* ACI0093284 [GET TEXT KEYWORDS](http://doc.4d.com/4Dv15R2/4D/15-R2/GET-TEXT-KEYWORDS.301-2543352.ja.html)にメモリーリークがありました。*オプションを使用しなければ問題ありません。

```
C_TEXT($txt_t)
ARRAY TEXT($motcle_at;0)

$txt_t:="a b c d e f g h i j k l m n o p q r s t u v w x y z"

Repeat 
GET TEXT KEYWORDS($txt_t;$motcle_at;*)
Until (Shift down)
```

* ACI0094039 Windevによる4D ODBC Driverを介したデータ取得ができませんでした。Windev製品特有のSQLリクエストを処理するために，DSNの新しいオプション『Windev』が追加されました。

* ACI0094147 4D Serverの管理画面には，Windows 10と表示されるべきプラットフォーム名がWindow 8と表示されました。

**注記**: Windows 8.1が認識されない問題はACI0093592，[PLATFORM PROPERTIES](http://doc.4d.com/4Dv15R2/4D/15-R2/PLATFORM-PROPERTIES.301-2544208.ja.html)でWindows 10が認識されない問題はACI0094184で修正されました。

* ACI0093770 アプリケーションの環境設定でマーカーの色を変更しても，環境設定画面には常にマーカー色が黒で表示されました。



